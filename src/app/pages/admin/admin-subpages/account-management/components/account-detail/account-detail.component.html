<ng-container>
  <div class="d-flex justify-content-center align-items-center text-app font-weight-bold">
    <h1 class="font-weight-bold">Thông tin chi tiết tài khoản <span>{{ (detail_account$ | async)?.account.account_name}}</span></h1>
  </div>
  <ng-container *ngIf="!isEditing, else updateForm">
    <div class="d-flex flex-row p-5 mb-4">
      <div class="avatar col-3 mb-4">
        <div class="d-flex flex-column app-flex">
          <img [src]="(detail_account$ | async)?.image || 'assets/images/default-avatar.png'" style="height: 400px; width: 300px; object-fit: cover;" alt="Avatar" />
          <h1 class="text-app text-left font-weight-bold text-center my-4" *ngIf="(detail_account$ | async)?.account?.role?.role_id == 1 || (detail_account$ | async)?.account?.role?.role_id == 2">Mã nhân viên: <b (click)="ViewToEmployee()"  class="cursor-pointer">
            {{(detail_account$ | async)?.employee_id | standardizedId}}
          </b></h1>
          <h1 class="text-app text-left  font-weight-bold text-center my-4" *ngIf="(detail_account$ | async)?.account?.role?.role_id == 3">Mã khách hàng: <b (click)="ViewToCustomer()" class="cursor-pointer">{{(detail_account$ | async)?.customer_id | standardizedId}}</b></h1>
        </div>
      </div>
      <div class=" col-9 d-flex flex-column">
        <div class="d-flex flex-column">
          <div class="row py-3">
            <div class="col-2 text-center font-weight-bold"><b>Mã tài khoản: </b></div>
            <div class="col-9 text-app font-weight-bold">{{((detail_account$ | async)?.account?.account_id | standardizedId ) || '-'}}</div>
          </div>
          <div class="row py-3">
            <div class="col-2 text-center font-weight-bold"><b>Tên tài khoản: </b></div>
            <div class="col-9 text-app font-weight-bold">{{(detail_account$ | async)?.account?.account_name || '-'}}</div>
          </div>
          <div class="row py-3">
            <div class="col-2 text-center font-weight-bold"><b>Vai trò: </b></div>
            <div class="col-9 text-app font-weight-bold">{{((detail_account$ | async)?.account?.role?.role_name == "user" ? "Khách hàng": (detail_account$ | async)?.account?.role?.role_name == "admin" ? "Nhân viên": "Quản lý") || '-'}}</div>
          </div>
          <div class="row py-3">
            <div class="col-2 text-center font-weight-bold"><b>Chứng minh thư: </b></div>
            <div class="col-9">{{(detail_account$ | async)?.identity_id || '-'}}</div>
          </div>
          <div class="row py-3">
            <div class="col-2 text-center font-weight-bold"><b>Email: </b></div>
            <div class="col-9">{{(detail_account$ | async)?.email || '-'}}</div>
          </div>
          <div class="row py-3">
            <div class="col-2 text-center font-weight-bold"><b>Số điện thoại: </b></div>
            <div class="col-9">{{(detail_account$ | async)?.phone || "-"}}</div>
          </div>
          <div class="row py-3">
            <div class="col-2 text-center font-weight-bold"><b>Ghi chú: </b></div>
            <div class="col-9">{{(detail_account$ | async)?.note || '-'}}</div>
          </div>
        </div>
        <div class="d-flex flex-column">
          <div class="row py-3">
            <div class="col-2 app-flex">
              <div class="btn btn-outline-app" (click)="goBack()"> <i class="fa fa-arrow-left pr-1" aria-hidden="true">
                </i> Quay lại</div>
            </div>
            <div class="col-9 d-flex flex-row justify-content-end">
              <div class=" btn-danger  align-self-center mr-1" (click)="OpenDeleteModal()">
                <span style="width: 60px;">Xóa bỏ</span>
              </div>
              <div class="btn-app  align-self-center" (click)="OpenChangePasswordModal()">
                <span>Đặt lại mật khẩu</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
  <ng-template #updateForm>
    <div class="d-flex flex-row p-5 mb-4" [formGroup]="updateAccountForm">
      <div class="avatar col-3 mb-4">
        <div class="d-flex flex-column">
          <img src='assets/images/default-book.png' style="height: 390px; width: 390px; object-fit: cover;" alt="Avatar" />
        </div>
      </div>
      <div class=" col-9 d-flex flex-column">
        <div class="d-flex flex-column">
          <div class="row py-3">
            <div class="col-2 app-flex"><b>Họ: </b></div>
            <div class="col-9">
              <input type="text" class="form-control" placeholder="Nhập họ" formControlName="last_name"
              />
            </div>
          </div>
          <div class="row py-3">
            <div class="col-2 app-flex"><b>Tên: </b></div>
            <div class="col-9">
              <input type="text" class="form-control" placeholder="Nhập tên" formControlName="first_name"
              />
            </div>
          </div>
          <div class="row py-3">
            <div class="col-2 app-flex"><b>Chứng minh thư: </b></div>
            <div class="col-9">
              <input type="text" class="form-control" placeholder="Nhập chứng minh thư" formControlName="identity_id"
              />
            </div>
          </div>
          <div class="row py-3">
            <div class="col-2 app-flex"><b>Email: </b></div>
            <div class="col-9">
              <input type="text" class="form-control" placeholder="Nhập địa chỉ email" formControlName="email"
              />
            </div>
          </div>

          <div class="row py-3">
            <div class="col-2 app-flex"><b>Số điện thoại: </b></div>
            <div class="col-9">
              <input type="text" class="form-control" placeholder="Nhập số điện thoại" formControlName="phone"
              />
            </div>
          </div>

          <div class="row py-3">
            <div class="col-2 app-flex"><b>Ngày sinh: </b></div>
            <div class="col-9">
              <input type="date" class="form-control" placeholder="Nhập vào ngày sinh" formControlName="birth_date"
              />
            </div>
          </div>

          <div class="row py-3">
            <div class="col-2 app-flex"><b>Địa chỉ: </b></div>
            <div class="col-9">
              <input type="text" class="form-control" placeholder="Nhập địa chỉ" formControlName="address"
              />
            </div>
          </div>
          <div class="row py-3">
            <div class="col-2 app-flex"><b>Giới tính: </b></div>
            <div class="col-9">
              <select class="form-control" placeholder="Chọn giới tính" formControlName="gender">
                <option value="" selected autofocus disabled>Chọn giới tính</option>
                <option value=true style="background-color: white; color: var(--app-color)">Nam</option>
                <option value=false style="background-color: white; color: var(--app-color)">Nữ</option>
              </select>
            </div>
          </div>
          <div class="row py-3">
            <div class="col-2 app-flex"><b>Ghi chú: </b></div>
            <div class="col-9">
            <textarea class="form-control" placeholder="Nhập ghi chú" formControlName="note"></textarea>
            </div>
          </div>
        </div>
        <div class="d-flex flex-column">
          <div class="row py-3">
            <div class="col-2 app-flex">
              <div class="btn btn-outline-app" (click)="goBack()"> <i class="fa fa-arrow-left pr-1" aria-hidden="true">
                </i> Quay lại</div>
            </div>
              <div class="col-9 d-flex flex-row justify-content-end">
                <div class=" btn-outline-app  align-self-center mr-2" (click)="setupDataForm()">
                  <span class="ml-1" style="width: 60px;">Hủy</span>
                </div>
                <div class="btn-app  align-self-center" (click)="UpdateAccount()">
                  <span>Xác nhận</span>
                </div>
              </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>
</ng-container>
