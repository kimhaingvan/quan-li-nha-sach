(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{GCp2:function(e,t,n){"use strict";n.r(t),n.d(t,"AdminModule",(function(){return ri}));var o=n("tyNb"),i=n("5dmV"),c=n("ofXK"),r=n("fXoL");let a=(()=>{class e{}return e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({factory:function(t){return new(t||e)},imports:[[c.c,o.k]]}),e})();var l=n("F+iu");let b=(()=>{class e{constructor(e){this.orderQuery=e,this.dashboard$=this.orderQuery.dashboard$}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(l.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-management-dashboard"]],decls:2,vars:0,template:function(e,t){1&e&&(r.Wb(0,"p"),r.Ec(1," management-dashboard works!\n"),r.Vb())},styles:[""]}),e})();function s(e,t){if(1&e&&(r.Ub(0),r.Wb(1,"a",4),r.Ec(2),r.Vb(),r.Tb()),2&e){const e=t.$implicit;r.Db(1),r.oc("routerLink",e.url),r.Db(1),r.Fc(e.itemName)}}let d=(()=>{class e{constructor(){this.headerItems=[{itemName:"Kh\xe1ch h\xe0ng",url:"customer-messages"},{itemName:"N\u1ed9i b\xf4",url:"employee-messages"}]}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["app-message-management"]],decls:6,vars:1,consts:[[1,"p-0","pl-2","header-admin","d-flex","align-items-center"],[1,"page-title","font-weight-bold","pl-4","mr-5"],[4,"ngFor","ngForOf"],[1,"page-content-admin","p-4"],["routerLinkActive","active",1,"header-item",3,"routerLink"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Ec(2," Tin nh\u1eafn "),r.Vb(),r.Cc(3,s,3,2,"ng-container",2),r.Vb(),r.Wb(4,"div",3),r.Rb(5,"router-outlet"),r.Vb()),2&e&&(r.Db(3),r.oc("ngForOf",t.headerItems))},directives:[c.l,o.l,o.j,o.i],styles:[""]}),e})();var u=n("mrSG"),p=n("Iubd");function h(e,t){1&e&&r.Rb(0,"i",9)}let m=(()=>{class e{constructor(e){this.modalAction=e,this.loading=!1}ngOnInit(){}onConfirmDelete(){this.modalAction.dismiss(this.borrow_ticket)}dismissModal(){this.modalAction.dismiss(null)}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(p.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-confirm-delete-modal"]],inputs:{borrow_ticket:"borrow_ticket"},decls:18,vars:2,consts:[[1,"modal-header"],[1,"modal-title","big-font"],[1,"close",3,"click"],[1,"text-large"],[1,"modal-body"],[1,"modal-footer"],[1,"btn","btn-app","btn-outline-app",3,"click"],[1,"btn","btn-app","text-white",3,"click"],["class","fa fa-spin fa-circle-o-notch",4,"ngIf"],[1,"fa","fa-spin","fa-circle-o-notch"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Ec(2," X\xe1c nh\u1eadn h\u1ee7y phi\u1ebfu m\u01b0\u1ee3n s\xe1ch "),r.Vb(),r.Wb(3,"div",2),r.ec("click",(function(){return t.dismissModal()})),r.Wb(4,"span",3),r.Ec(5,"\xd7"),r.Vb(),r.Vb(),r.Vb(),r.Wb(6,"div",4),r.Wb(7,"div"),r.Ec(8,"B\u1ea1n c\xf3 th\u1ef1c s\u1ef1 mu\u1ed1n h\u1ee7y phi\u1ebfu m\u01b0\u1ee3n s\xe1ch "),r.Wb(9,"b"),r.Ec(10),r.Vb(),r.Ec(11," ra kh\u1ecfi h\u1ec7 th\u1ed1ng th\u01b0 qu\xe1n kh\xf4ng ? "),r.Vb(),r.Vb(),r.Wb(12,"div",5),r.Wb(13,"button",6),r.ec("click",(function(){return t.dismissModal()})),r.Ec(14,"\u0110\xf3ng"),r.Vb(),r.Wb(15,"button",7),r.ec("click",(function(){return t.onConfirmDelete()})),r.Cc(16,h,1,0,"i",8),r.Ec(17," X\xe1c nh\u1eadn "),r.Vb(),r.Vb()),2&e&&(r.Db(10),r.Fc(null==t.borrow_ticket?null:t.borrow_ticket.borrow_ticket_id),r.Db(6),r.oc("ngIf",t.loading))},styles:[""]}),e})();var g=n("NKEA");let f=(()=>{class e{constructor(e){this.modalAction=e}ngOnInit(){}OnFinishBorrowTicket(){this.modalAction.dismiss(this.borrow_ticket_id)}dismissModal(){this.modalAction.dismiss(null)}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(p.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-confirm-finish-borrow-ticket-modal"]],inputs:{borrow_ticket_id:"borrow_ticket_id"},decls:18,vars:3,consts:[[1,"modal-header"],[1,"modal-title","big-font"],[1,"close",3,"click"],[1,"text-large"],[1,"modal-body"],[1,"modal-footer"],[1,"btn","btn-app","btn-outline-app",3,"click"],[1,"btn","btn-app","text-white",3,"click"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Ec(2," X\xe1c nh\u1eadn tr\u1ea3 s\xe1ch "),r.Vb(),r.Wb(3,"div",2),r.ec("click",(function(){return t.dismissModal()})),r.Wb(4,"span",3),r.Ec(5,"\xd7"),r.Vb(),r.Vb(),r.Vb(),r.Wb(6,"div",4),r.Wb(7,"div"),r.Ec(8,"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n ho\xe0n th\xe0nh phi\u1ebfu m\u01b0\u1ee3n s\xe1ch "),r.Wb(9,"b"),r.Ec(10),r.jc(11,"standardizedId"),r.Vb(),r.Ec(12," kh\xf4ng ? "),r.Vb(),r.Vb(),r.Wb(13,"div",5),r.Wb(14,"button",6),r.ec("click",(function(){return t.dismissModal()})),r.Ec(15,"\u0110\xf3ng"),r.Vb(),r.Wb(16,"button",7),r.ec("click",(function(){return t.OnFinishBorrowTicket()})),r.Ec(17," X\xe1c nh\u1eadn "),r.Vb(),r.Vb()),2&e&&(r.Db(10),r.Fc(r.kc(11,1,t.borrow_ticket_id)))},pipes:[g.b],styles:[""]}),e})();var v=n("4ZtF");const _={borrow_ticket_list_view:null,selected_borrow_ticket:null,current_page:1,filter_page:{page:1,per_page:20},current_pagination_opt:{nextDisabled:!1,previousDisabled:!0,hidePerpage:!0},detail_borrow_ticket:{},authors:[],categories:[],suppliers:[]};let V=(()=>{let e=class extends v.a{constructor(){super(_)}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e=Object(u.b)([Object(v.d)({name:"borrowticket"})],e),e})(),W=(()=>{class e extends v.b{constructor(e){super(e),this.store=e,this.borrow_ticket_list_view$=this.select("borrow_ticket_list_view"),this.current_page$=this.select("current_page"),this.current_pagination_opt$=this.select("current_pagination_opt"),this.detail_borrow_ticket$=this.select("detail_borrow_ticket"),this.suppliers$=this.select("suppliers"),this.categories$=this.select("categories"),this.authors$=this.select("authors")}}return e.\u0275fac=function(t){return new(t||e)(r.ac(V))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var y=n("Cgi0"),k=n("N+K7"),x=n("kpuT");let w=(()=>{class e{constructor(e,t){this.http=e,this.apiAppService=t,this.baseURL=this.apiAppService.baseURL}GetBorrowTickets(e){return Object(u.a)(this,void 0,void 0,(function*(){return yield this.http.post(this.baseURL+"/admin/borrow-ticket-management/get-borrow-tickets",e).toPromise()}))}UpdateBorrowTicket(e){return Object(u.a)(this,void 0,void 0,(function*(){return yield this.http.post(this.baseURL+"/admin/borrow-ticket-management/update-borrow-ticket",e).toPromise()}))}CreateBorrowTicket(e){return Object(u.a)(this,void 0,void 0,(function*(){return yield this.http.post(this.baseURL+"/admin/borrow-ticket-management/create-borrow-ticket",e).toPromise()}))}DeleteBorrowTicket(e){return Object(u.a)(this,void 0,void 0,(function*(){return yield this.http.post(this.baseURL+"/admin/borrow-ticket-management/delete-borrow-ticket",e).toPromise()}))}SearchBorrowTickets(e){return Object(u.a)(this,void 0,void 0,(function*(){return yield this.http.post(this.baseURL+"/admin/borrow-ticket-management/search-borrow-tickets",e).toPromise()}))}FinishBorrowTicket(e){return Object(u.a)(this,void 0,void 0,(function*(){return yield this.http.post(this.baseURL+"/admin/borrow-ticket-management/finish-borrow-ticket",e).toPromise()}))}SendEmailForLateBorrowTicket(e){return Object(u.a)(this,void 0,void 0,(function*(){return yield this.http.post(this.baseURL+"/admin/borrow-ticket-management/send-email-for-late-borrow-ticket",e).toPromise()}))}}return e.\u0275fac=function(t){return new(t||e)(r.ac(k.a),r.ac(x.a))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var C=n("jUWw"),E=n("etIq"),O=n("xXsm");let M=(()=>{class e{constructor(e,t,n,o,i,c){this.borrowTicketApiService=e,this.borrowTicketStore=t,this.borrowTicketQuery=n,this.categoryApiService=o,this.authorApiService=i,this.supplierApiService=c}getBorrowTickets(e){return Object(u.a)(this,void 0,void 0,(function*(){let t=yield this.borrowTicketApiService.GetBorrowTickets(e);this.borrowTicketStore.update({borrow_ticket_list_view:t})}))}setupPagination(){this.borrowTicketStore.update({current_pagination_opt:{hidePerpage:!0,nextDisabled:!this.borrowTicketQuery.getValue().borrow_ticket_list_view.has_next,previousDisabled:!this.borrowTicketQuery.getValue().borrow_ticket_list_view.has_prev}})}navigate(e){let t=this.borrowTicketQuery.getValue();switch(e){case y.a.BACKWARD:this.borrowTicketStore.update({current_page:t.current_page-1});break;case y.a.FORWARD:this.borrowTicketStore.update({current_page:t.current_page+1})}this.borrowTicketStore.update({current_page:this.borrowTicketQuery.getValue().current_page<=0?1:this.borrowTicketQuery.getValue().current_page});let n=this.borrowTicketQuery.getValue().current_page<=0?1:this.borrowTicketQuery.getValue().current_page,o=Object.assign(Object.assign({},this.borrowTicketQuery.getValue().filter_page),{page:n});this.borrowTicketStore.update({filter_page:o})}searchBorrowTickets(e){return Object(u.a)(this,void 0,void 0,(function*(){return yield this.borrowTicketApiService.SearchBorrowTickets(e)}))}setDetailBorrowTicket(e){this.borrowTicketStore.update({detail_borrow_ticket:e})}DeleteBorrowTicketById(e){return Object(u.a)(this,void 0,void 0,(function*(){return yield this.borrowTicketApiService.DeleteBorrowTicket({borrow_ticket_id:e})}))}UpdateBorrowTicket(e){return Object(u.a)(this,void 0,void 0,(function*(){return yield this.borrowTicketApiService.UpdateBorrowTicket(e)}))}FinishBorrowTicket(e){return Object(u.a)(this,void 0,void 0,(function*(){const t={borrow_ticket_id:e};return yield this.borrowTicketApiService.FinishBorrowTicket(t)}))}SendEmailForLateTicket(e,t){return Object(u.a)(this,void 0,void 0,(function*(){}))}GetCategories(e){return Object(u.a)(this,void 0,void 0,(function*(){let t=yield this.categoryApiService.GetCategories(e);this.borrowTicketStore.update({categories:t.items})}))}GetAuthors(e){return Object(u.a)(this,void 0,void 0,(function*(){let t=yield this.authorApiService.GetAuthors(e);this.borrowTicketStore.update({authors:t.items})}))}GetSuppliers(e){return Object(u.a)(this,void 0,void 0,(function*(){let t=yield this.supplierApiService.GetSuppliers(e);this.borrowTicketStore.update({suppliers:t.items})}))}CreateAuthor(e){return Object(u.a)(this,void 0,void 0,(function*(){return yield this.authorApiService.CreateAuthor(e)}))}CreateCategory(e){return Object(u.a)(this,void 0,void 0,(function*(){return yield this.categoryApiService.CreateCategory(e)}))}CreateSupplier(e){return Object(u.a)(this,void 0,void 0,(function*(){return yield this.supplierApiService.CreateSupplier(e)}))}CreateBorrowTicket(e){return Object(u.a)(this,void 0,void 0,(function*(){return yield this.borrowTicketApiService.CreateBorrowTicket(e)}))}SendEmailForLateBorrowTicket(e){return Object(u.a)(this,void 0,void 0,(function*(){return yield this.borrowTicketApiService.SendEmailForLateBorrowTicket(e)}))}}return e.\u0275fac=function(t){return new(t||e)(r.ac(w),r.ac(V),r.ac(W),r.ac(C.a),r.ac(E.a),r.ac(O.a))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var D=n("3Pt+");let j=(()=>{class e{constructor(e,t,n){this.modalAction=e,this.borrowTicketQuery=t,this.borrowTicketService=n,this.message="",this.detail_borrow_ticket$=this.borrowTicketQuery.select("detail_borrow_ticket")}ngOnInit(){}dismissModal(){this.modalAction.dismiss(null)}sendEmail(){if(!this.message)return toastr.error("Vui l\xf2ng nh\u1eadp n\u1ed9i dung l\u1eddi nh\u1eafn!");this.modalAction.dismiss(this.message)}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(p.a),r.Qb(W),r.Qb(M))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-send-email-modal"]],decls:36,vars:10,consts:[[1,"modal-header"],[1,"modal-title","big-font"],[1,"close",3,"click"],[1,"text-large"],[1,"modal-body"],[1,"reader-info","mb-3"],[1,"mb-0"],[1,"d-flex","flex-column"],[1,"row"],[1,"col-2"],[1,"col-9","text-app","font-weight-bold"],[1,"message-info"],[1,"col-12"],["name","message","id","message","rows","5","placeholder","Nh\u1eadp n\u1ed9i dung tin nh\u1eafn nh\u1eafc nh\u1edf",1,"w-100",3,"ngModel","ngModelChange"],[1,"modal-footer"],[1,"btn","btn-app","btn-outline-app",3,"click"],[1,"btn","btn-app","text-white",3,"click"]],template:function(e,t){if(1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Ec(2," G\u1eedi email nh\u1eafc nh\u1edf "),r.Vb(),r.Wb(3,"div",2),r.ec("click",(function(){return t.dismissModal()})),r.Wb(4,"span",3),r.Ec(5,"\xd7"),r.Vb(),r.Vb(),r.Vb(),r.Wb(6,"div",4),r.Wb(7,"div",5),r.Wb(8,"h3",6),r.Ec(9,"Th\xf4ng tin \u0111\u1ed9c gi\u1ea3:"),r.Vb(),r.Wb(10,"div",7),r.Wb(11,"div",8),r.Wb(12,"div",9),r.Ec(13,"H\u1ecd t\xean: "),r.Vb(),r.Wb(14,"div",10),r.Ec(15),r.jc(16,"async"),r.jc(17,"async"),r.Vb(),r.Vb(),r.Wb(18,"div",8),r.Wb(19,"div",9),r.Ec(20,"Email: "),r.Vb(),r.Wb(21,"div",10),r.Ec(22),r.jc(23,"async"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(24,"div",11),r.Wb(25,"h3",6),r.Ec(26,"N\u1ed9i dung tin nh\u1eafn:"),r.Vb(),r.Wb(27,"div",7),r.Wb(28,"div",8),r.Wb(29,"div",12),r.Wb(30,"textarea",13),r.ec("ngModelChange",(function(e){return t.message=e})),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(31,"div",14),r.Wb(32,"button",15),r.ec("click",(function(){return t.dismissModal()})),r.Ec(33,"\u0110\xf3ng"),r.Vb(),r.Wb(34,"button",16),r.ec("click",(function(){return t.sendEmail()})),r.Ec(35," G\u1eedi "),r.Vb(),r.Vb()),2&e){var n,o=null;r.Db(15),r.Hc("",null==(o=r.kc(16,4,t.detail_borrow_ticket$))||null==o.customer?null:o.customer.last_name," ",null==(o=r.kc(17,6,t.detail_borrow_ticket$))||null==o.customer?null:o.customer.first_name,""),r.Db(7),r.Fc(null==(n=r.kc(23,8,t.detail_borrow_ticket$))||null==n.customer?null:n.customer.email),r.Db(8),r.oc("ngModel",t.message)}},directives:[D.c,D.m,D.p],pipes:[c.b],styles:[""]}),e})();var P=n("rUP6");function T(e,t){if(1&e){const e=r.Xb();r.Wb(0,"div",30),r.ec("click",(function(){return r.vc(e),r.ic().openSendEmailModal()})),r.Wb(1,"span",31),r.Ec(2,"G\u1eedi th\u01b0 li\xean h\u1ec7"),r.Vb(),r.Vb()}}function S(e,t){if(1&e){const e=r.Xb();r.Wb(0,"div",32),r.ec("click",(function(){return r.vc(e),r.ic().OnFinishBorrowTicket()})),r.Wb(1,"span",31),r.Ec(2,"Ho\xe0n th\xe0nh"),r.Vb(),r.Vb()}}function F(e,t){if(1&e&&(r.Wb(0,"div",33),r.Wb(1,"div",34),r.Wb(2,"div",35),r.Ec(3),r.Vb(),r.Wb(4,"div",36),r.Ec(5),r.jc(6,"standardizedId"),r.Vb(),r.Wb(7,"div",37),r.Ec(8),r.Vb(),r.Wb(9,"div",37),r.Ec(10),r.Vb(),r.Wb(11,"div",37),r.Ec(12),r.Vb(),r.Vb(),r.Vb()),2&e){const e=t.$implicit,n=t.index;r.Eb("data-index",n),r.Db(3),r.Fc(n+1),r.Db(2),r.Fc(r.kc(6,6,null==e.book?null:e.book.book_id)||"-"),r.Db(3),r.Fc((null==e.book?null:e.book.book_name)||"-"),r.Db(2),r.Fc((null==e.book||null==e.book.author?null:e.book.author.author_name)||"-"),r.Db(2),r.Fc((null==e.book||null==e.book.supplier?null:e.book.supplier.contact_name)||"-")}}let Q=(()=>{class e{constructor(e,t,n,o,i,c,r,a){this.borrowTicketQuery=e,this.borrowTicketService=t,this.router=n,this.fb=o,this.ref=i,this.route=c,this.modalController=r,this.borrowTicketStore=a,this.filter={page:1,per_page:1e3},this.borrow_status="Ho\xe0n th\xe0nh",this.isEditing=!1,this.detail_borrow_ticket$=this.borrowTicketQuery.detail_borrow_ticket$,this.isSendEmail=!1,this.updateBorrowTicketForm=this.fb.group({borrow_ticket_id:[""],borrow_ticket_name:[""],author:[""],supplier:[""],category:[""],page_number:[""],cost_price:[""],retail_price:[""],discount:[""],old_amount:[""],new_amount:[""],description:[""],note:[""]})}ngOnInit(){return Object(u.a)(this,void 0,void 0,(function*(){yield this.SetupData()}))}ngOnChanges(){return Object(u.a)(this,void 0,void 0,(function*(){}))}SetupData(){return Object(u.a)(this,void 0,void 0,(function*(){const e={borrow_ticket_id:parseInt(this.route.snapshot.params.id)},t=yield this.borrowTicketService.searchBorrowTickets(e);this.borrowTicketService.setDetailBorrowTicket(t.borrow_tickets[0]);const n=(new Date).getTime(),o=new Date(this.borrowTicketQuery.getValue().detail_borrow_ticket.return_date).getTime(),i=new Date(this.borrowTicketQuery.getValue().detail_borrow_ticket.appointment_date).getTime();!o&&n<=i&&(this.borrow_status="\u0110ang m\u01b0\u1ee3n"),o&&o<=i&&(this.borrow_status="Ho\xe0n th\xe0nh"),!o&&n>i&&(this.borrow_status="\u0110ang tr\u1ec5"),o&&o>i&&(this.borrow_status="Tr\u1ea3 tr\u1ec5")}))}onClickUpdateBtn(){return Object(u.a)(this,void 0,void 0,(function*(){if(this.isEditing){let e=this.updateBorrowTicketForm.value;yield this.borrowTicketService.UpdateBorrowTicket(e)}else this.toggleEdit(),this.setupDataForm()}))}goBack(){this.isEditing?this.toggleEdit():this.router.navigateByUrl("admin/borrow-ticket-management/borrow-ticket-list")}toggleEdit(){this.isEditing=!this.isEditing}onOpenDeleteModal(){const e=this.modalController.create({component:m,componentProps:{borrow_ticket:this.borrowTicketQuery.getValue().detail_borrow_ticket}});e.show().then(),e.onDismiss().then(e=>{if(e)try{this.borrowTicketService.DeleteBorrowTicketById(e.borrow_ticket_id),this.router.navigateByUrl("admin/borrow-ticket-management/borrow-ticket-list"),toastr.success("B\u1ea1n \u0111\xe3 h\u1ee7y phi\u1ebfu m\u01b0\u1ee3n s\xe1ch th\xe0nh c\xf4ng")}catch(t){toastr.error("B\u1ea1n \u0111\xe3 h\u1ee7y phi\u1ebfu m\u01b0\u1ee3n s\xe1ch kh\xf4ng th\xe0nh th\xf4ng",t.msg||t.message)}})}setupDataForm(){let e=this.borrowTicketQuery.getValue().detail_borrow_ticket;this.updateBorrowTicketForm.patchValue({borrow_ticket_id:null==e?void 0:e.borrow_ticket_id,borrow_ticket_name:null==e?void 0:e.borrow_ticket_name,author:null==e?void 0:e.author,supplier:null==e?void 0:e.supplier,category:null==e?void 0:e.category,page_number:null==e?void 0:e.page_number,cost_price:null==e?void 0:e.cost_price,retail_price:null==e?void 0:e.retail_price,discount:null==e?void 0:e.discount,description:null==e?void 0:e.description,old_amount:null==e?void 0:e.old_amount,new_amount:null==e?void 0:e.new_amount,note:null==e?void 0:e.note})}UpdateBorrowTicket(){return Object(u.a)(this,void 0,void 0,(function*(){let e=this.updateBorrowTicketForm.value,t=Object.assign(Object.assign({},e),{category_id:e.category.category_id,supplier_id:e.supplier.supplier_id,author_id:e.author.author_id});try{let e=yield this.borrowTicketService.UpdateBorrowTicket(t);this.borrowTicketStore.update({detail_borrow_ticket:e}),toastr.success("C\u1eadp nh\u1eadt s\xe1ch th\xe0nh c\xf4ng."),this.router.navigateByUrl("admin/borrow-ticket-management/borrow-ticket-list")}catch(n){toastr.error("C\u1eadp nh\u1eadt s\xe1ch th\u1ea5t b\u1ea1i.",n.msg||n.message)}}))}OnFinishBorrowTicket(){return Object(u.a)(this,void 0,void 0,(function*(){try{const e=this.modalController.create({component:f,componentProps:{borrow_ticket_id:this.borrowTicketQuery.getValue().detail_borrow_ticket.borrow_ticket_id}});e.show().then(),e.onDismiss().then(e=>Object(u.a)(this,void 0,void 0,(function*(){if(e)try{yield this.borrowTicketService.FinishBorrowTicket(e),this.router.navigateByUrl("admin/borrow-ticket-management/borrow-ticket-list"),toastr.success("Ho\xe0n th\xe0nh phi\u1ebfu m\u01b0\u1ee3n s\xe1ch th\xe0nh c\xf4ng")}catch(t){toastr.error("B\u1ea1n \u0111\xe3 h\u1ee7y phi\u1ebfu m\u01b0\u1ee3n s\xe1ch kh\xf4ng th\xe0nh th\xf4ng",t.msg||t.message)}})))}catch(e){toastr.error("Ho\xe0n th\xe0nh phi\u1ebfu m\u01b0\u1ee3n s\xe1ch kh\xf4ng th\xe0nh c\xf4ng",e.msg||e.message)}}))}get author(){return this.borrowTicketQuery.getValue().detail_borrow_ticket.author}openSendEmailModal(){return Object(u.a)(this,void 0,void 0,(function*(){const e=this.modalController.create({component:j,cssClass:"modal-lg",componentProps:{}});e.show().then(),e.onDismiss().then(e=>Object(u.a)(this,void 0,void 0,(function*(){if(e)try{const t={customer_email:this.borrowTicketQuery.getValue().detail_borrow_ticket.customer.email,message:e};yield this.borrowTicketService.SendEmailForLateBorrowTicket(t),this.isSendEmail=!0,toastr.success("B\u1ea1n \u0111\xe3 g\u1eedi email nh\u1eafc nh\u1edf th\xe0nh c\xf4ng")}catch(t){toastr.error("B\u1ea1n \u0111\xe3 g\u1eedi email nh\u1eafc nh\u1edf kh\xf4ng th\xe0nh c\xf4ng",t.msg||t.message)}})))}))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(W),r.Qb(M),r.Qb(o.g),r.Qb(D.d),r.Qb(r.h),r.Qb(o.a),r.Qb(P.a),r.Qb(V))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-borrow-ticket-detail"]],features:[r.Bb],decls:115,vars:69,consts:[[1,"d-flex","justify-content-center","align-items-center","text-app","font-weight-bold"],[1,"font-weight-bold"],[1,"d-flex","flex-row","p-5","mb-4"],[1,"avatar","col-3","mb-4"],[1,"d-flex","flex-column","flex-app"],["alt","Avatar",2,"height","30rem","width","20rem","object-fit","cover",3,"src"],[1,"text-app","text-left","font-weight-bold","text-center","my-4"],[1,"col-9","d-flex","flex-column"],[1,"d-flex","flex-column"],[1,"row","py-3"],[1,"col-2","text-center","font-weight-bold"],[1,"col-9","text-app","font-weight-bold"],[1,"col-9"],[1,"col-9","font-weight-bold"],[1,"col-2","app-flex"],[1,"btn","btn-outline-app",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-left","pr-1"],[1,"col-9","d-flex","flex-row","justify-content-end"],[1,"btn-danger","align-self-center","mr-2",3,"click"],[1,"fas","fa-trash-alt","trash-icon"],[1,"ml-1",2,"width","70px"],["class","btn-app  align-self-center mr-2",3,"click",4,"ngIf"],["class","btn-success  align-self-center mr-2",3,"click",4,"ngIf"],[1,"container-fluid"],[1,"font-weight-bold","text-center","text-app","mb-2","mt-4"],[1,"table-header","row","font-weight-bold","text-uppercase","ng-star-inserted","align-items-center","my-5"],[1,"col","text-center","text-app",2,"max-width","200px"],[1,"col","text-center","text-app"],["class","item-row pl-0",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end","mr-5"],[1,"btn-app","align-self-center","mr-2",3,"click"],[1,"ml-1"],[1,"btn-success","align-self-center","mr-2",3,"click"],[1,"item-row","pl-0"],[1,"row"],[1,"col","text-center",2,"max-width","200px"],[1,"col","text-center","text-app","font-weight-bold",2,"max-width","200px"],[1,"col","text-center"]],template:function(e,t){if(1&e&&(r.Ub(0),r.Wb(1,"div",0),r.Wb(2,"h1",1),r.Ec(3,"Th\xf4ng tin chi ti\u1ebft phi\u1ebfu m\u01b0\u1ee3n "),r.Wb(4,"span"),r.Ec(5),r.jc(6,"async"),r.Vb(),r.Vb(),r.Vb(),r.Ub(7),r.Wb(8,"div",2),r.Wb(9,"div",3),r.Wb(10,"div",4),r.Rb(11,"img",5),r.jc(12,"async"),r.Wb(13,"h1",6),r.Ec(14),r.jc(15,"standardizedId"),r.jc(16,"async"),r.Vb(),r.Vb(),r.Vb(),r.Wb(17,"div",7),r.Wb(18,"div",8),r.Wb(19,"div",9),r.Wb(20,"div",10),r.Wb(21,"b"),r.Ec(22,"M\xe3 phi\u1ebfu m\u01b0\u1ee3n: "),r.Vb(),r.Vb(),r.Wb(23,"div",11),r.Ec(24),r.jc(25,"standardizedId"),r.jc(26,"async"),r.Vb(),r.Vb(),r.Wb(27,"div",9),r.Wb(28,"div",10),r.Wb(29,"b"),r.Ec(30,"Kh\xe1ch h\xe0ng: "),r.Vb(),r.Vb(),r.Wb(31,"div",11),r.Ec(32),r.jc(33,"standardizedId"),r.jc(34,"async"),r.jc(35,"async"),r.jc(36,"async"),r.Vb(),r.Vb(),r.Wb(37,"div",9),r.Wb(38,"div",10),r.Wb(39,"b"),r.Ec(40,"Nh\xe2n vi\xean: "),r.Vb(),r.Vb(),r.Wb(41,"div",11),r.Ec(42),r.jc(43,"standardizedId"),r.jc(44,"async"),r.jc(45,"async"),r.jc(46,"async"),r.Vb(),r.Vb(),r.Wb(47,"div",9),r.Wb(48,"div",10),r.Wb(49,"b"),r.Ec(50,"Ng\xe0y m\u01b0\u1ee3n: "),r.Vb(),r.Vb(),r.Wb(51,"div",12),r.Ec(52),r.jc(53,"date"),r.jc(54,"async"),r.Vb(),r.Vb(),r.Wb(55,"div",9),r.Wb(56,"div",10),r.Wb(57,"b"),r.Ec(58,"Ng\xe0y h\u1eb9n tr\u1ea3: "),r.Vb(),r.Vb(),r.Wb(59,"div",12),r.Ec(60),r.jc(61,"date"),r.jc(62,"async"),r.Vb(),r.Vb(),r.Wb(63,"div",9),r.Wb(64,"div",10),r.Wb(65,"b"),r.Ec(66,"Ng\xe0y tr\u1ea3: "),r.Vb(),r.Vb(),r.Wb(67,"div",12),r.Ec(68),r.jc(69,"date"),r.jc(70,"async"),r.Vb(),r.Vb(),r.Wb(71,"div",9),r.Wb(72,"div",10),r.Wb(73,"b"),r.Ec(74,"Tr\u1ea1ng th\xe1i: "),r.Vb(),r.Vb(),r.Wb(75,"div",13),r.Ec(76),r.Vb(),r.Vb(),r.Wb(77,"div",9),r.Wb(78,"div",10),r.Wb(79,"b"),r.Ec(80,"Ghi ch\xfa: "),r.Vb(),r.Vb(),r.Wb(81,"div",12),r.Ec(82),r.jc(83,"async"),r.Vb(),r.Vb(),r.Vb(),r.Wb(84,"div",8),r.Wb(85,"div",9),r.Wb(86,"div",14),r.Wb(87,"div",15),r.ec("click",(function(){return t.goBack()})),r.Rb(88,"i",16),r.Ec(89," Quay l\u1ea1i"),r.Vb(),r.Vb(),r.Ub(90),r.Wb(91,"div",17),r.Wb(92,"div",18),r.ec("click",(function(){return t.onOpenDeleteModal()})),r.Rb(93,"i",19),r.Wb(94,"span",20),r.Ec(95,"H\u1ee7y b\u1ecf"),r.Vb(),r.Vb(),r.Cc(96,T,3,0,"div",21),r.Cc(97,S,3,0,"div",22),r.Vb(),r.Tb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Tb(),r.Ub(98,23),r.Wb(99,"h1",24),r.Ec(100,"Danh s\xe1ch s\xe1ch m\u01b0\u1ee3n"),r.Vb(),r.Wb(101,"div",25),r.Wb(102,"div",26),r.Ec(103,"STT"),r.Vb(),r.Wb(104,"div",26),r.Ec(105,"M\xe3 s\xe1ch"),r.Vb(),r.Wb(106,"div",27),r.Ec(107,"T\xean s\xe1ch"),r.Vb(),r.Wb(108,"div",27),r.Ec(109,"T\xe1c gi\u1ea3"),r.Vb(),r.Wb(110,"div",27),r.Ec(111,"Nh\xe0 cung c\u1ea5p"),r.Vb(),r.Vb(),r.Cc(112,F,13,8,"div",28),r.jc(113,"async"),r.Rb(114,"div",29),r.Tb(),r.Tb()),2&e){var n,o;const e=(null==(o=r.kc(12,24,t.detail_borrow_ticket$))||null==o.customer?null:o.customer.image)||"assets/images/default-avatar.png";var i,c,a,l,b,s,d,u=null,p=null;const h=null==(d=r.kc(113,67,t.detail_borrow_ticket$))?null:d.borrow_ticket_details;r.Db(5),r.Fc(null==(n=r.kc(6,22,t.detail_borrow_ticket$))?null:n.borrow_ticket_name),r.Db(6),r.oc("src",e,r.xc),r.Db(3),r.Gc("M\xe3 phi\u1ebfu m\u01b0\u1ee3n: ",r.kc(15,26,null==(i=r.kc(16,28,t.detail_borrow_ticket$))?null:i.borrow_ticket_id),""),r.Db(10),r.Fc(r.kc(25,30,null==(c=r.kc(26,32,t.detail_borrow_ticket$))?null:c.borrow_ticket_id)||"-"),r.Db(8),r.Fc(r.kc(33,34,null==(u=r.kc(34,36,t.detail_borrow_ticket$))||null==u.customer?null:u.customer.customer_id)+" - "+(null==(u=r.kc(35,38,t.detail_borrow_ticket$))||null==u.customer?null:u.customer.last_name)+" "+(null==(u=r.kc(36,40,t.detail_borrow_ticket$))||null==u.customer?null:u.customer.first_name)||"-"),r.Db(10),r.Fc(r.kc(43,42,null==(p=r.kc(44,44,t.detail_borrow_ticket$))||null==p.employee?null:p.employee.employee_id)+" - "+(null==(p=r.kc(45,46,t.detail_borrow_ticket$))||null==p.employee?null:p.employee.last_name)+" "+(null==(p=r.kc(46,48,t.detail_borrow_ticket$))||null==p.employee?null:p.employee.first_name)||"-"),r.Db(10),r.Fc(r.lc(53,50,null==(a=r.kc(54,53,t.detail_borrow_ticket$))?null:a.borrow_date,"dd/MM/yyyy")||"-"),r.Db(8),r.Fc(r.lc(61,55,null==(l=r.kc(62,58,t.detail_borrow_ticket$))?null:l.appointment_date,"dd/MM/yyyy")||"-"),r.Db(8),r.Fc(r.lc(69,60,null==(b=r.kc(70,63,t.detail_borrow_ticket$))?null:b.return_date,"dd/MM/yyyy")||"-"),r.Db(7),r.Gb("text-success","Ho\xe0n th\xe0nh"==t.borrow_status)("text-warning","\u0110ang tr\u1ec5"==t.borrow_status)("text-app","\u0110ang m\u01b0\u1ee3n"==t.borrow_status)("text-danger","Tr\u1ea3 tr\u1ec5"==t.borrow_status),r.Db(1),r.Gc("",t.borrow_status||"-"," "),r.Db(6),r.Fc((null==(s=r.kc(83,65,t.detail_borrow_ticket$))?null:s.note)||"-"),r.Db(14),r.oc("ngIf",!t.isSendEmail),r.Db(1),r.oc("ngIf","\u0110ang tr\u1ec5"==t.borrow_status||"\u0110ang m\u01b0\u1ee3n"==t.borrow_status),r.Db(15),r.oc("ngForOf",h)}},directives:[c.m,c.l],pipes:[c.b,g.b,c.e],styles:[".item-row[_ngcontent-%COMP%]{display:flex;transition:.5s;padding-left:36px;height:100px;align-self:center!important;flex-direction:column;justify-content:center;box-shadow:3px 3px 8px 3px rgba(122,159,216,.2);margin-bottom:20px}.item-row[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{position:relative;display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;overflow:hidden;line-height:22px}"]}),e})();const N=["item"],R=["emptyItem"],$=["header"];function I(e,t){1&e&&r.Sb(0)}let B=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["app-item-table"]],contentQueries:function(e,t,n){var o;1&e&&(r.zc(n,N,!0),r.zc(n,R,!0),r.zc(n,$,!0)),2&e&&(r.sc(o=r.fc())&&(t.itemTemplate=o.first),r.sc(o=r.fc())&&(t.emptyItemTemplate=o.first),r.sc(o=r.fc())&&(t.headerTemplate=o.first))},decls:2,vars:1,consts:[[4,"ngTemplateOutlet"]],template:function(e,t){1&e&&(r.Ub(0),r.Cc(1,I,1,0,"ng-container",0),r.Tb()),2&e&&(r.Db(1),r.oc("ngTemplateOutlet",t.itemTemplate))},directives:[c.r],styles:[""]}),e})(),A=(()=>{class e{constructor(e,t,n){this.borrowTicketService=e,this.borrowTicketQuery=t,this.modalController=n,this.borrow_status="Ho\xe0n th\xe0nh"}ngOnInit(){}ngOnChanges(){const e=(new Date).getTime(),t=new Date(this.borrow_ticket_item.return_date).getTime(),n=new Date(this.borrow_ticket_item.appointment_date).getTime();!t&&e<=n&&(this.borrow_status="\u0110ang m\u01b0\u1ee3n"),t&&t<=n&&(this.borrow_status="Ho\xe0n th\xe0nh"),!t&&e>n&&(this.borrow_status="\u0110ang tr\u1ec5"),t&&t>n&&(this.borrow_status="Tr\u1ea3 tr\u1ec5")}FinishBorrowTicket(){return Object(u.a)(this,void 0,void 0,(function*(){const e=this.modalController.create({component:f,componentProps:{borrow_ticket_id:this.borrow_ticket_item.borrow_ticket_id}});e.show().then(),e.onDismiss().then(e=>Object(u.a)(this,void 0,void 0,(function*(){if(e)try{yield this.borrowTicketService.FinishBorrowTicket(this.borrow_ticket_item.borrow_ticket_id),yield this.borrowTicketService.getBorrowTickets(this.borrowTicketQuery.getValue().filter_page),toastr.success("Ho\xe0n th\xe0nh phi\u1ebfu m\u01b0\u1ee3n s\xe1ch th\xe0nh c\xf4ng")}catch(t){toastr.error("Ho\xe0n th\xe0nh phi\u1ebfu m\u01b0\u1ee3n s\xe1chkh\xf4ng th\xe0nh th\xf4ng",t.msg||t.message)}})))}))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(M),r.Qb(W),r.Qb(P.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-borrow-ticket-row"]],inputs:{borrow_ticket_item:"borrow_ticket_item",index:"index"},features:[r.Bb],decls:25,vars:29,consts:[[1,"item-row","py-2"],[1,"row","d-flex","flex-row"],[1,"col","font-weight-bold","text-app","app-flex","flex-column","text-center",2,"max-width","200px"],[1,"fas","fa-external-link-alt","external-link-icon"],[1,"col","app-flex","flex-column","text-center",2,"max-width","200px"],[1,"col","app-flex","flex-column","text-center"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"div",2),r.Ec(3),r.jc(4,"standardizedId"),r.Vb(),r.Wb(5,"div",2),r.Wb(6,"div"),r.Ec(7),r.jc(8,"standardizedId"),r.Rb(9,"i",3),r.Vb(),r.Wb(10,"div"),r.Ec(11),r.Vb(),r.Vb(),r.Wb(12,"div",4),r.Ec(13),r.jc(14,"date"),r.Vb(),r.Wb(15,"div",4),r.Ec(16),r.jc(17,"date"),r.Vb(),r.Wb(18,"div",4),r.Ec(19),r.jc(20,"date"),r.Vb(),r.Wb(21,"div",4),r.Ec(22),r.Vb(),r.Wb(23,"div",5),r.Ec(24),r.Vb(),r.Vb(),r.Vb()),2&e&&(r.Db(3),r.Gc(" ",r.kc(4,16,null==t.borrow_ticket_item?null:t.borrow_ticket_item.borrow_ticket_id)||"-"," "),r.Db(4),r.Gc(" ",r.kc(8,18,null==t.borrow_ticket_item||null==t.borrow_ticket_item.customer?null:t.borrow_ticket_item.customer.customer_id)||"-"," "),r.Db(4),r.Gc("",(null==t.borrow_ticket_item||null==t.borrow_ticket_item.customer?null:t.borrow_ticket_item.customer.last_name)+" "+(null==t.borrow_ticket_item||null==t.borrow_ticket_item.customer?null:t.borrow_ticket_item.customer.first_name)||"-"," "),r.Db(2),r.Gc("",r.lc(14,20,null==t.borrow_ticket_item?null:t.borrow_ticket_item.borrow_date,"dd/MM/yyyy")," "),r.Db(3),r.Fc(r.lc(17,23,null==t.borrow_ticket_item?null:t.borrow_ticket_item.appointment_date,"dd/MM/yyyy")||"-"),r.Db(3),r.Fc(r.lc(20,26,null==t.borrow_ticket_item?null:t.borrow_ticket_item.return_date,"dd/MM/yyyy")||"-"),r.Db(2),r.Gb("text-success","Ho\xe0n th\xe0nh"==t.borrow_status)("text-warning","\u0110ang tr\u1ec5"==t.borrow_status)("text-app","\u0110ang m\u01b0\u1ee3n"==t.borrow_status)("text-danger","Tr\u1ea3 tr\u1ec5"==t.borrow_status),r.Db(1),r.Gc("",t.borrow_status||"-"," "),r.Db(2),r.Fc((null==t.borrow_ticket_item?null:t.borrow_ticket_item.note)||"-"))},pipes:[g.b,c.e],styles:[".item-row[_ngcontent-%COMP%]{display:flex;transition:.5s;padding-left:36px;height:100px;cursor:pointer;align-self:center!important;flex-direction:column;justify-content:center;box-shadow:3px 3px 8px 3px rgba(122,159,216,.2);margin-bottom:20px}.item-row[_ngcontent-%COMP%]:hover{background-color:#e4e4e4;border-left:7px solid var(--app-color)}.item-row[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{position:relative;display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;overflow:hidden;line-height:22px}.item-row[_ngcontent-%COMP%]   .trash-icon[_ngcontent-%COMP%]{border-radius:50%;padding:5px;background-color:#f5f5f5}.item-row[_ngcontent-%COMP%]   .trash-can[_ngcontent-%COMP%]{padding:3px 20px 3px 2px;border-radius:30px;margin-bottom:5px;display:flex;width:auto;align-items:center;flex-direction:row;justify-content:center}.item-row[_ngcontent-%COMP%]   .trash-can[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;color:#f5f5f5;margin-left:10px;font-size:.8rem}"]}),e})();function G(e,t){}function U(e,t){1&e&&(r.Wb(0,"p"),r.Ec(1,"Day la the item n\xe0"),r.Vb())}function L(e,t){if(1&e&&(r.Wb(0,"option",17),r.Ec(1),r.Wb(2,"div",18),r.Rb(3,"i",19),r.Vb(),r.Vb()),2&e){const e=t.$implicit;r.oc("ngValue",e.borrow_ticket_status),r.Db(1),r.Gc(" ",null==e?null:e.display_name," ")}}function z(e,t){if(1&e){const e=r.Xb();r.Ub(0),r.Wb(1,"app-borrow-ticket-row",20),r.ec("click",(function(){r.vc(e);const n=t.$implicit;return r.ic(2).onViewBorrowTicketDetail(n.borrow_ticket_id)})),r.Vb(),r.Tb()}if(2&e){const e=t.$implicit,n=t.index;r.Db(1),r.oc("borrow_ticket_item",e)("index",n)}}function X(e,t){if(1&e){const e=r.Xb();r.Wb(0,"div",3),r.Rb(1,"input",4),r.Rb(2,"input",5),r.Wb(3,"select",6),r.Wb(4,"option",7),r.Ec(5,"Ch\u1ecdn tr\u1ea1ng th\xe1i phi\u1ebfu m\u01b0\u1ee3n "),r.Vb(),r.Cc(6,L,4,2,"option",8),r.Vb(),r.Wb(7,"div",9),r.ec("click",(function(){return r.vc(e),r.ic().search()})),r.Ec(8,"T\xecm ki\u1ebfm"),r.Vb(),r.Vb(),r.Wb(9,"div",10),r.Wb(10,"div",11),r.Wb(11,"div",12),r.Wb(12,"div",13),r.Ec(13,"M\xe3 phi\u1ebfu m\u01b0\u1ee3n"),r.Vb(),r.Wb(14,"div",13),r.Ec(15,"M\xe3 \u0111\u1ecdc gi\u1ea3"),r.Vb(),r.Wb(16,"div",13),r.Ec(17,"Ng\xe0y m\u01b0\u1ee3n"),r.Vb(),r.Wb(18,"div",13),r.Ec(19,"Ng\xe0y h\u1eb9n tr\u1ea3"),r.Vb(),r.Wb(20,"div",13),r.Ec(21,"Ng\xe0y tr\u1ea3"),r.Vb(),r.Wb(22,"div",13),r.Ec(23,"Tr\u1ea1ng th\xe1i"),r.Vb(),r.Wb(24,"div",14),r.Ec(25,"Ghi ch\xfa"),r.Vb(),r.Vb(),r.Vb(),r.Cc(26,z,2,2,"ng-container",15),r.jc(27,"async"),r.Wb(28,"app-page-pagination",16),r.ec("navigate",(function(t){return r.vc(e),r.ic().navigate(t)})),r.jc(29,"async"),r.Vb(),r.Vb()}if(2&e){const e=r.ic();var n=null;const t=null==(n=r.kc(27,5,e.borrow_ticket_list$))?null:n.items.slice().reverse();r.oc("formGroup",e.searchForm),r.Db(6),r.oc("ngForOf",e.ticketStatuses),r.Db(20),r.oc("ngForOf",t),r.Db(2),r.oc("paginationOpt",e.current_pagination_opt$)("currentPage",r.kc(29,7,e.current_page$))}}let q=(()=>{class e{constructor(e,t,n,o,i,c){this.router=e,this.borrowTicketService=t,this.borrowTicketQuery=n,this.borrowTicketStore=o,this.ref=i,this.fb=c,this.borrow_ticket_list$=this.borrowTicketQuery.borrow_ticket_list_view$,this.current_pagination_opt$=this.borrowTicketQuery.current_pagination_opt$,this.current_page$=this.borrowTicketQuery.current_page$,this.currentPaginationOpt=new y.c,this.searchForm=this.fb.group({customer_name:"",customer_phone:"",borrow_ticket_status:""}),this.ticketStatuses=[{display_name:"\u0110ang m\u01b0\u1ee3n",borrow_ticket_status:"B"},{display_name:"Ho\xe0n th\xe0nh",borrow_ticket_status:"F"},{display_name:"\u0110ang tr\u1ec5",borrow_ticket_status:"L"},{display_name:"Tr\u1ea3 tr\u1ec5",borrow_ticket_status:"LF"}]}ngOnInit(){return Object(u.a)(this,void 0,void 0,(function*(){yield this.onRequestNewPage()}))}onRequestNewPage(){return Object(u.a)(this,void 0,void 0,(function*(){yield this.borrowTicketService.getBorrowTickets(this.borrowTicketQuery.getValue().filter_page).then(()=>{this.borrowTicketService.setupPagination()})}))}navigate(e){return Object(u.a)(this,void 0,void 0,(function*(){this.borrowTicketService.navigate(e),yield this.onRequestNewPage()}))}onViewBorrowTicketDetail(e){this.router.navigateByUrl("/admin/borrow-ticket-management/borrow-ticket-detail/"+e)}search(){return Object(u.a)(this,void 0,void 0,(function*(){let{customer_name:e,borrow_ticket_status:t,customer_phone:n}=this.searchForm.value;if(!e&&!t&&!n)return yield this.onRequestNewPage();const o={customer_name:e||null,borrow_ticket_status:t||null,customer_phone:n||null};let i=yield this.borrowTicketService.searchBorrowTickets(o);this.borrowTicketStore.update({borrow_ticket_list_view:{items:i.borrow_tickets,has_next:!1,has_prev:!1,current_page:1}})}))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(o.g),r.Qb(M),r.Qb(W),r.Qb(V),r.Qb(r.h),r.Qb(D.d))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-borrow-ticket-list"]],decls:7,vars:0,consts:[["header",""],["emptyItem",""],["item",""],[1,"search-form","row","app-flex","mb-3",3,"formGroup"],["type","text","placeholder","Nh\u1eadp t\xean kh\xe1ch h\xe0ng","formControlName","customer_name",1,"form-control","rounded-pill","col-2","p-4","mr-3"],["type","text","placeholder","Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xe1ch h\xe0ng","formControlName","customer_phone",1,"form-control","rounded-pill","col-2","p-4","mr-3"],["name","role","formControlName","borrow_ticket_status",1,"form-control","col-2","p-2","rounded-pill","mr-3"],["value","","selected",""],["class","font-weight-bold",3,"ngValue",4,"ngFor","ngForOf"],[1,"btn-app","rounded-pill","col-1",3,"click"],[1,"d-flex","flex-column","h-100"],[1,"table","mt-3"],[1,"table-header","row","font-weight-bold","text-uppercase","ng-star-inserted","align-items-center","my-3"],[1,"col","text-app","text-center",2,"max-width","200px"],[1,"col","text-app","text-center"],[4,"ngFor","ngForOf"],[1,"mt-auto",3,"paginationOpt","currentPage","navigate"],[1,"font-weight-bold",3,"ngValue"],[1,"px-3","py-2"],[1,"fa","fa-plus"],[3,"borrow_ticket_item","index","click"]],template:function(e,t){1&e&&(r.Wb(0,"app-item-table"),r.Cc(1,G,0,0,"ng-template",null,0,r.Dc),r.Cc(3,U,2,0,"ng-template",null,1,r.Dc),r.Cc(5,X,30,9,"ng-template",null,2,r.Dc),r.Vb())},directives:[B,D.n,D.h,D.c,D.m,D.g,D.u,D.q,D.w,c.l,y.b,A],pipes:[c.b],styles:[".table-header[_ngcontent-%COMP%]{padding-left:36px}"]}),e})();var K=n("v3sr"),H=n("gy/G");function J(e,t){1&e&&r.Rb(0,"i",11)}let Z=(()=>{class e{constructor(e,t,n){this.modalAction=e,this.accountQuery=t,this.accountService=n,this.loading=!1,this.change_password_data={current_password:"",new_password:"",confirm_new_password:""}}ngOnInit(){}validate(){let e=this.change_password_data;if(!(null==e?void 0:e.new_password))throw new Error("Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u m\u1edbi.");if((null==e?void 0:e.new_password)!=(null==e?void 0:e.confirm_new_password))throw new Error("M\u1eadt kh\u1ea9u nh\u1eadp l\u1ea1i kh\xf4ng ch\xednh x\xe1c.")}ChangePassword(){return Object(u.a)(this,void 0,void 0,(function*(){let e=this.change_password_data;try{this.validate()}catch(t){return toastr.error("Thay \u0111\u1ed5i m\u1eadt kh\u1ea9u th\u1ea5t b\u1ea1i",t.msg||t.message)}this.loading=!0;try{let t={account_id:this.account_id,current_password:e.current_password,new_password:e.new_password};yield this.accountService.ChangePassword(t),toastr.success("Thay \u0111\u1ed5i m\u1eadt kh\u1ea9u th\xe0nh c\xf4ng!"),this.modalAction.dismiss(null)}catch(t){toastr.error("Thay \u0111\u1ed5i m\u1eadt kh\u1ea9u kh\xf4ng th\xe0nh c\xf4ng!",t.message||t.msg)}this.loading=!1}))}dismissModal(){this.modalAction.dismiss(null)}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(p.a),r.Qb(K.a),r.Qb(H.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-change-password-modal"]],inputs:{account_id:"account_id"},decls:16,vars:4,consts:[[1,"modal-header"],[1,"font-weight-bold"],[1,"modal-body"],[1,"row","py-3"],[1,"col-12"],["type","password","placeholder","M\u1eadt kh\u1ea9u m\u1edbi",1,"form-control",3,"ngModel","ngModelChange"],["type","password","placeholder","X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u m\u1edbi",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn-outline-app","btn-default",3,"click"],["type","submit",1,"btn-app",3,"disabled","click"],["class","fa fa-circle-o-notch fa-spin","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"fa","fa-circle-o-notch","fa-spin"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"h4",1),r.Ec(2,"Thay \u0111\u1ed5i m\u1eadt kh\u1ea9u"),r.Vb(),r.Vb(),r.Wb(3,"div",2),r.Wb(4,"div",3),r.Wb(5,"div",4),r.Wb(6,"input",5),r.ec("ngModelChange",(function(e){return t.change_password_data.new_password=e})),r.Vb(),r.Vb(),r.Vb(),r.Wb(7,"div",3),r.Wb(8,"div",4),r.Wb(9,"input",6),r.ec("ngModelChange",(function(e){return t.change_password_data.confirm_new_password=e})),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(10,"div",7),r.Wb(11,"button",8),r.ec("click",(function(){return t.dismissModal()})),r.Ec(12,"H\u1ee7y"),r.Vb(),r.Wb(13,"button",9),r.ec("click",(function(){return t.ChangePassword()})),r.Cc(14,J,1,0,"i",10),r.Ec(15," \u0110\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u"),r.Vb(),r.Vb()),2&e&&(r.Db(6),r.oc("ngModel",t.change_password_data.new_password),r.Db(3),r.oc("ngModel",t.change_password_data.confirm_new_password),r.Db(4),r.oc("disabled",t.loading),r.Db(1),r.oc("ngIf",t.loading))},directives:[D.c,D.m,D.p,c.m],styles:[""]}),e})(),Y=(()=>{class e{constructor(e,t){this.accountQuery=e,this.modalController=t}ngOnInit(){this.user_info=this.accountQuery.getValue().auth_info.user_info}OpenChangePasswordModal(){this.modalController.create({component:Z,cssClass:"modal-lg",componentProps:{account_id:this.user_info.account.account_id}}).show().then()}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(K.a),r.Qb(P.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-account-info"]],decls:37,vars:4,consts:[[1,"box","setting-box","mt-0"],[1,"setting-header"],[1,"setting-body"],[1,"row","py-3"],[1,"col-2","app-flex"],[1,"col-10"],["type","text","disabled","","placeholder","Nh\u1eadp t\xean t\xe0i kho\u1ea3n",1,"form-control","read-only","text-app","font-weight-bold",3,"ngModel","ngModelChange"],["type","text","disabled","","placeholder","Nh\u1eadp t\xean t\xe0i kho\u1ea3n",1,"form-control","read-only",3,"ngModel","ngModelChange"],["type","text","disabled","","placeholder","Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i",1,"form-control","read-only","position-relative",3,"ngModel","ngModelChange"],[1,"position-absolute","h-100","change-btn","d-flex","align-items-center"],[1,"fa","fa-pencil"],["type","text","disabled","","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9 email",1,"form-control","read-only","position-relative",3,"ngModel","ngModelChange"],[1,"setting-footer"],[1,"btn-outline-app","ml-auto",3,"click"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Ec(2,"Th\xf4ng tin t\xe0i kho\u1ea3n "),r.Vb(),r.Wb(3,"div",2),r.Wb(4,"div",3),r.Wb(5,"div",4),r.Wb(6,"b"),r.Ec(7,"M\xe3 t\xe0i kho\u1ea3n: "),r.Vb(),r.Vb(),r.Wb(8,"div",5),r.Wb(9,"input",6),r.ec("ngModelChange",(function(e){return t.user_info.account.account_id=e})),r.Vb(),r.Vb(),r.Vb(),r.Wb(10,"div",3),r.Wb(11,"div",4),r.Wb(12,"b"),r.Ec(13,"T\xean t\xe0i kho\u1ea3n: "),r.Vb(),r.Vb(),r.Wb(14,"div",5),r.Wb(15,"input",7),r.ec("ngModelChange",(function(e){return t.user_info.account.account_name=e})),r.Vb(),r.Vb(),r.Vb(),r.Wb(16,"div",3),r.Wb(17,"div",4),r.Wb(18,"b"),r.Ec(19,"Email: "),r.Vb(),r.Vb(),r.Wb(20,"div",5),r.Wb(21,"input",8),r.ec("ngModelChange",(function(e){return t.user_info.email=e})),r.Vb(),r.Wb(22,"div",9),r.Rb(23,"i",10),r.Ec(24,"Thay \u0111\u1ed5i"),r.Vb(),r.Vb(),r.Vb(),r.Wb(25,"div",3),r.Wb(26,"div",4),r.Wb(27,"b"),r.Ec(28,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i: "),r.Vb(),r.Vb(),r.Wb(29,"div",5),r.Wb(30,"input",11),r.ec("ngModelChange",(function(e){return t.user_info.phone=e})),r.Vb(),r.Wb(31,"div",9),r.Rb(32,"i",10),r.Ec(33,"Thay \u0111\u1ed5i"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(34,"div",12),r.Wb(35,"div",13),r.ec("click",(function(){return t.OpenChangePasswordModal()})),r.Ec(36," Thay \u0111\u1ed5i m\u1eadt kh\u1ea9u "),r.Vb(),r.Vb(),r.Vb()),2&e&&(r.Db(9),r.oc("ngModel",t.user_info.account.account_id),r.Db(6),r.oc("ngModel",t.user_info.account.account_name),r.Db(6),r.oc("ngModel",t.user_info.email),r.Db(9),r.oc("ngModel",t.user_info.phone))},directives:[D.c,D.m,D.p],styles:[".change-btn[_ngcontent-%COMP%]{right:25px;top:0;font-size:.8rem;color:var(--app-color);cursor:pointer}"]}),e})();var ee=n("coAb");let te=(()=>{class e{constructor(e,t){this.http=e,this.apiAppService=t,this.baseURL=this.apiAppService.baseURL}GetEmployees(e){return Object(u.a)(this,void 0,void 0,(function*(){return yield this.http.post(this.baseURL+"/admin/employee-management/get-employees",e).toPromise()}))}UpdateEmployee(e){return Object(u.a)(this,void 0,void 0,(function*(){return yield this.http.post(this.baseURL+"/admin/employee-management/update-employee",e).toPromise()}))}CreateEmployee(e){return Object(u.a)(this,void 0,void 0,(function*(){return yield this.http.post(this.baseURL+"/admin/employee-management/create-employee",e).toPromise()}))}DeleteEmployee(e){return Object(u.a)(this,void 0,void 0,(function*(){return yield this.http.post(this.baseURL+"/admin/employee-management/delete-employee",e).toPromise()}))}SearchEmployees(e){return Object(u.a)(this,void 0,void 0,(function*(){return yield this.http.post(this.baseURL+"/admin/employee-management/search-employees",e).toPromise()}))}}return e.\u0275fac=function(t){return new(t||e)(r.ac(k.a),r.ac(x.a))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const ne={employee_list_view:null,current_page:1,filter_page:{page:1,per_page:20},current_pagination_opt:{nextDisabled:!1,previousDisabled:!0,hidePerpage:!0},detail_employee:{}};let oe=(()=>{let e=class extends v.a{constructor(){super(ne)}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e=Object(u.b)([Object(v.d)({name:"employee"})],e),e})(),ie=(()=>{class e extends v.b{constructor(e){super(e),this.store=e,this.employee_list_view$=this.select("employee_list_view"),this.detail_employee$=this.select("detail_employee"),this.current_page$=this.select("current_page"),this.current_pagination_opt$=this.select("current_pagination_opt")}}return e.\u0275fac=function(t){return new(t||e)(r.ac(oe))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ce=(()=>{class e{constructor(e,t,n,o,i,c){this.employeeApiService=e,this.employeeStore=t,this.employeeQuery=n,this.categoryApiService=o,this.authorApiService=i,this.supplierApiService=c}GetEmployees(e){return Object(u.a)(this,void 0,void 0,(function*(){let t=yield this.employeeApiService.GetEmployees(e);this.employeeStore.update({employee_list_view:t})}))}setupPagination(){this.employeeStore.update({current_pagination_opt:{hidePerpage:!0,nextDisabled:!this.employeeQuery.getValue().employee_list_view.has_next,previousDisabled:!this.employeeQuery.getValue().employee_list_view.has_prev}})}navigate(e){let t=this.employeeQuery.getValue();switch(e){case y.a.BACKWARD:this.employeeStore.update({current_page:t.current_page-1});break;case y.a.FORWARD:this.employeeStore.update({current_page:t.current_page+1})}this.employeeStore.update({current_page:this.employeeQuery.getValue().current_page<=0?1:this.employeeQuery.getValue().current_page});let n=this.employeeQuery.getValue().current_page<=0?1:this.employeeQuery.getValue().current_page,o=Object.assign(Object.assign({},this.employeeQuery.getValue().filter_page),{page:n});this.employeeStore.update({filter_page:o})}SearchEmployees(e){return Object(u.a)(this,void 0,void 0,(function*(){return yield this.employeeApiService.SearchEmployees(e)}))}SetDetailEmployee(e){this.employeeStore.update({detail_employee:e})}DeleteEmployeeById(e){return Object(u.a)(this,void 0,void 0,(function*(){return yield this.employeeApiService.DeleteEmployee({employee_id:e})}))}UpdateEmployee(e){return Object(u.a)(this,void 0,void 0,(function*(){return yield this.employeeApiService.UpdateEmployee(e)}))}CreateEmployee(e){return Object(u.a)(this,void 0,void 0,(function*(){return yield this.employeeApiService.CreateEmployee(e)}))}}return e.\u0275fac=function(t){return new(t||e)(r.ac(te),r.ac(oe),r.ac(ie),r.ac(C.a),r.ac(E.a),r.ac(O.a))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var re=n("qG8I"),ae=n("tk/3");let le=(()=>{class e{constructor(e,t,n,o,i,c,r,a){this.modalAction=e,this.fb=t,this.accountQuery=n,this.datePipe=o,this.customerService=i,this.employeeService=c,this.accountStore=r,this.http=a,this.update_form=this.fb.group({image:"",last_name:"",first_name:"",birth_day:"",gender:"",address:"",note:""})}ngOnInit(){this.accountQuery.auth_info$.subscribe(e=>{const t=e.user_info;this.update_form.patchValue({last_name:t.last_name,first_name:t.first_name,birth_day:this.datePipe.transform(null==t?void 0:t.birth_day,"yyyy-MM-dd"),gender:t.gender,address:t.address,note:t.note,image:t.image})})}dismissModal(){this.modalAction.dismiss(null)}UpdateUser(){return Object(u.a)(this,void 0,void 0,(function*(){try{const e=this.update_form.value,t=this.accountQuery.getValue().auth_info.user_info;let n={};if(1==t.account.role.role_id||2==t.account.role.role_id){const o={account_id:t.account.account_id,employee_id:t.employee_id,last_name:e.last_name,first_name:e.first_name,birth_date:e.birth_day,gender:e.gender,address:e.address,note:e.note,image:e.image};n=yield this.employeeService.UpdateEmployee(o);let i=Object.assign(Object.assign({},this.accountQuery.getValue().auth_info),{user_info:n});this.accountStore.update({auth_info:i}),localStorage.setItem("auth_info",JSON.stringify(this.accountQuery.getValue().auth_info))}if(3==t.account.role.role_id){const n={account_id:t.account.account_id,customer_id:t.customer_id,last_name:e.last_name,first_name:e.first_name,birth_date:e.birth_day,gender:e.gender,address:e.address,note:e.note,image:e.image};yield this.customerService.UpdateCustomer(n)}toastr.success("C\u1eadp nh\u1eadt th\xf4ng tin c\xe1 nh\xe2n th\xe0nh c\xf4ng"),this.modalAction.dismiss(null)}catch(e){toastr.error("C\u1eadp nh\u1eadt th\xf4ng tin c\xe1 nh\xe2n kh\xf4ng th\xe0nh c\xf4ng",e.msg||e.message)}}))}onChangeLogo(e){return Object(u.a)(this,void 0,void 0,(function*(){try{let t=new FormData;t.append("image",e.target.files[0],e.target.files[0].name);let n=yield this.http.post("http://localhost:5000/admin/book-management/upload-book-image",t).toPromise();this.update_form.patchValue({image:n.image})}catch(t){toastr.error("C\u1eadp nh\u1eadt \u1ea3nh th\u1ea5t b\u1ea1i!",t.msg||t.message)}}))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(p.a),r.Qb(D.d),r.Qb(K.a),r.Qb(c.e),r.Qb(ee.a),r.Qb(ce),r.Qb(re.a),r.Qb(ae.b))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-update-user-modal"]],features:[r.Cb([c.e])],decls:71,vars:3,consts:[[1,"modal-header"],[1,"modal-title","big-font"],[1,"close",3,"click"],[1,"text-large"],[1,"modal-body"],[1,"d-flex","flex-row",3,"formGroup"],[1,"col-12","d-flex","flex-column"],[1,"d-flex","flex-column"],[1,"row","py-3"],[1,"col-2","app-flex"],[1,"col-9","text-center"],[1,"logo-upload","m-0","border","rounded"],[1,"mask","pt-2"],[1,"fas","fa-cloud-upload-alt","text-white"],[1,"over-logo","rounded","m-0","p-0"],["aria-hidden","true",1,"fa","fa-camera"],[1,"upload-loading","m-0","p-0"],["aria-hidden","true",1,"fa","fa-circle-o-notch","fa-spin"],["accept","image/png,image/jpg,image/jpeg,image/gif","name","file","type","file",1,"d-none",3,"change"],[1,"col-9"],["type","text","placeholder","Nh\u1eadp h\u1ecd","formControlName","last_name",1,"form-control"],["type","text","placeholder","Nh\u1eadp t\xean","formControlName","first_name",1,"form-control"],["type","date","placeholder","Nh\u1eadp v\xe0o ng\xe0y sinh","formControlName","birth_day",1,"form-control"],["placeholder","Ch\u1ecdn gi\u1edbi t\xednh","formControlName","gender",1,"form-control"],["value","","selected","","autofocus","","disabled",""],["value","true",2,"background-color","white","color","var(--app-color)"],["value","false",2,"background-color","white","color","var(--app-color)"],["type","text","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9","formControlName","address",1,"form-control"],["placeholder","Nh\u1eadp ghi ch\xfa","formControlName","note",1,"form-control"],[1,"modal-footer"],[1,"btn","btn-app","btn-outline-app",3,"click"],[1,"btn","btn-app","text-white",3,"click"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Ec(2," C\u1eadp nh\u1eadt th\xf4ng tin c\xe1 nh\xe2n "),r.Vb(),r.Wb(3,"div",2),r.ec("click",(function(){return t.dismissModal()})),r.Wb(4,"span",3),r.Ec(5,"\xd7"),r.Vb(),r.Vb(),r.Vb(),r.Wb(6,"div",4),r.Wb(7,"div",5),r.Wb(8,"div",6),r.Wb(9,"div",7),r.Wb(10,"div",8),r.Wb(11,"div",9),r.Wb(12,"b"),r.Ec(13,"\u1ea2nh \u0111\u1ea1i di\u1ec7n: "),r.Vb(),r.Vb(),r.Wb(14,"div",10),r.Wb(15,"label",11),r.Wb(16,"div",12),r.Ec(17,"Upload \u1ea3nh "),r.Rb(18,"i",13),r.Vb(),r.Wb(19,"div",14),r.Rb(20,"i",15),r.Vb(),r.Wb(21,"div",16),r.Rb(22,"i",17),r.Vb(),r.Wb(23,"input",18),r.ec("change",(function(e){return t.onChangeLogo(e)})),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(24,"div",8),r.Wb(25,"div",9),r.Wb(26,"b"),r.Ec(27,"H\u1ecd: "),r.Vb(),r.Vb(),r.Wb(28,"div",19),r.Rb(29,"input",20),r.Vb(),r.Vb(),r.Wb(30,"div",8),r.Wb(31,"div",9),r.Wb(32,"b"),r.Ec(33,"T\xean: "),r.Vb(),r.Vb(),r.Wb(34,"div",19),r.Rb(35,"input",21),r.Vb(),r.Vb(),r.Wb(36,"div",8),r.Wb(37,"div",9),r.Wb(38,"b"),r.Ec(39,"Ng\xe0y sinh: "),r.Vb(),r.Vb(),r.Wb(40,"div",19),r.Rb(41,"input",22),r.Vb(),r.Vb(),r.Wb(42,"div",8),r.Wb(43,"div",9),r.Wb(44,"b"),r.Ec(45,"Gi\u1edbi t\xednh: "),r.Vb(),r.Vb(),r.Wb(46,"div",19),r.Wb(47,"select",23),r.Wb(48,"option",24),r.Ec(49,"Ch\u1ecdn gi\u1edbi t\xednh"),r.Vb(),r.Wb(50,"option",25),r.Ec(51,"Nam"),r.Vb(),r.Wb(52,"option",26),r.Ec(53,"N\u1eef"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(54,"div",8),r.Wb(55,"div",9),r.Wb(56,"b"),r.Ec(57,"\u0110\u1ecba ch\u1ec9: "),r.Vb(),r.Vb(),r.Wb(58,"div",19),r.Rb(59,"input",27),r.Vb(),r.Vb(),r.Wb(60,"div",8),r.Wb(61,"div",9),r.Wb(62,"b"),r.Ec(63,"Ghi ch\xfa: "),r.Vb(),r.Vb(),r.Wb(64,"div",19),r.Rb(65,"textarea",28),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(66,"div",29),r.Wb(67,"button",30),r.ec("click",(function(){return t.dismissModal()})),r.Ec(68,"\u0110\xf3ng"),r.Vb(),r.Wb(69,"button",31),r.ec("click",(function(){return t.UpdateUser()})),r.Ec(70," C\u1eadp nh\u1eadt "),r.Vb(),r.Vb()),2&e&&(r.Db(7),r.oc("formGroup",t.update_form),r.Db(8),r.Bc("background-image","url("+(t.update_form.value.image||"assets/images/default-avatar.png")+")",r.Jb))},directives:[D.n,D.h,D.c,D.m,D.g,D.u,D.q,D.w],styles:[".detail-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{height:39px;box-sizing:border-box}.product-detail-img[_ngcontent-%COMP%]{text-align:center}.logo-upload[_ngcontent-%COMP%], .product-detail-img[_ngcontent-%COMP%]{border-radius:5px;position:relative}.logo-upload[_ngcontent-%COMP%]{height:160px;width:120px;cursor:pointer;background-size:cover;background-position:50%;background-repeat:no-repeat}.logo-upload[_ngcontent-%COMP%]   .over-logo[_ngcontent-%COMP%], .logo-upload[_ngcontent-%COMP%]   .upload-loading[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;display:none;background:rgba(0,0,0,.8);color:var(--white-color);justify-content:center;align-items:center;border-radius:5px}.logo-upload[_ngcontent-%COMP%]   .mask[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;color:#fff;font-size:1rem;text-align:center;font-weight:600;width:100%;height:25%;background-color:rgba(0,0,0,.5);display:none}.logo-upload[_ngcontent-%COMP%]:hover   .mask[_ngcontent-%COMP%]{display:block;-webkit-animation:goup .6s ease-out;animation:goup .6s ease-out}.logo-upload.loading[_ngcontent-%COMP%]   .upload-loading[_ngcontent-%COMP%]{display:flex}.product-slide-item[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:var(--light)}.product-slide-item[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:400;padding:7px 15px;border-bottom:1px solid var(--border-gray-color);border-top:1px solid var(--border-gray-color)}.product-slide-item[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 15px}.product-slide-item[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid var(--border-gray-color)}.add-btn[_ngcontent-%COMP%]{position:absolute;right:10px;top:10px;border:none!important}"]}),e})();function be(e,t){if(1&e&&(r.Wb(0,"div",6),r.Wb(1,"div",7),r.Wb(2,"b"),r.Ec(3," \u1ea2nh \u0111\u1ea1i di\u1ec7n "),r.Vb(),r.Vb(),r.Wb(4,"div",18),r.Rb(5,"img",19),r.Vb(),r.Vb()),2&e){const e=r.ic();r.Db(5),r.oc("src",(null==e.user_info?null:e.user_info.image)||"assets/images/default-avatar.png",r.xc)}}function se(e,t){1&e&&(r.Wb(0,"b"),r.Ec(1," M\xe3 nh\xe2n vi\xean "),r.Vb())}function de(e,t){if(1&e){const e=r.Xb();r.Wb(0,"div",6),r.Wb(1,"div",7),r.Cc(2,se,2,0,"b",20),r.Vb(),r.Wb(3,"div",11),r.Wb(4,"input",21),r.ec("ngModelChange",(function(t){return r.vc(e),r.ic().user_info.employee_id=t})),r.jc(5,"standardizedId"),r.Vb(),r.Vb(),r.Vb()}if(2&e){const e=r.ic();r.Db(2),r.oc("ngIf",1==(null==e.user_info.account||null==e.user_info.account.role?null:e.user_info.account.role.role_id)||2==(null==e.user_info||null==e.user_info.account||null==e.user_info.account.role?null:e.user_info.account.role.role_id)),r.Db(2),r.oc("ngModel",r.kc(5,2,e.user_info.employee_id))}}function ue(e,t){1&e&&(r.Wb(0,"b"),r.Ec(1," M\xe3 kh\xe1ch h\xe0ng "),r.Vb())}function pe(e,t){if(1&e){const e=r.Xb();r.Wb(0,"div",6),r.Wb(1,"div",7),r.Cc(2,ue,2,0,"b",20),r.Vb(),r.Wb(3,"div",11),r.Wb(4,"input",21),r.ec("ngModelChange",(function(t){return r.vc(e),r.ic().user_info.customer_id=t})),r.jc(5,"standardizedId"),r.Vb(),r.Vb(),r.Vb()}if(2&e){const e=r.ic();r.Db(2),r.oc("ngIf",3==(null==e.user_info.account||null==e.user_info.account.role?null:e.user_info.account.role.role_id)),r.Db(2),r.oc("ngModel",r.kc(5,2,e.user_info.customer_id))}}let he=(()=>{class e{constructor(e,t,n){this.accountQuery=e,this.modalController=t,this.fb=n,this.auth_info$=this.accountQuery.auth_info$}ngOnInit(){this.subscription=this.accountQuery.auth_info$.subscribe(e=>{this.user_info=e.user_info})}ngOnDestroy(){this.subscription.unsubscribe()}OpenChangePasswordModal(){this.modalController.create({component:Z,cssClass:"modal-lg",componentProps:{account_id:this.user_info.account.account_id}}).show().then()}OpenUpdateUserModal(){this.modalController.create({component:le,cssClass:"modal-xl",componentProps:{account_id:this.user_info.account.account_id}}).show().then()}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(K.a),r.Qb(P.a),r.Qb(D.d))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-user-info"]],decls:44,vars:9,consts:[[1,"box","setting-box","mt-0"],[1,"setting-header"],[1,"setting-body"],[1,"text-app","text-left","font-weight-bold","text-center","my-4"],[1,"cursor-pointer"],["class","row py-2",4,"ngIf"],[1,"row","py-2"],[1,"col-2","app-flex"],[1,"col-5"],["type","text","disabled","","placeholder","Nh\u1eadp h\u1ecd ng\u01b0\u1eddi d\xf9ng",1,"form-control","read-only",3,"ngModel","ngModelChange"],["type","text","disabled","","placeholder","Nh\u1eadp t\xean ng\u01b0\u1eddi d\xf9ng",1,"form-control","read-only",3,"ngModel","ngModelChange"],[1,"col-10"],["type","text","disabled","","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9 email",1,"form-control","read-only",3,"ngModel","ngModelChange"],["type","text","disabled","","placeholder","Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i",1,"form-control","read-only",3,"ngModel","ngModelChange"],["type","text","disabled","","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9 li\xean l\u1ea1c",1,"form-control","read-only",3,"ngModel","ngModelChange"],["type","datetime","disabled","","placeholder","Nh\u1eadp v\xe0o ng\xe0y sinh",1,"form-control","read-only",3,"ngModel","ngModelChange"],[1,"setting-footer"],[1,"btn-outline-app","ml-auto",3,"click"],[1,"col-10","text-center"],["alt","",2,"height","80px","width","60px","object-fit","cover",3,"src"],[4,"ngIf"],["type","text","disabled","","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9 email","name","inputField",1,"form-control","read-only","text-app",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Ec(2,"Th\xf4ng tin ng\u01b0\u1eddi d\xf9ng"),r.Vb(),r.Wb(3,"div",2),r.Wb(4,"h1",3),r.Rb(5,"b",4),r.Vb(),r.Cc(6,be,6,1,"div",5),r.Cc(7,de,6,4,"div",5),r.Cc(8,pe,6,4,"div",5),r.Wb(9,"div",6),r.Wb(10,"div",7),r.Wb(11,"b"),r.Ec(12,"T\xean ng\u01b0\u1eddi d\xf9ng"),r.Vb(),r.Vb(),r.Wb(13,"div",8),r.Wb(14,"input",9),r.ec("ngModelChange",(function(e){return t.user_info.last_name=e})),r.Vb(),r.Vb(),r.Wb(15,"div",8),r.Wb(16,"input",10),r.ec("ngModelChange",(function(e){return t.user_info.first_name=e})),r.Vb(),r.Vb(),r.Vb(),r.Wb(17,"div",6),r.Wb(18,"div",7),r.Wb(19,"b"),r.Ec(20,"Email: "),r.Vb(),r.Vb(),r.Wb(21,"div",11),r.Wb(22,"input",12),r.ec("ngModelChange",(function(e){return t.user_info.email=e})),r.Vb(),r.Vb(),r.Vb(),r.Wb(23,"div",6),r.Wb(24,"div",7),r.Wb(25,"b"),r.Ec(26,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i: "),r.Vb(),r.Vb(),r.Wb(27,"div",11),r.Wb(28,"input",13),r.ec("ngModelChange",(function(e){return t.user_info.phone=e})),r.Vb(),r.Vb(),r.Vb(),r.Wb(29,"div",6),r.Wb(30,"div",7),r.Wb(31,"b"),r.Ec(32,"\u0110\u1ecba ch\u1ec9: "),r.Vb(),r.Vb(),r.Wb(33,"div",11),r.Wb(34,"input",14),r.ec("ngModelChange",(function(e){return t.user_info.address=e})),r.Vb(),r.Vb(),r.Vb(),r.Wb(35,"div",6),r.Wb(36,"div",7),r.Wb(37,"b"),r.Ec(38,"Ng\xe0y sinh: "),r.Vb(),r.Vb(),r.Wb(39,"div",11),r.Wb(40,"input",15),r.ec("ngModelChange",(function(e){return t.user_info.birth_day=e})),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(41,"div",16),r.Wb(42,"div",17),r.ec("click",(function(){return t.OpenUpdateUserModal()})),r.Ec(43," C\u1eadp nh\u1eadt th\xf4ng tin "),r.Vb(),r.Vb(),r.Vb()),2&e&&(r.Db(6),r.oc("ngIf",1==(null==t.user_info.account||null==t.user_info.account.role?null:t.user_info.account.role.role_id)||2==(null==t.user_info||null==t.user_info.account||null==t.user_info.account.role?null:t.user_info.account.role.role_id)),r.Db(1),r.oc("ngIf",1==(null==t.user_info.account||null==t.user_info.account.role?null:t.user_info.account.role.role_id)||2==(null==t.user_info||null==t.user_info.account||null==t.user_info.account.role?null:t.user_info.account.role.role_id)),r.Db(1),r.oc("ngIf",3==(null==t.user_info.account||null==t.user_info.account.role?null:t.user_info.account.role.role_id)),r.Db(6),r.oc("ngModel",t.user_info.last_name),r.Db(2),r.oc("ngModel",t.user_info.first_name),r.Db(6),r.oc("ngModel",t.user_info.email),r.Db(6),r.oc("ngModel",t.user_info.phone),r.Db(6),r.oc("ngModel",t.user_info.address),r.Db(6),r.oc("ngModel",t.user_info.birth_day))},directives:[c.m,D.c,D.m,D.p],pipes:[g.b],styles:[""]}),e})(),me=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["app-setting-management"]],decls:26,vars:0,consts:[[1,"p-0","pl-2","header-admin","d-flex","align-items-center"],[1,"page-title","font-weight-bold","pl-4","mr-5"],[1,"p-4","d-flex"],[1,"menu-sidebar"],[1,"setting-title","d-flex","flex-row"],["src","assets/images/library.jpg","alt","",2,"height","70px","width","70px","background","transparent"],[2,"color","gray","margin-left","20px"],[1,"menu-list","py-3"],[2,"color","gray"],["routerLink","account-info","routerLinkActive","active"],["routerLink","user-info","routerLinkActive","active"],[1,"content-wrapper",2,"min-height","100vh"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Ec(2," Thi\u1ebft l\u1eadp "),r.Vb(),r.Vb(),r.Wb(3,"div",2),r.Wb(4,"div",3),r.Wb(5,"div",4),r.Wb(6,"div"),r.Rb(7,"img",5),r.Vb(),r.Wb(8,"h2",6),r.Wb(9,"b"),r.Ec(10," Th\u01b0 vi\u1ec7n "),r.Vb(),r.Rb(11,"br"),r.Wb(12,"b"),r.Ec(13," \u0110\u1ea1i h\u1ecdc M\u1edf TPHCM "),r.Vb(),r.Vb(),r.Vb(),r.Wb(14,"div",7),r.Wb(15,"div"),r.Wb(16,"a",8),r.Ec(17,"Th\xf4ng tin c\xe1 nh\xe2n"),r.Vb(),r.Vb(),r.Wb(18,"div",9),r.Wb(19,"span"),r.Ec(20,"Th\xf4ng tin t\xe0i kho\u1ea3n"),r.Vb(),r.Vb(),r.Wb(21,"div",10),r.Wb(22,"span"),r.Ec(23,"Th\xf4ng tin ng\u01b0\u1eddi d\xf9ng"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(24,"div",11),r.Rb(25,"router-outlet"),r.Vb(),r.Vb())},directives:[o.h,o.i,o.l],styles:[".box[_ngcontent-%COMP%]{width:100%;box-shadow:0 0 10px 0 rgba(0,0,0,.2);border-radius:7px;border:1px solid #eee}.setting-box[_ngcontent-%COMP%]{margin-top:1.25rem}.setting-header[_ngcontent-%COMP%]{font-weight:700;font-size:1.2rem}.setting-body[_ngcontent-%COMP%], .setting-footer[_ngcontent-%COMP%], .setting-header[_ngcontent-%COMP%]{padding:1.5rem}.setting-body[_ngcontent-%COMP%], .setting-header[_ngcontent-%COMP%]{border-bottom:1px solid #d3d3d3}.setting-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.note[_ngcontent-%COMP%]{padding:.5rem 0;text-align:left}.read-only[_ngcontent-%COMP%]{cursor:not-allowed}.menu-list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:block;font-size:1.2rem;padding:.75rem 1.25rem;margin:.5rem 0;cursor:pointer;color:grey}.menu-list[_ngcontent-%COMP%]   div.active[_ngcontent-%COMP%]{background-color:#f5f5f5;border-radius:.4rem;color:var(--app-color)}.menu-list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{font-weight:700}.menu-list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:focus{border:0 solid!important;outline:0}a[_ngcontent-%COMP%]{text-decoration:none}.menu-sidebar[_ngcontent-%COMP%]{padding:2.5rem}"]}),e})();var ge=n("itXk"),fe=n("lJxs"),ve=n("2Rin"),_e=n("Y0/L"),Ve=n("Qu3c");function We(e,t){if(1&e&&(r.Wb(0,"option",53),r.Ec(1),r.Wb(2,"div",54),r.Rb(3,"i",55),r.Vb(),r.Vb()),2&e){const e=t.$implicit;r.oc("ngValue",e.code),r.Db(1),r.Gc(" ",null==e?null:e.name," ")}}function ye(e,t){if(1&e&&(r.Wb(0,"option",53),r.Ec(1),r.Wb(2,"div",54),r.Rb(3,"i",55),r.Vb(),r.Vb()),2&e){const e=t.$implicit;r.oc("ngValue",e.code),r.Db(1),r.Gc(" ",null==e?null:e.name," ")}}function ke(e,t){if(1&e&&(r.Wb(0,"option",53),r.Ec(1),r.Wb(2,"div",54),r.Rb(3,"i",55),r.Vb(),r.Vb()),2&e){const e=t.$implicit;r.oc("ngValue",e.code),r.Db(1),r.Gc(" ",null==e?null:e.name," ")}}let xe=(()=>{class e{constructor(e,t,n,o,i,c,r){this.fb=e,this.employeeService=t,this.accountService=n,this.router=o,this.util=i,this.http=c,this.locationQuery=r,this.createAccountForm=this.fb.group({account_name:[""],password:[""],confirm_password:[""],first_name:"",last_name:"",email:"",phone:"",birthdate:"",gender:"",image:"",role_id:"",note:""}),this.locationForm=this.fb.group({provinceCode:"",districtCode:"",wardCode:"",address:""}),this.provincesList$=this.locationQuery.select("provincesList"),this.districtsList$=Object(ge.a)([this.locationQuery.select("districtsList"),this.locationForm.controls.provinceCode.valueChanges]).pipe(Object(fe.a)(([e,t])=>t?null==e?void 0:e.filter(e=>e.province_code==t):[])),this.wardsList$=Object(ge.a)([this.locationQuery.select("wardsList"),this.locationForm.controls.districtCode.valueChanges]).pipe(Object(fe.a)(([e,t])=>t?null==e?void 0:e.filter(e=>e.district_code==t):[])),this.displayMap=e=>e&&e.name||null,this.valueMap=e=>e&&e.code||null}ngOnInit(){}goBack(){this.router.navigateByUrl("admin/account-management/account-list")}ResetDataForm(){this.createAccountForm.patchValue({account_name:[""],password:[""],confirm_password:[""],first_name:"",last_name:"",email:"",phone:"",birthdate:"",address:"",gender:"",image:"",note:""})}CreateAccount(){return Object(u.a)(this,void 0,void 0,(function*(){}))}CreateEmployeeAndAccount(){return Object(u.a)(this,void 0,void 0,(function*(){try{let e=this.createAccountForm.value,t=this.locationForm.value;if(e.password!=e.confirm_password)return toastr.error("T\u1ea1o m\u1edbi t\xe0i kho\u1ea3n th\u1ea5t b\u1ea1i","M\u1eadt kh\u1ea9u nh\u1eadp l\u1ea1i kh\xf4ng ch\xednh x\xe1c");if(!this.util.validatePhoneNumber(e.phone))return;if(!this.util.validEmail(e.email))return;const n={role_id:e.role_id,account_name:e.account_name,account_password:e.password,confirm_account_password:e.confirm_password,last_name:e.last_name,first_name:e.first_name,phone:e.phone,email:e.email,birth_date:e.birthdate,address:t.address,gender:Boolean(e.gender),image:e.image,province_id:t.provinceCode||null,district_id:t.districtCode||null,ward_id:t.wardCode||null};yield this.accountService.CreateAccountAndEmployee(n),this.router.navigateByUrl("/admin/account-management/account-list"),toastr.success("T\u1ea1o m\u1edbi t\xe0i kho\u1ea3n th\xe0nh c\xf4ng")}catch(e){toastr.error("T\u1ea1o m\u1edbi t\xe0i kho\u1ea3n th\u1ea5t b\u1ea1i",e.msg||e.message)}}))}onChangeLogo(e){return Object(u.a)(this,void 0,void 0,(function*(){try{let t=new FormData;t.append("image",e.target.files[0],e.target.files[0].name);let n=yield this.http.post("http://localhost:5000/admin/book-management/upload-book-image",t).toPromise();this.createAccountForm.patchValue({image:n.image})}catch(t){toastr.error("C\u1eadp nh\u1eadt \u1ea3nh th\u1ea5t b\u1ea1i!",t.msg||t.message)}}))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(D.d),r.Qb(ce),r.Qb(H.a),r.Qb(o.g),r.Qb(ve.a),r.Qb(ae.b),r.Qb(_e.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-create-account"]],decls:143,vars:13,consts:[[1,""],[1,"d-flex","justify-content-center","align-items-center","text-app","font-weight-bold"],[1,"font-weight-bold"],[1,"d-flex","flex-row","p-5","mb-4",3,"formGroup"],[1,"avatar","col-3","mb-4"],[1,"d-flex","flex-column","app-flex"],[1,"product-detail-img",2,"height","400px","width","300px","object-fit","cover"],[1,"logo-upload","m-0","border","rounded","h-100","w-100"],[1,"mask","pt-2"],[1,"fas","fa-cloud-upload-alt","text-white"],[1,"over-logo","rounded","m-0","p-0"],["aria-hidden","true",1,"fa","fa-camera"],[1,"upload-loading","m-0","p-0"],["aria-hidden","true",1,"fa","fa-circle-o-notch","fa-spin"],["accept","image/png,image/jpg,image/jpeg,image/gif","name","file","type","file",1,"d-none",3,"change"],[1,"text-app","text-center","font-weight-bold","mt-2"],[1,"col-9","d-flex","flex-column"],[1,"d-flex","flex-column"],[1,"row","py-3"],[1,"col-10","app-flex"],[1,"col-2","app-flex"],[1,"col-9"],["type","text","placeholder","Nh\u1eadp t\xean t\xe0i kho\u1ea3n","formControlName","account_name",1,"form-control"],["type","password","placeholder","Nh\u1eadp m\u1eadt kh\u1ea9u","formControlName","password",1,"form-control"],["type","password","placeholder","Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u","formControlName","confirm_password",1,"form-control"],["placeholder","Ch\u1ecdn ch\u1ee9c v\u1ee5","autofocus","","formControlName","role_id",1,"form-control"],["value","","selected","","disabled","","hidden",""],["value","1",1,"py-3",2,"background-color","white","color","var(--app-color)"],["value","2",1,"py-3",2,"background-color","white","color","var(--app-color)"],[3,"formGroup"],[1,"col-2","app-flex","font-weight-bold"],[1,"form-group","d-flex","flex-row"],["formControlName","provinceCode",1,"form-control","mr-3"],["value","","selected",""],["class","font-weight-bold",3,"ngValue",4,"ngFor","ngForOf"],["formControlName","districtCode",1,"form-control","mr-3"],["formControlName","wardCode",1,"form-control","mr-3"],["type","text","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9","autofocus","","formControlName","address",1,"form-control"],["type","text","placeholder","Nh\u1eadp h\u1ecd nh\xe2n vi\xean","formControlName","last_name",1,"form-control"],["type","text","placeholder","Nh\u1eadp t\xean nh\xe2n vi\xean","formControlName","first_name",1,"form-control"],["type","text","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9 email","formControlName","email",1,"form-control"],["type","text","placeholder","Nh\u1eadp gi\xe1 tr\u1ecb gi\u1ea3m gi\xe1","formControlName","phone",1,"form-control"],["type","date","id","birthDate","name","birthDate","placeholder","Nh\u1eadp ng\xe0y sinh","autofocus","","formControlName","birthdate","matTooltip","Vui l\xf2ng nh\u1eadp ng\xe0y sinh","matTooltipPosition","above",1,"form-control"],["placeholder","Ch\u1ecdn gi\u1edbi t\xednh","autofocus","","formControlName","gender",1,"form-control"],["value","true",2,"background-color","white","color","var(--app-color)"],["value","false",2,"background-color","white","color","var(--app-color)"],["placeholder","Nh\u1eadp ghi ch\xfa","formControlName","note",1,"form-control"],[1,"btn","btn-outline-app",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-left","pr-1"],[1,"col-9","d-flex","flex-row","justify-content-end"],[1,"btn-outline-app","align-self-center","mr-2",3,"click"],[1,"ml-1",2,"width","60px"],[1,"btn-app","align-self-center",3,"click"],[1,"font-weight-bold",3,"ngValue"],[1,"px-3","py-2"],[1,"fa","fa-plus"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"h1",2),r.Ec(3,"\u0110\u0103ng k\xfd t\xe0i kho\u1ea3n nh\xe2n vi\xean"),r.Vb(),r.Vb(),r.Wb(4,"div",3),r.Wb(5,"div",4),r.Wb(6,"div",5),r.Wb(7,"div",6),r.Wb(8,"label",7),r.Wb(9,"div",8),r.Ec(10,"Upload \u1ea3nh "),r.Rb(11,"i",9),r.Vb(),r.Wb(12,"div",10),r.Rb(13,"i",11),r.Vb(),r.Wb(14,"div",12),r.Rb(15,"i",13),r.Vb(),r.Wb(16,"input",14),r.ec("change",(function(e){return t.onChangeLogo(e)})),r.Vb(),r.Vb(),r.Vb(),r.Wb(17,"h1",15),r.Ec(18,"H\xecnh \u1ea3nh \u0111\u1ea1i di\u1ec7n"),r.Vb(),r.Vb(),r.Vb(),r.Wb(19,"div",16),r.Wb(20,"div",17),r.Wb(21,"div",18),r.Wb(22,"h1",19),r.Wb(23,"b"),r.Ec(24,"Th\xf4ng tin t\xe0i kho\u1ea3n"),r.Vb(),r.Vb(),r.Vb(),r.Wb(25,"div",18),r.Wb(26,"div",20),r.Wb(27,"b"),r.Ec(28,"T\xean t\xe0i kho\u1ea3n: "),r.Vb(),r.Vb(),r.Wb(29,"div",21),r.Rb(30,"input",22),r.Vb(),r.Vb(),r.Wb(31,"div",18),r.Wb(32,"div",20),r.Wb(33,"b"),r.Ec(34,"M\u1eadt kh\u1ea9u: "),r.Vb(),r.Vb(),r.Wb(35,"div",21),r.Rb(36,"input",23),r.Vb(),r.Vb(),r.Wb(37,"div",18),r.Wb(38,"div",20),r.Wb(39,"b"),r.Ec(40,"X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u: "),r.Vb(),r.Vb(),r.Wb(41,"div",21),r.Rb(42,"input",24),r.Vb(),r.Vb(),r.Wb(43,"div",18),r.Wb(44,"h1",19),r.Wb(45,"b"),r.Ec(46,"Th\xf4ng tin ng\u01b0\u1eddi d\xf9ng"),r.Vb(),r.Vb(),r.Vb(),r.Wb(47,"div",18),r.Wb(48,"div",20),r.Wb(49,"b"),r.Ec(50,"Ch\u1ee9c v\u1ee5: "),r.Vb(),r.Vb(),r.Wb(51,"div",21),r.Wb(52,"select",25),r.Wb(53,"option",26),r.Ec(54,"Ch\u1ecdn ch\u1ee9c v\u1ee5"),r.Vb(),r.Wb(55,"option",27),r.Ec(56,"Qu\u1ea3n l\xfd"),r.Vb(),r.Wb(57,"option",28),r.Ec(58,"Nh\xe2n vi\xean"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Ub(59,29),r.Wb(60,"div",18),r.Wb(61,"div",30),r.Ec(62,"\u0110\u1ecba ch\u1ec9: "),r.Vb(),r.Wb(63,"div",21),r.Wb(64,"div",31),r.Wb(65,"select",32),r.Wb(66,"option",33),r.Ec(67,"Ch\u1ecdn t\u1ec9nh th\xe0nh "),r.Vb(),r.Cc(68,We,4,2,"option",34),r.jc(69,"async"),r.Vb(),r.Wb(70,"select",35),r.Wb(71,"option",33),r.Ec(72,"Ch\u1ecdn qu\u1eadn huy\u1ec7n "),r.Vb(),r.Cc(73,ye,4,2,"option",34),r.jc(74,"async"),r.Vb(),r.Wb(75,"select",36),r.Wb(76,"option",33),r.Ec(77,"Ch\u1ecdn ph\u01b0\u1eddng x\xe3 "),r.Vb(),r.Cc(78,ke,4,2,"option",34),r.jc(79,"async"),r.Vb(),r.Vb(),r.Wb(80,"div",31),r.Rb(81,"input",37),r.Vb(),r.Vb(),r.Vb(),r.Tb(),r.Wb(82,"div",18),r.Wb(83,"div",20),r.Wb(84,"b"),r.Ec(85,"H\u1ecd: "),r.Vb(),r.Vb(),r.Wb(86,"div",21),r.Rb(87,"input",38),r.Vb(),r.Vb(),r.Wb(88,"div",18),r.Wb(89,"div",20),r.Wb(90,"b"),r.Ec(91,"T\xean: "),r.Vb(),r.Vb(),r.Wb(92,"div",21),r.Rb(93,"input",39),r.Vb(),r.Vb(),r.Wb(94,"div",18),r.Wb(95,"div",20),r.Wb(96,"b"),r.Ec(97,"\u0110\u1ecba ch\u1ec9 email: "),r.Vb(),r.Vb(),r.Wb(98,"div",21),r.Rb(99,"input",40),r.Vb(),r.Vb(),r.Wb(100,"div",18),r.Wb(101,"div",20),r.Wb(102,"b"),r.Ec(103,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i: "),r.Vb(),r.Vb(),r.Wb(104,"div",21),r.Rb(105,"input",41),r.Vb(),r.Vb(),r.Wb(106,"div",18),r.Wb(107,"div",20),r.Wb(108,"b"),r.Ec(109,"Ng\xe0y sinh: "),r.Vb(),r.Vb(),r.Wb(110,"div",21),r.Rb(111,"input",42),r.Vb(),r.Vb(),r.Wb(112,"div",18),r.Wb(113,"div",20),r.Wb(114,"b"),r.Ec(115,"Gi\u1edbi t\xednh: "),r.Vb(),r.Vb(),r.Wb(116,"div",21),r.Wb(117,"select",43),r.Wb(118,"option",26),r.Ec(119,"Ch\u1ecdn gi\u1edbi t\xednh"),r.Vb(),r.Wb(120,"option",44),r.Ec(121,"Nam"),r.Vb(),r.Wb(122,"option",45),r.Ec(123,"N\u1eef"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(124,"div",18),r.Wb(125,"div",20),r.Wb(126,"b"),r.Ec(127,"Ghi ch\xfa: "),r.Vb(),r.Vb(),r.Wb(128,"div",21),r.Rb(129,"textarea",46),r.Vb(),r.Vb(),r.Vb(),r.Wb(130,"div",17),r.Wb(131,"div",18),r.Wb(132,"div",20),r.Wb(133,"div",47),r.ec("click",(function(){return t.goBack()})),r.Rb(134,"i",48),r.Ec(135," Quay l\u1ea1i"),r.Vb(),r.Vb(),r.Wb(136,"div",49),r.Wb(137,"div",50),r.ec("click",(function(){return t.ResetDataForm()})),r.Wb(138,"span",51),r.Ec(139,"\u0110\u1eb7t l\u1ea1i"),r.Vb(),r.Vb(),r.Wb(140,"div",52),r.ec("click",(function(){return t.CreateEmployeeAndAccount()})),r.Wb(141,"span"),r.Ec(142,"\u0110\u0103ng k\xfd"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb()),2&e&&(r.Db(4),r.oc("formGroup",t.createAccountForm),r.Db(4),r.Bc("background-image","url("+(t.createAccountForm.value.image||"assets/images/default-avatar.png")+")",r.Jb),r.Db(51),r.oc("formGroup",t.locationForm),r.Db(9),r.oc("ngForOf",r.kc(69,7,t.provincesList$)),r.Db(5),r.oc("ngForOf",r.kc(74,9,t.districtsList$)),r.Db(5),r.oc("ngForOf",r.kc(79,11,t.wardsList$)))},directives:[D.n,D.h,D.c,D.m,D.g,D.u,D.q,D.w,c.l,Ve.a],pipes:[c.b],styles:[".detail-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{height:39px;box-sizing:border-box}.product-detail-img[_ngcontent-%COMP%]{text-align:center}.logo-upload[_ngcontent-%COMP%], .product-detail-img[_ngcontent-%COMP%]{border-radius:5px;position:relative}.logo-upload[_ngcontent-%COMP%]{width:100%;padding-bottom:100%;cursor:pointer;background-size:cover;background-position:50%;background-repeat:no-repeat}.logo-upload[_ngcontent-%COMP%]   .over-logo[_ngcontent-%COMP%], .logo-upload[_ngcontent-%COMP%]   .upload-loading[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;display:none;background:rgba(0,0,0,.8);color:var(--white-color);justify-content:center;align-items:center;border-radius:5px}.logo-upload[_ngcontent-%COMP%]   .mask[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;color:#fff;font-size:3rem;text-align:center;font-weight:600;width:100%;height:25%;background-color:rgba(0,0,0,.5);display:none}.logo-upload[_ngcontent-%COMP%]:hover   .mask[_ngcontent-%COMP%]{display:block;-webkit-animation:goup .6s ease-out;animation:goup .6s ease-out}.logo-upload.loading[_ngcontent-%COMP%]   .upload-loading[_ngcontent-%COMP%]{display:flex}.product-slide-item[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:var(--light)}.product-slide-item[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:400;padding:7px 15px;border-bottom:1px solid var(--border-gray-color);border-top:1px solid var(--border-gray-color)}.product-slide-item[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 15px}.product-slide-item[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid var(--border-gray-color)}.add-btn[_ngcontent-%COMP%]{position:absolute;right:10px;top:10px;border:none!important}"]}),e})(),we=(()=>{class e{constructor(e){this.modalAction=e}ngOnInit(){}onConfirmDelete(){this.modalAction.dismiss(this.account)}dismissModal(){this.modalAction.dismiss(null)}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(p.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-confirm-delete-account"]],inputs:{account:"account"},decls:17,vars:2,consts:[[1,"modal-header"],[1,"modal-title","big-font"],[1,"close",3,"click"],[1,"text-large"],[1,"modal-body"],[1,"modal-footer"],[1,"btn","btn-app","btn-outline-app",3,"click"],[1,"btn","btn-app","text-white",3,"click"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Ec(2),r.Vb(),r.Wb(3,"div",2),r.ec("click",(function(){return t.dismissModal()})),r.Wb(4,"span",3),r.Ec(5,"\xd7"),r.Vb(),r.Vb(),r.Vb(),r.Wb(6,"div",4),r.Wb(7,"div"),r.Ec(8,"B\u1ea1n c\xf3 th\u1ef1c s\u1ef1 mu\u1ed1n x\xf3a t\xe0i kho\u1ea3n "),r.Wb(9,"b"),r.Ec(10),r.Vb(),r.Ec(11," ra kh\u1ecfi h\u1ec7 th\u1ed1ng th\u01b0 qu\xe1n kh\xf4ng ? "),r.Vb(),r.Vb(),r.Wb(12,"div",5),r.Wb(13,"button",6),r.ec("click",(function(){return t.dismissModal()})),r.Ec(14,"\u0110\xf3ng"),r.Vb(),r.Wb(15,"button",7),r.ec("click",(function(){return t.onConfirmDelete()})),r.Ec(16," X\xe1c nh\u1eadn "),r.Vb(),r.Vb()),2&e&&(r.Db(2),r.Gc(" X\xe1c nh\u1eadn x\xf3a t\xe0i kho\u1ea3n : ",null==t.account?null:t.account.account_name," "),r.Db(8),r.Gc(" ",null==t.account?null:t.account.account_name,""))},styles:[""]}),e})();function Ce(e,t){if(1&e){const e=r.Xb();r.Wb(0,"h1",23),r.Ec(1,"M\xe3 nh\xe2n vi\xean: "),r.Wb(2,"b",24),r.ec("click",(function(){return r.vc(e),r.ic(2).ViewToEmployee()})),r.Ec(3),r.jc(4,"standardizedId"),r.jc(5,"async"),r.Vb(),r.Vb()}if(2&e){const e=r.ic(2);var n;r.Db(3),r.Gc(" ",r.kc(4,1,null==(n=r.kc(5,3,e.detail_account$))?null:n.employee_id)," ")}}function Ee(e,t){if(1&e){const e=r.Xb();r.Wb(0,"h1",23),r.Ec(1,"M\xe3 kh\xe1ch h\xe0ng: "),r.Wb(2,"b",24),r.ec("click",(function(){return r.vc(e),r.ic(2).ViewToCustomer()})),r.Ec(3),r.jc(4,"standardizedId"),r.jc(5,"async"),r.Vb(),r.Vb()}if(2&e){const e=r.ic(2);var n;r.Db(3),r.Fc(r.kc(4,1,null==(n=r.kc(5,3,e.detail_account$))?null:n.customer_id))}}function Oe(e,t){if(1&e){const e=r.Xb();r.Ub(0),r.Wb(1,"div",4),r.Wb(2,"div",5),r.Wb(3,"div",6),r.Rb(4,"img",7),r.jc(5,"async"),r.Cc(6,Ce,6,5,"h1",8),r.jc(7,"async"),r.jc(8,"async"),r.Cc(9,Ee,6,5,"h1",9),r.jc(10,"async"),r.Vb(),r.Vb(),r.Wb(11,"div",10),r.Wb(12,"div",11),r.Wb(13,"div",12),r.Wb(14,"div",13),r.Wb(15,"b"),r.Ec(16,"M\xe3 t\xe0i kho\u1ea3n: "),r.Vb(),r.Vb(),r.Wb(17,"div",14),r.Ec(18),r.jc(19,"standardizedId"),r.jc(20,"async"),r.Vb(),r.Vb(),r.Wb(21,"div",12),r.Wb(22,"div",13),r.Wb(23,"b"),r.Ec(24,"T\xean t\xe0i kho\u1ea3n: "),r.Vb(),r.Vb(),r.Wb(25,"div",14),r.Ec(26),r.jc(27,"async"),r.Vb(),r.Vb(),r.Wb(28,"div",12),r.Wb(29,"div",13),r.Wb(30,"b"),r.Ec(31,"Vai tr\xf2: "),r.Vb(),r.Vb(),r.Wb(32,"div",14),r.Ec(33),r.jc(34,"async"),r.jc(35,"async"),r.Vb(),r.Vb(),r.Wb(36,"div",12),r.Wb(37,"div",13),r.Wb(38,"b"),r.Ec(39,"Email: "),r.Vb(),r.Vb(),r.Wb(40,"div",15),r.Ec(41),r.jc(42,"async"),r.Vb(),r.Vb(),r.Wb(43,"div",12),r.Wb(44,"div",13),r.Wb(45,"b"),r.Ec(46,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i: "),r.Vb(),r.Vb(),r.Wb(47,"div",15),r.Ec(48),r.jc(49,"async"),r.Vb(),r.Vb(),r.Wb(50,"div",12),r.Wb(51,"div",13),r.Wb(52,"b"),r.Ec(53,"Ghi ch\xfa: "),r.Vb(),r.Vb(),r.Wb(54,"div",15),r.Ec(55),r.jc(56,"async"),r.Vb(),r.Vb(),r.Vb(),r.Wb(57,"div",11),r.Wb(58,"div",12),r.Wb(59,"div",16),r.Wb(60,"div",17),r.ec("click",(function(){return r.vc(e),r.ic().goBack()})),r.Rb(61,"i",18),r.Ec(62," Quay l\u1ea1i"),r.Vb(),r.Vb(),r.Wb(63,"div",19),r.Wb(64,"div",20),r.ec("click",(function(){return r.vc(e),r.ic().OpenDeleteModal()})),r.Wb(65,"span",21),r.Ec(66,"X\xf3a b\u1ecf"),r.Vb(),r.Vb(),r.Wb(67,"div",22),r.ec("click",(function(){return r.vc(e),r.ic().OpenChangePasswordModal()})),r.Wb(68,"span"),r.Ec(69,"\u0110\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Tb()}if(2&e){const e=r.ic();var n;const t=(null==(n=r.kc(5,9,e.detail_account$))?null:n.image)||"assets/images/default-avatar.png";var o=null;const u=1==(null==(o=r.kc(7,11,e.detail_account$))||null==o.account||null==o.account.role?null:o.account.role.role_id)||2==(null==(o=r.kc(8,13,e.detail_account$))||null==o.account||null==o.account.role?null:o.account.role.role_id);var i;const p=3==(null==(i=r.kc(10,15,e.detail_account$))||null==i.account||null==i.account.role?null:i.account.role.role_id);var c,a,l,b,s,d=null;r.Db(4),r.oc("src",t,r.xc),r.Db(2),r.oc("ngIf",u),r.Db(3),r.oc("ngIf",p),r.Db(9),r.Fc(r.kc(19,17,null==(c=r.kc(20,19,e.detail_account$))?null:c.account_id)||"-"),r.Db(8),r.Fc((null==(a=r.kc(27,21,e.detail_account$))?null:a.account_name)||"-"),r.Db(7),r.Fc(("user"==(null==(d=r.kc(34,23,e.detail_account$))||null==d.account||null==d.account.role?null:d.account.role.role_name)?"Kh\xe1ch h\xe0ng":"admin"==(null==(d=r.kc(35,25,e.detail_account$))||null==d.account||null==d.account.role?null:d.account.role.role_name)?"Nh\xe2n vi\xean":"Qu\u1ea3n l\xfd")||"-"),r.Db(8),r.Fc((null==(l=r.kc(42,27,e.detail_account$))?null:l.email)||"-"),r.Db(7),r.Fc((null==(b=r.kc(49,29,e.detail_account$))?null:b.phone)||"-"),r.Db(7),r.Fc((null==(s=r.kc(56,31,e.detail_account$))?null:s.note)||"-")}}function Me(e,t){if(1&e){const e=r.Xb();r.Wb(0,"div",25),r.Wb(1,"div",5),r.Wb(2,"div",11),r.Rb(3,"img",26),r.Vb(),r.Vb(),r.Wb(4,"div",10),r.Wb(5,"div",11),r.Wb(6,"div",12),r.Wb(7,"div",16),r.Wb(8,"b"),r.Ec(9,"H\u1ecd: "),r.Vb(),r.Vb(),r.Wb(10,"div",15),r.Rb(11,"input",27),r.Vb(),r.Vb(),r.Wb(12,"div",12),r.Wb(13,"div",16),r.Wb(14,"b"),r.Ec(15,"T\xean: "),r.Vb(),r.Vb(),r.Wb(16,"div",15),r.Rb(17,"input",28),r.Vb(),r.Vb(),r.Wb(18,"div",12),r.Wb(19,"div",16),r.Wb(20,"b"),r.Ec(21,"Email: "),r.Vb(),r.Vb(),r.Wb(22,"div",15),r.Rb(23,"input",29),r.Vb(),r.Vb(),r.Wb(24,"div",12),r.Wb(25,"div",16),r.Wb(26,"b"),r.Ec(27,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i: "),r.Vb(),r.Vb(),r.Wb(28,"div",15),r.Rb(29,"input",30),r.Vb(),r.Vb(),r.Wb(30,"div",12),r.Wb(31,"div",16),r.Wb(32,"b"),r.Ec(33,"Ng\xe0y sinh: "),r.Vb(),r.Vb(),r.Wb(34,"div",15),r.Rb(35,"input",31),r.Vb(),r.Vb(),r.Wb(36,"div",12),r.Wb(37,"div",16),r.Wb(38,"b"),r.Ec(39,"\u0110\u1ecba ch\u1ec9: "),r.Vb(),r.Vb(),r.Wb(40,"div",15),r.Rb(41,"input",32),r.Vb(),r.Vb(),r.Wb(42,"div",12),r.Wb(43,"div",16),r.Wb(44,"b"),r.Ec(45,"Gi\u1edbi t\xednh: "),r.Vb(),r.Vb(),r.Wb(46,"div",15),r.Wb(47,"select",33),r.Wb(48,"option",34),r.Ec(49,"Ch\u1ecdn gi\u1edbi t\xednh"),r.Vb(),r.Wb(50,"option",35),r.Ec(51,"Nam"),r.Vb(),r.Wb(52,"option",36),r.Ec(53,"N\u1eef"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(54,"div",12),r.Wb(55,"div",16),r.Wb(56,"b"),r.Ec(57,"Ghi ch\xfa: "),r.Vb(),r.Vb(),r.Wb(58,"div",15),r.Rb(59,"textarea",37),r.Vb(),r.Vb(),r.Vb(),r.Wb(60,"div",11),r.Wb(61,"div",12),r.Wb(62,"div",16),r.Wb(63,"div",17),r.ec("click",(function(){return r.vc(e),r.ic().goBack()})),r.Rb(64,"i",18),r.Ec(65," Quay l\u1ea1i"),r.Vb(),r.Vb(),r.Wb(66,"div",19),r.Wb(67,"div",38),r.ec("click",(function(){return r.vc(e),r.ic().setupDataForm()})),r.Wb(68,"span",39),r.Ec(69,"H\u1ee7y"),r.Vb(),r.Vb(),r.Wb(70,"div",22),r.ec("click",(function(){return r.vc(e),r.ic().UpdateAccount()})),r.Wb(71,"span"),r.Ec(72,"X\xe1c nh\u1eadn"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb()}if(2&e){const e=r.ic();r.oc("formGroup",e.updateAccountForm)}}let De=(()=>{class e{constructor(e,t,n,o,i,c,r,a,l){this.accountQuery=e,this.accountService=t,this.router=n,this.fb=o,this.ref=i,this.route=c,this.modalController=r,this.accountStore=a,this.datePipe=l,this.filter={page:1,per_page:1e3},this.isEditing=!1,this.detail_account$=this.accountQuery.detail_account$,this.updateAccountForm=this.fb.group({account_id:[""],account_name:[""],student_code:[""],last_name:[""],first_name:[""],email:[""],phone:[""],birth_date:[""],address:[""],gender:[""],note:[""]})}ngOnInit(){return Object(u.a)(this,void 0,void 0,(function*(){const e={account_id:parseInt(this.route.snapshot.params.id)},t=(yield this.accountService.SearchAccounts(e))[0];this.accountService.SetDetailAccount(t),console.log(t)}))}ngOnChanges(){return Object(u.a)(this,void 0,void 0,(function*(){}))}onClickUpdateBtn(){return Object(u.a)(this,void 0,void 0,(function*(){if(this.isEditing){let e=this.updateAccountForm.value;yield this.accountService.UpdateAccount(e)}else this.toggleEdit(),this.setupDataForm()}))}goBack(){this.isEditing?this.toggleEdit():this.router.navigateByUrl("admin/account-management/account-list")}ViewToCustomer(){this.router.navigateByUrl("admin/customer-management/customer-detail/"+this.accountQuery.getValue().detail_account.customer_id)}ViewToEmployee(){this.router.navigateByUrl("admin/employee-management/employee-detail/"+this.accountQuery.getValue().detail_account.employee_id)}toggleEdit(){this.isEditing=!this.isEditing}setupDataForm(){let e=this.accountQuery.getValue().detail_account;this.updateAccountForm.patchValue({first_name:null==e?void 0:e.first_name,last_name:null==e?void 0:e.last_name,account_id:null==e?void 0:e.account_id,account_name:(null==e?void 0:e.last_name)+" "+(null==e?void 0:e.first_name),email:null==e?void 0:e.email,address:null==e?void 0:e.address,phone:null==e?void 0:e.phone,gender:null==e?void 0:e.gender,birth_date:this.datePipe.transform(null==e?void 0:e.birth_day,"yyyy-MM-dd"),note:null==e?void 0:e.note})}OpenAddSupplierModal(){}get account_detail_in_store(){return this.accountQuery.getValue().detail_account.supplier.supplier_id}UpdateAccount(){return Object(u.a)(this,void 0,void 0,(function*(){let e=this.updateAccountForm.value,t=Object.assign(Object.assign({},e),{account_id:this.accountStore.getValue().detail_account.account.account_id,gender:"true"==e.gender});try{let e=yield this.accountService.UpdateAccount(t);this.accountStore.update({detail_account:e}),toastr.success("C\u1eadp nh\u1eadt s\xe1ch th\xe0nh c\xf4ng."),this.router.navigateByUrl("admin/account-management/account-list")}catch(n){toastr.error("C\u1eadp nh\u1eadt s\xe1ch th\u1ea5t b\u1ea1i.",n.msg||n.message)}}))}OpenDeleteModal(){const e=this.modalController.create({component:we,componentProps:{account:this.accountQuery.getValue().detail_account.account}});e.show().then(),e.onDismiss().then(e=>Object(u.a)(this,void 0,void 0,(function*(){if(e)try{yield this.accountService.DeleteAccountById(e.account_id),this.router.navigateByUrl("admin/account-management/account-list"),toastr.success("B\u1ea1n \u0111\xe3 x\xf3a t\xe0i kho\u1ea3n th\xe0nh c\xf4ng")}catch(t){toastr.error("X\xf3a t\xe0i kho\u1ea3n kh\xf4ng th\xe0nh th\xf4ng",t.code||t.message)}})))}OpenChangePasswordModal(){this.modalController.create({component:Z,cssClass:"modal-lg",componentProps:{account_id:this.accountQuery.getValue().detail_account.account.account_id}}).show().then()}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(K.a),r.Qb(H.a),r.Qb(o.g),r.Qb(D.d),r.Qb(r.h),r.Qb(o.a),r.Qb(P.a),r.Qb(re.a),r.Qb(c.e))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-account-detail"]],features:[r.Cb([c.e]),r.Bb],decls:10,vars:5,consts:[[1,"d-flex","justify-content-center","align-items-center","text-app","font-weight-bold"],[1,"font-weight-bold"],[4,"ngIf","ngIfElse"],["updateForm",""],[1,"d-flex","flex-row","p-5","mb-4"],[1,"avatar","col-3","mb-4"],[1,"d-flex","flex-column","app-flex"],["alt","Avatar",2,"height","400px","width","300px","object-fit","cover",3,"src"],["class","text-app text-left font-weight-bold text-center my-4",4,"ngIf"],["class","text-app text-left  font-weight-bold text-center my-4",4,"ngIf"],[1,"col-9","d-flex","flex-column"],[1,"d-flex","flex-column"],[1,"row","py-3"],[1,"col-2","text-center","font-weight-bold"],[1,"col-9","text-app","font-weight-bold"],[1,"col-9"],[1,"col-2","app-flex"],[1,"btn","btn-outline-app",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-left","pr-1"],[1,"col-9","d-flex","flex-row","justify-content-end"],[1,"btn-danger","align-self-center","mr-1",3,"click"],[2,"width","60px"],[1,"btn-app","align-self-center",3,"click"],[1,"text-app","text-left","font-weight-bold","text-center","my-4"],[1,"cursor-pointer",3,"click"],[1,"d-flex","flex-row","p-5","mb-4",3,"formGroup"],["src","assets/images/default-book.png","alt","Avatar",2,"height","390px","width","390px","object-fit","cover"],["type","text","placeholder","Nh\u1eadp h\u1ecd","formControlName","last_name",1,"form-control"],["type","text","placeholder","Nh\u1eadp t\xean","formControlName","first_name",1,"form-control"],["type","text","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9 email","formControlName","email",1,"form-control"],["type","text","placeholder","Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phone",1,"form-control"],["type","date","placeholder","Nh\u1eadp v\xe0o ng\xe0y sinh","formControlName","birth_date",1,"form-control"],["type","text","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9","formControlName","address",1,"form-control"],["placeholder","Ch\u1ecdn gi\u1edbi t\xednh","formControlName","gender",1,"form-control"],["value","","selected","","autofocus","","disabled",""],["value","true",2,"background-color","white","color","var(--app-color)"],["value","false",2,"background-color","white","color","var(--app-color)"],["placeholder","Nh\u1eadp ghi ch\xfa","formControlName","note",1,"form-control"],[1,"btn-outline-app","align-self-center","mr-2",3,"click"],[1,"ml-1",2,"width","60px"]],template:function(e,t){if(1&e&&(r.Ub(0),r.Wb(1,"div",0),r.Wb(2,"h1",1),r.Ec(3,"Th\xf4ng tin chi ti\u1ebft t\xe0i kho\u1ea3n "),r.Wb(4,"span"),r.Ec(5),r.jc(6,"async"),r.Vb(),r.Vb(),r.Vb(),r.Cc(7,Oe,70,33,"ng-container",2),r.Cc(8,Me,73,1,"ng-template",null,3,r.Dc),r.Tb()),2&e){const e=r.tc(9);var n;r.Db(5),r.Fc(null==(n=r.kc(6,3,t.detail_account$))||null==n.account?null:n.account.account_name),r.Db(2),r.oc("ngIf",!t.isEditing)("ngIfElse",e)}},directives:[c.m,D.n,D.h,D.c,D.m,D.g,D.u,D.q,D.w],pipes:[c.b,g.b],styles:[""]}),e})(),je=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["app-account-row"]],inputs:{account_item:"account_item",index:"index"},decls:12,vars:6,consts:[[1,"item-row","py-2"],[1,"row"],[1,"col","align-self-center","text-center","text-app","font-weight-bold",2,"max-width","150px"],[1,"col","align-self-center","text-center","font-weight-bold"],[1,"col","align-self-center","text-center",2,"max-width","300px"],[1,"col","align-self-center","text-center"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"div",2),r.Ec(3),r.jc(4,"standardizedId"),r.Vb(),r.Wb(5,"div",3),r.Wb(6,"b"),r.Ec(7),r.Vb(),r.Vb(),r.Wb(8,"div",4),r.Ec(9),r.Vb(),r.Wb(10,"div",5),r.Ec(11),r.Vb(),r.Vb(),r.Vb()),2&e&&(r.Db(3),r.Fc(r.kc(4,4,null==t.account_item?null:t.account_item.account_id)),r.Db(4),r.Fc((null==t.account_item?null:t.account_item.account_name)||"-"),r.Db(2),r.Fc(("user"==(null==t.account_item||null==t.account_item.role?null:t.account_item.role.role_name)?"Kh\xe1ch h\xe0ng":"admin"==(null==t.account_item||null==t.account_item.role?null:t.account_item.role.role_name)?"Nh\xe2n vi\xean":"Qu\u1ea3n l\xfd")||"-"),r.Db(2),r.Fc((null==t.account_item?null:t.account_item.note)||"-"))},pipes:[g.b],styles:[".item-row[_ngcontent-%COMP%]{display:flex;transition:.5s;padding-left:36px;height:100px;cursor:pointer;align-self:center!important;flex-direction:column;justify-content:center;box-shadow:3px 3px 8px 3px rgba(122,159,216,.2);margin-bottom:20px}.item-row[_ngcontent-%COMP%]:hover{background-color:#e4e4e4;border-left:7px solid var(--app-color)}.item-row[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{position:relative;display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;overflow:hidden;line-height:22px}.item-row[_ngcontent-%COMP%]   .trash-icon[_ngcontent-%COMP%]{border-radius:50%;padding:5px;background-color:#f5f5f5}.item-row[_ngcontent-%COMP%]   .trash-can[_ngcontent-%COMP%]{padding:3px 20px 3px 2px;border-radius:30px;margin-bottom:5px;display:flex;width:auto;align-items:center;flex-direction:row;justify-content:center}.item-row[_ngcontent-%COMP%]   .trash-can[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;color:#f5f5f5;margin-left:10px;font-size:.8rem}"]}),e})();function Pe(e,t){}function Te(e,t){1&e&&(r.Wb(0,"p"),r.Ec(1,"Day la the item n\xe0"),r.Vb())}function Se(e,t){if(1&e&&(r.Wb(0,"option",18),r.Ec(1),r.Wb(2,"div",19),r.Rb(3,"i",20),r.Vb(),r.Vb()),2&e){const e=t.$implicit;r.oc("ngValue",e.role_id),r.Db(1),r.Gc(" ",null==e?null:e.role_name," ")}}function Fe(e,t){if(1&e){const e=r.Xb();r.Ub(0),r.Wb(1,"app-account-row",21),r.ec("click",(function(){r.vc(e);const n=t.$implicit;return r.ic(2).onViewAccountDetail(n.account_id)})),r.Vb(),r.Tb()}if(2&e){const e=t.$implicit,n=t.index;r.Db(1),r.oc("account_item",e)("index",n)}}function Qe(e,t){if(1&e){const e=r.Xb();r.Wb(0,"div",3),r.Rb(1,"input",4),r.Rb(2,"input",5),r.Wb(3,"select",6),r.Wb(4,"option",7),r.Ec(5,"Ch\u1ecdn vai tr\xf2 "),r.Vb(),r.Cc(6,Se,4,2,"option",8),r.jc(7,"async"),r.Vb(),r.Wb(8,"div",9),r.ec("click",(function(){return r.vc(e),r.ic().search()})),r.Ec(9,"T\xecm ki\u1ebfm"),r.Vb(),r.Vb(),r.Wb(10,"div",10),r.Wb(11,"div",11),r.Wb(12,"div",12),r.Wb(13,"div",13),r.Ec(14,"M\xe3 t\xe0i kho\u1ea3n"),r.Vb(),r.Wb(15,"div",14),r.Ec(16,"T\xean t\xe0i kho\u1ea3n"),r.Vb(),r.Wb(17,"div",15),r.Ec(18,"Vai tr\xf2"),r.Vb(),r.Wb(19,"div",14),r.Ec(20,"Ghi ch\xfa"),r.Vb(),r.Vb(),r.Vb(),r.Cc(21,Fe,2,2,"ng-container",16),r.jc(22,"async"),r.Wb(23,"app-page-pagination",17),r.ec("navigate",(function(t){return r.vc(e),r.ic().navigate(t)})),r.jc(24,"async"),r.Vb(),r.Vb()}if(2&e){const e=r.ic();var n=null;const t=null==(n=r.kc(22,7,e.account_list$))?null:n.items.slice().reverse();r.oc("formGroup",e.searchForm),r.Db(6),r.oc("ngForOf",r.kc(7,5,e.roles$)),r.Db(15),r.oc("ngForOf",t),r.Db(2),r.oc("paginationOpt",e.current_pagination_opt$)("currentPage",r.kc(24,9,e.current_page$))}}let Ne=(()=>{class e{constructor(e,t,n,o,i,c){this.fb=e,this.router=t,this.ref=n,this.accountQuery=o,this.accountStore=i,this.accountService=c,this.account_list$=this.accountQuery.account_list_view$,this.current_pagination_opt$=this.accountQuery.current_pagination_opt$,this.current_page$=this.accountQuery.current_page$,this.roles$=this.accountQuery.roles$,this.currentPaginationOpt=new y.c,this.searchForm=this.fb.group({role_id:"",account_id:"",account_name:""})}ngOnInit(){return Object(u.a)(this,void 0,void 0,(function*(){yield this.onRequestNewPage()}))}onRequestNewPage(){return Object(u.a)(this,void 0,void 0,(function*(){yield this.accountService.GetAccounts(this.accountQuery.getValue().filter_page).then(()=>{this.accountService.setupPagination()})}))}navigate(e){return Object(u.a)(this,void 0,void 0,(function*(){this.accountService.navigate(e),yield this.onRequestNewPage()}))}onViewAccountDetail(e){this.router.navigateByUrl("/admin/account-management/account-detail/"+e)}search(){return Object(u.a)(this,void 0,void 0,(function*(){let{account_id:e,account_name:t,role_id:n}=this.searchForm.value;if(!e&&!t&&!n)return yield this.onRequestNewPage();const o={account_id:e||null,account_name:t||null,role_id:n||null};let i=yield this.accountService.SearchAccounts(o);this.accountStore.update({account_list_view:{items:i,has_next:!1,has_prev:!1,current_page:1}})}))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(D.d),r.Qb(o.g),r.Qb(r.h),r.Qb(K.a),r.Qb(re.a),r.Qb(H.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-account-list"]],decls:7,vars:0,consts:[["header",""],["emptyItem",""],["item",""],[1,"search-form","row","app-flex","mb-3",3,"formGroup"],["type","text","placeholder","Nh\u1eadp m\xe3 t\xe0i kho\u1ea3n","formControlName","account_id",1,"form-control","rounded-pill","col-2","p-4","mr-3"],["type","text","placeholder","Nh\u1eadp t\xean t\xe0i kho\u1ea3n","formControlName","account_name",1,"form-control","rounded-pill","col-2","p-4","mr-3"],["name","role","formControlName","role_id",1,"form-control","col-2","p-2","rounded-pill","mr-3"],["value","","selected",""],["class","font-weight-bold",3,"ngValue",4,"ngFor","ngForOf"],[1,"btn-app","rounded-pill","col-1",3,"click"],[1,"d-flex","flex-column","h-100"],[1,"table","mt-3"],[1,"table-header","row","font-weight-bold","text-uppercase","ng-star-inserted","align-items-center","my-3"],[1,"col","text-center","text-app",2,"max-width","150px"],[1,"col","text-center","text-app"],[1,"col","text-center","text-app",2,"max-width","300px"],[4,"ngFor","ngForOf"],[1,"mt-auto",3,"paginationOpt","currentPage","navigate"],[1,"font-weight-bold",3,"ngValue"],[1,"px-3","py-2"],[1,"fa","fa-plus"],[3,"account_item","index","click"]],template:function(e,t){1&e&&(r.Wb(0,"app-item-table"),r.Cc(1,Pe,0,0,"ng-template",null,0,r.Dc),r.Cc(3,Te,2,0,"ng-template",null,1,r.Dc),r.Cc(5,Qe,25,11,"ng-template",null,2,r.Dc),r.Vb())},directives:[B,D.n,D.h,D.c,D.m,D.g,D.u,D.q,D.w,c.l,y.b,je],pipes:[c.b],styles:[".table-header[_ngcontent-%COMP%]{padding-left:36px}"]}),e})();function Re(e,t){if(1&e&&(r.Ub(0),r.Wb(1,"a",4),r.jc(2,"async"),r.Ec(3),r.Vb(),r.Tb()),2&e){const e=t.$implicit,o=r.ic();var n=null;const i="role-list"==(null==e?null:e.url)&&1!=(null==(n=r.kc(2,4,o.auth_info$))||null==n.account?null:n.account.account_id);r.Db(1),r.Gb("hidden",i),r.oc("routerLink",e.url),r.Db(2),r.Fc(e.itemName)}}let $e=(()=>{class e{constructor(e){this.accountQuery=e,this.headerItems=[{itemName:"Danh s\xe1ch t\xe0i kho\u1ea3n",url:"account-list"},{itemName:"T\u1ea1o m\u1edbi th\xf4ng tin t\xe0i kho\u1ea3n",url:"create-account"},{itemName:"Danh s\xe1ch kh\xe1ch h\xe0ng",url:"customer-list"},{itemName:"Danh s\xe1ch nh\xe2n vi\xean",url:"employee-list"},{itemName:"Danh s\xe1ch vai tr\xf2",url:"role-list"}],this.auth_info$=this.accountQuery.auth_info$}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(K.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-account-management"]],decls:6,vars:1,consts:[[1,"p-0","pl-2","header-admin","d-flex","align-items-center"],[1,"page-title","font-weight-bold","pl-4","mr-5"],[4,"ngFor","ngForOf"],[1,"page-content-admin","p-4"],["routerLinkActive","active",1,"header-item",3,"routerLink"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Ec(2," Qu\u1ea3n l\xfd t\xe0i kho\u1ea3n "),r.Vb(),r.Cc(3,Re,4,6,"ng-container",2),r.Vb(),r.Wb(4,"div",3),r.Rb(5,"router-outlet"),r.Vb()),2&e&&(r.Db(3),r.oc("ngForOf",t.headerItems))},directives:[c.l,o.l,o.j,o.i],pipes:[c.b],styles:[".hidden[_ngcontent-%COMP%]{display:none}"]}),e})();var Ie=n("4nPG");let Be=(()=>{class e{constructor(e,t,n){this.fb=e,this.router=t,this.supplierService=n,this.filter={page:1,per_page:1e3},this.createSupplierForm=this.fb.group({supplier_id:[""],contact_name:[""],address:[""],phone:[""],email:[""],note:[""]})}ngOnInit(){return Object(u.a)(this,void 0,void 0,(function*(){}))}onCreateUser(){return Object(u.a)(this,void 0,void 0,(function*(){}))}ResetDataForm(){this.createSupplierForm.patchValue({supplier_id:"",contact_name:"",address:"",phone:"",email:"",note:""})}CreateSupplier(){return Object(u.a)(this,void 0,void 0,(function*(){let e=this.createSupplierForm.value;if(e.contact_name&&e.address&&e.phone&&e.email)try{let t=yield this.supplierService.CreateSupplier(e);this.router.navigateByUrl("/admin/supplier-management/supplier-detail/"+t.supplier_id),toastr.success("T\u1ea1o m\u1edbi nh\xe0 cung c\u1ea5p th\xe0nh c\xf4ng.")}catch(t){toastr.error("T\u1ea1o m\u1edbi nh\xe0 cung c\u1ea5p th\u1ea5t b\u1ea1i",t.msg||t.message)}else toastr.error("T\u1ea1o m\u1edbi nh\xe0 cung c\u1ea5p th\u1ea5t b\u1ea1i.","Vui l\xf2ng nh\u1eadp \u0111\u1ea7y \u0111\u1ee7 th\xf4ng tin nh\xe0 cung c\u1ea5p.")}))}goBack(){this.router.navigateByUrl("admin/supplier-management/supplier-list")}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(D.d),r.Qb(o.g),r.Qb(Ie.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-create-supplier"]],decls:50,vars:1,consts:[[1,""],[1,"d-flex","justify-content-center","align-items-center","text-app","font-weight-bold"],[1,"font-weight-bold"],[1,"d-flex","flex-row","p-5","mb-4","app-flex",3,"formGroup"],[1,"col-9","d-flex","flex-column"],[1,"d-flex","flex-column"],[1,"row","py-3"],[1,"col-2","app-flex"],[1,"col-9"],["type","text","placeholder","Nh\u1eadp t\xean nh\xe0 cung c\u1ea5p","formControlName","contact_name",1,"form-control"],["type","text","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9 nh\xe0 cung c\u1ea5p","formControlName","address",1,"form-control"],["type","text","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9 email ","formControlName","email",1,"form-control"],["type","text","placeholder","Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phone",1,"form-control"],["placeholder","Nh\u1eadp ghi ch\xfa","formControlName","note",1,"form-control"],[1,"btn","btn-outline-app",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-left","pr-1"],[1,"col-9","d-flex","flex-row","justify-content-end"],[1,"btn-outline-app","align-self-center","mr-2",3,"click"],[1,"ml-1",2,"width","60px"],[1,"btn-app","align-self-center",3,"click"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"h1",2),r.Ec(3,"\u0110\u0103ng k\xfd nh\xe0 cung c\u1ea5p m\u1edbi"),r.Vb(),r.Vb(),r.Wb(4,"div",3),r.Wb(5,"div",4),r.Wb(6,"div",5),r.Wb(7,"div",6),r.Wb(8,"div",7),r.Wb(9,"b"),r.Ec(10,"T\xean nh\xe0 cung c\u1ea5p: "),r.Vb(),r.Vb(),r.Wb(11,"div",8),r.Rb(12,"input",9),r.Vb(),r.Vb(),r.Wb(13,"div",6),r.Wb(14,"div",7),r.Wb(15,"b"),r.Ec(16,"\u0110\u1ecba ch\u1ec9: "),r.Vb(),r.Vb(),r.Wb(17,"div",8),r.Rb(18,"input",10),r.Vb(),r.Vb(),r.Wb(19,"div",6),r.Wb(20,"div",7),r.Wb(21,"b"),r.Ec(22,"Email: "),r.Vb(),r.Vb(),r.Wb(23,"div",8),r.Rb(24,"input",11),r.Vb(),r.Vb(),r.Wb(25,"div",6),r.Wb(26,"div",7),r.Wb(27,"b"),r.Ec(28,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i: "),r.Vb(),r.Vb(),r.Wb(29,"div",8),r.Rb(30,"input",12),r.Vb(),r.Vb(),r.Wb(31,"div",6),r.Wb(32,"div",7),r.Wb(33,"b"),r.Ec(34,"Ghi ch\xfa: "),r.Vb(),r.Vb(),r.Wb(35,"div",8),r.Rb(36,"textarea",13),r.Vb(),r.Vb(),r.Vb(),r.Wb(37,"div",5),r.Wb(38,"div",6),r.Wb(39,"div",7),r.Wb(40,"div",14),r.ec("click",(function(){return t.goBack()})),r.Rb(41,"i",15),r.Ec(42," Quay l\u1ea1i"),r.Vb(),r.Vb(),r.Wb(43,"div",16),r.Wb(44,"div",17),r.ec("click",(function(){return t.ResetDataForm()})),r.Wb(45,"span",18),r.Ec(46,"H\u1ee7y"),r.Vb(),r.Vb(),r.Wb(47,"div",19),r.ec("click",(function(){return t.CreateSupplier()})),r.Wb(48,"span"),r.Ec(49,"T\u1ea1o m\u1edbi"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb()),2&e&&(r.Db(4),r.oc("formGroup",t.createSupplierForm))},directives:[D.n,D.h,D.c,D.m,D.g],styles:[".detail-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{height:39px;box-sizing:border-box}"]}),e})();var Ae=n("dgQk"),Ge=n("fVBm");let Ue=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["app-supplier-row"]],inputs:{supplier_item:"supplier_item",index:"index"},decls:16,vars:8,consts:[[1,"item-row","py-2"],[1,"row"],[1,"col","align-self-center","text-center","text-app","font-weight-bold",2,"max-width","150px"],[1,"col","align-self-center","text-center"],[1,"col","align-self-center","text-center",2,"max-width","300px"],[1,"col","align-self-center","text-center",2,"max-width","200px"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"div",2),r.Ec(3),r.jc(4,"standardizedId"),r.Vb(),r.Wb(5,"div",3),r.Wb(6,"b"),r.Ec(7),r.Vb(),r.Vb(),r.Wb(8,"div",3),r.Ec(9),r.Vb(),r.Wb(10,"div",4),r.Ec(11),r.Vb(),r.Wb(12,"div",5),r.Ec(13),r.Vb(),r.Wb(14,"div",3),r.Ec(15),r.Vb(),r.Vb(),r.Vb()),2&e&&(r.Db(3),r.Fc(r.kc(4,6,null==t.supplier_item?null:t.supplier_item.supplier_id)),r.Db(4),r.Gc(" ",(null==t.supplier_item?null:t.supplier_item.contact_name)||"-"," "),r.Db(2),r.Fc((null==t.supplier_item?null:t.supplier_item.address)||"-"),r.Db(2),r.Fc((null==t.supplier_item?null:t.supplier_item.email)||"-"),r.Db(2),r.Gc(" ",(null==t.supplier_item?null:t.supplier_item.phone)||"-"," "),r.Db(2),r.Fc((null==t.supplier_item?null:t.supplier_item.note)||"-"))},pipes:[g.b],styles:[".item-row[_ngcontent-%COMP%]{display:flex;transition:.5s;padding-left:36px;height:100px;cursor:pointer;align-self:center!important;flex-direction:column;justify-content:center;box-shadow:3px 3px 8px 3px rgba(122,159,216,.2);margin-bottom:20px}.item-row[_ngcontent-%COMP%]:hover{background-color:#e4e4e4}.item-row[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{position:relative;display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;overflow:hidden;line-height:22px}.item-row[_ngcontent-%COMP%]   .trash-icon[_ngcontent-%COMP%]{border-radius:50%;padding:5px;background-color:#f5f5f5}.item-row[_ngcontent-%COMP%]   .trash-can[_ngcontent-%COMP%]{padding:3px 20px 3px 2px;border-radius:30px;margin-bottom:5px;display:flex;width:auto;align-items:center;flex-direction:row;justify-content:center}.item-row[_ngcontent-%COMP%]   .trash-can[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;color:#f5f5f5;margin-left:10px;font-size:.8rem}"]}),e})();function Le(e,t){}function ze(e,t){1&e&&(r.Wb(0,"p"),r.Ec(1,"Day la the item n\xe0"),r.Vb())}function Xe(e,t){if(1&e){const e=r.Xb();r.Ub(0),r.Wb(1,"app-supplier-row",17),r.ec("click",(function(){r.vc(e);const n=t.$implicit;return r.ic(2).onViewSupplierDetail(n.supplier_id)})),r.Vb(),r.Tb()}if(2&e){const e=t.$implicit,n=t.index;r.Db(1),r.oc("supplier_item",e)("index",n)}}function qe(e,t){if(1&e){const e=r.Xb();r.Wb(0,"div",3),r.Rb(1,"input",4),r.Rb(2,"input",5),r.Rb(3,"input",6),r.Wb(4,"div",7),r.ec("click",(function(){return r.vc(e),r.ic().search()})),r.Ec(5,"T\xecm ki\u1ebfm"),r.Vb(),r.Vb(),r.Wb(6,"div",8),r.Wb(7,"div",9),r.Wb(8,"div",10),r.Wb(9,"div",11),r.Ec(10,"M\xe3 nh\xe0 cung c\u1ea5p"),r.Vb(),r.Wb(11,"div",12),r.Ec(12,"T\xean nh\xe0 cung c\u1ea5p"),r.Vb(),r.Wb(13,"div",12),r.Ec(14,"\u0110\u1ecba ch\u1ec9"),r.Vb(),r.Wb(15,"div",13),r.Ec(16,"Email"),r.Vb(),r.Wb(17,"div",14),r.Ec(18,"Phone"),r.Vb(),r.Wb(19,"div",12),r.Ec(20,"Ghi ch\xfa"),r.Vb(),r.Vb(),r.Vb(),r.Cc(21,Xe,2,2,"ng-container",15),r.jc(22,"async"),r.Wb(23,"app-page-pagination",16),r.ec("navigate",(function(t){return r.vc(e),r.ic().navigate(t)})),r.jc(24,"async"),r.Vb(),r.Vb()}if(2&e){const e=r.ic();var n=null;const t=null==(n=r.kc(22,4,e.supplier_list$))?null:n.items.slice().reverse();r.oc("formGroup",e.searchForm),r.Db(21),r.oc("ngForOf",t),r.Db(2),r.oc("paginationOpt",e.current_pagination_opt$)("currentPage",r.kc(24,6,e.current_page$))}}let Ke=(()=>{class e{constructor(e,t,n,o,i,c){this.fb=e,this.router=t,this.supplierService=n,this.supplierQuery=o,this.supplierStore=i,this.ref=c,this.supplier_list$=this.supplierQuery.supplier_list_view$,this.current_pagination_opt$=this.supplierQuery.current_pagination_opt$,this.current_page$=this.supplierQuery.current_page$,this.currentPaginationOpt=new y.c,this.searchForm=this.fb.group({supplier_id:"",supplier_name:"",email:""})}ngOnInit(){return Object(u.a)(this,void 0,void 0,(function*(){yield this.onRequestNewPage()}))}onRequestNewPage(){return Object(u.a)(this,void 0,void 0,(function*(){yield this.supplierService.GetSuppliers(this.supplierQuery.getValue().filter_page).then(()=>{this.supplierService.setupPagination()})}))}navigate(e){return Object(u.a)(this,void 0,void 0,(function*(){this.supplierService.navigate(e),yield this.onRequestNewPage()}))}onViewSupplierDetail(e){this.router.navigateByUrl("/admin/supplier-management/supplier-detail/"+e)}search(){return Object(u.a)(this,void 0,void 0,(function*(){let{supplier_id:e,supplier_name:t,email:n}=this.searchForm.value;if(!e&&!t&&!n)return yield this.onRequestNewPage();const o={supplier_id:e||null,contact_name:t||null,email:n||null};let i=yield this.supplierService.SearchSuppliers(o);this.supplierStore.update({supplier_list_view:{items:i,has_next:!1,has_prev:!1,current_page:1}})}))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(D.d),r.Qb(o.g),r.Qb(Ie.a),r.Qb(Ae.a),r.Qb(Ge.a),r.Qb(r.h))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-supplier-list"]],decls:7,vars:0,consts:[["header",""],["emptyItem",""],["item",""],[1,"search-form","row","app-flex","mb-3",3,"formGroup"],["type","text","placeholder","Nh\u1eadp m\xe3 nh\xe0 cung c\u1ea5p","formControlName","supplier_id",1,"form-control","rounded-pill","col-2","p-4","mr-3"],["type","text","placeholder","Nh\u1eadp t\xean nh\xe0 cung c\u1ea5p","formControlName","supplier_name",1,"form-control","rounded-pill","col-2","p-4","mr-3"],["type","text","placeholder","Nh\u1eadp email nh\xe0 cung c\u1ea5p","formControlName","email",1,"form-control","rounded-pill","col-2","p-4","mr-3"],[1,"btn-app","rounded-pill","col-1",3,"click"],[1,"d-flex","flex-column","h-100"],[1,"table","mt-3"],[1,"table-header","row","font-weight-bold","text-uppercase","ng-star-inserted","align-items-center","my-3"],[1,"col","text-center","text-app",2,"max-width","150px"],[1,"col","text-center","text-app"],[1,"col","text-center","text-app",2,"max-width","300px"],[1,"col","text-center","text-app",2,"max-width","200px"],[4,"ngFor","ngForOf"],[1,"mt-auto",3,"paginationOpt","currentPage","navigate"],[3,"supplier_item","index","click"]],template:function(e,t){1&e&&(r.Wb(0,"app-item-table"),r.Cc(1,Le,0,0,"ng-template",null,0,r.Dc),r.Cc(3,ze,2,0,"ng-template",null,1,r.Dc),r.Cc(5,qe,25,8,"ng-template",null,2,r.Dc),r.Vb())},directives:[B,D.n,D.h,D.c,D.m,D.g,c.l,y.b,Ue],pipes:[c.b],styles:[".table-header[_ngcontent-%COMP%]{padding-left:36px}"]}),e})(),He=(()=>{class e{constructor(e){this.modalAction=e}ngOnInit(){}onConfirmDelete(){this.modalAction.dismiss(this.employee)}dismissModal(){this.modalAction.dismiss(null)}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(p.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-confirm-delete-employee"]],inputs:{employee:"employee"},decls:17,vars:2,consts:[[1,"modal-header"],[1,"modal-title","big-font"],[1,"close",3,"click"],[1,"text-large"],[1,"modal-body"],[1,"modal-footer"],[1,"btn","btn-app","btn-outline-app",3,"click"],[1,"btn","btn-app","text-white",3,"click"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Ec(2),r.Vb(),r.Wb(3,"div",2),r.ec("click",(function(){return t.dismissModal()})),r.Wb(4,"span",3),r.Ec(5,"\xd7"),r.Vb(),r.Vb(),r.Vb(),r.Wb(6,"div",4),r.Wb(7,"div"),r.Ec(8,"B\u1ea1n c\xf3 th\u1ef1c s\u1ef1 mu\u1ed1n x\xf3a nh\xe2n vi\xean "),r.Wb(9,"b"),r.Ec(10),r.Vb(),r.Ec(11," ra kh\u1ecfi h\u1ec7 th\u1ed1ng th\u01b0 qu\xe1n kh\xf4ng ? "),r.Vb(),r.Vb(),r.Wb(12,"div",5),r.Wb(13,"button",6),r.ec("click",(function(){return t.dismissModal()})),r.Ec(14,"\u0110\xf3ng"),r.Vb(),r.Wb(15,"button",7),r.ec("click",(function(){return t.onConfirmDelete()})),r.Ec(16," X\xe1c nh\u1eadn "),r.Vb(),r.Vb()),2&e&&(r.Db(2),r.Gc(" X\xe1c nh\u1eadn x\xf3a nh\xe2n vi\xean : ",(null==t.employee?null:t.employee.last_name)+" "+(null==t.employee?null:t.employee.first_name)," "),r.Db(8),r.Gc(" ",(null==t.employee?null:t.employee.last_name)+" "+(null==t.employee?null:t.employee.first_name),""))},styles:[""]}),e})();function Je(e,t){1&e&&(r.Wb(0,"div",24),r.Wb(1,"div",25),r.Ec(2," H\u1ee7y "),r.Vb(),r.Wb(3,"div",26),r.Wb(4,"span",27),r.Ec(5,"X\xe1c nh\u1eadn"),r.Vb(),r.Vb(),r.Vb())}function Ze(e,t){if(1&e){const e=r.Xb();r.Ub(0),r.Wb(1,"div",4),r.Wb(2,"div",5),r.Wb(3,"div",6),r.Rb(4,"img",7),r.jc(5,"async"),r.Wb(6,"h1",8),r.Ec(7),r.jc(8,"standardizedId"),r.jc(9,"async"),r.Vb(),r.Vb(),r.Vb(),r.Wb(10,"div",9),r.Wb(11,"div",6),r.Wb(12,"div",10),r.Wb(13,"div",11),r.Wb(14,"b"),r.Ec(15,"M\xe3 nh\xe2n vi\xean: "),r.Vb(),r.Vb(),r.Wb(16,"div",12),r.Ec(17),r.jc(18,"standardizedId"),r.jc(19,"async"),r.Vb(),r.Vb(),r.Wb(20,"div",10),r.Wb(21,"div",11),r.Wb(22,"b"),r.Ec(23,"T\xean nh\xe2n vi\xean: "),r.Vb(),r.Vb(),r.Wb(24,"div",12),r.Ec(25),r.jc(26,"async"),r.jc(27,"async"),r.Vb(),r.Vb(),r.Wb(28,"div",10),r.Wb(29,"div",11),r.Wb(30,"b"),r.Ec(31,"Email: "),r.Vb(),r.Vb(),r.Wb(32,"div",13),r.Ec(33),r.jc(34,"async"),r.Vb(),r.Vb(),r.Wb(35,"div",10),r.Wb(36,"div",11),r.Wb(37,"b"),r.Ec(38,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i: "),r.Vb(),r.Vb(),r.Wb(39,"div",13),r.Ec(40),r.jc(41,"async"),r.Vb(),r.Vb(),r.Wb(42,"div",10),r.Wb(43,"div",11),r.Wb(44,"b"),r.Ec(45,"Ng\xe0y sinh: "),r.Vb(),r.Vb(),r.Wb(46,"div",13),r.Ec(47),r.jc(48,"date"),r.jc(49,"async"),r.Vb(),r.Vb(),r.Wb(50,"div",10),r.Wb(51,"div",11),r.Wb(52,"b"),r.Ec(53,"\u0110\u1ecba ch\u1ec9: "),r.Vb(),r.Vb(),r.Wb(54,"div",13),r.Ec(55),r.jc(56,"async"),r.Vb(),r.Vb(),r.Wb(57,"div",10),r.Wb(58,"div",11),r.Wb(59,"b"),r.Ec(60,"L\u01b0\u01a1ng c\u01a1 s\u1edf: "),r.Vb(),r.Vb(),r.Wb(61,"div",12),r.Ec(62),r.jc(63,"vnd"),r.jc(64,"async"),r.Vb(),r.Vb(),r.Wb(65,"div",10),r.Wb(66,"div",11),r.Wb(67,"b"),r.Ec(68,"Gi\u1edbi t\xednh: "),r.Vb(),r.Vb(),r.Wb(69,"div",13),r.Ec(70),r.jc(71,"async"),r.Vb(),r.Vb(),r.Wb(72,"div",10),r.Wb(73,"div",11),r.Wb(74,"b"),r.Ec(75,"Ghi ch\xfa: "),r.Vb(),r.Vb(),r.Wb(76,"div",13),r.Ec(77),r.jc(78,"async"),r.Vb(),r.Vb(),r.Vb(),r.Wb(79,"div",6),r.Wb(80,"div",10),r.Wb(81,"div",14),r.Wb(82,"div",15),r.ec("click",(function(){return r.vc(e),r.ic().goBack()})),r.Rb(83,"i",16),r.Ec(84," Quay l\u1ea1i"),r.Vb(),r.Vb(),r.Ub(85),r.Wb(86,"div",17),r.ec("click",(function(){return r.vc(e),r.ic().onOpenDeleteModal()})),r.Wb(87,"div",18),r.Rb(88,"i",19),r.Wb(89,"span",20),r.Ec(90,"X\xf3a b\u1ecf"),r.Vb(),r.Vb(),r.Wb(91,"div",21),r.ec("click",(function(){return r.vc(e),r.ic().onClickUpdateBtn()})),r.Rb(92,"i",22),r.Wb(93,"span"),r.Ec(94,"C\u1eadp nh\u1eadt"),r.Vb(),r.Vb(),r.Vb(),r.Tb(),r.Cc(95,Je,6,0,"ng-template",null,23,r.Dc),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Tb()}if(2&e){const e=r.ic();var n;const t=(null==(n=r.kc(5,11,e.detail_employee$))?null:n.image)||"assets/images/default-avatar.png";var o,i,c,a,l,b,s,d,u,p=null;r.Db(4),r.oc("src",t,r.xc),r.Db(3),r.Gc("M\xe3 nh\xe2n vi\xean: ",r.kc(8,13,null==(o=r.kc(9,15,e.detail_employee$))?null:o.employee_id),""),r.Db(10),r.Fc(r.kc(18,17,null==(i=r.kc(19,19,e.detail_employee$))?null:i.employee_id)||"-"),r.Db(8),r.Fc((null==(p=r.kc(26,21,e.detail_employee$))?null:p.last_name)+" "+(null==(p=r.kc(27,23,e.detail_employee$))?null:p.first_name)||"-"),r.Db(8),r.Fc((null==(c=r.kc(34,25,e.detail_employee$))?null:c.email)||"-"),r.Db(7),r.Fc((null==(a=r.kc(41,27,e.detail_employee$))?null:a.phone)||"-"),r.Db(7),r.Fc(r.lc(48,29,null==(l=r.kc(49,32,e.detail_employee$))?null:l.birth_day,"shortDate")),r.Db(8),r.Fc((null==(b=r.kc(56,34,e.detail_employee$))?null:b.address)||"-"),r.Db(7),r.Fc(r.kc(63,36,null==(s=r.kc(64,38,e.detail_employee$))?null:s.basic_rate)||"-"),r.Db(8),r.Fc(null!=(d=r.kc(71,40,e.detail_employee$))&&d.gender?"Nam":"N\u1eef"),r.Db(7),r.Fc((null==(u=r.kc(78,42,e.detail_employee$))?null:u.note)||"-")}}function Ye(e,t){if(1&e){const e=r.Xb();r.Wb(0,"div",28),r.Wb(1,"div",5),r.Wb(2,"div",6),r.Rb(3,"img",29),r.Vb(),r.Vb(),r.Wb(4,"div",9),r.Wb(5,"div",6),r.Wb(6,"div",10),r.Wb(7,"div",14),r.Wb(8,"b"),r.Ec(9,"H\u1ecd: "),r.Vb(),r.Vb(),r.Wb(10,"div",13),r.Rb(11,"input",30),r.Vb(),r.Vb(),r.Wb(12,"div",10),r.Wb(13,"div",14),r.Wb(14,"b"),r.Ec(15,"T\xean: "),r.Vb(),r.Vb(),r.Wb(16,"div",13),r.Rb(17,"input",31),r.Vb(),r.Vb(),r.Wb(18,"div",10),r.Wb(19,"div",14),r.Wb(20,"b"),r.Ec(21,"Email: "),r.Vb(),r.Vb(),r.Wb(22,"div",13),r.Rb(23,"input",32),r.Vb(),r.Vb(),r.Wb(24,"div",10),r.Wb(25,"div",14),r.Wb(26,"b"),r.Ec(27,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i: "),r.Vb(),r.Vb(),r.Wb(28,"div",13),r.Rb(29,"input",33),r.Vb(),r.Vb(),r.Wb(30,"div",10),r.Wb(31,"div",14),r.Wb(32,"b"),r.Ec(33,"Ng\xe0y sinh: "),r.Vb(),r.Vb(),r.Wb(34,"div",13),r.Rb(35,"input",34),r.Vb(),r.Vb(),r.Wb(36,"div",10),r.Wb(37,"div",14),r.Wb(38,"b"),r.Ec(39,"\u0110\u1ecba ch\u1ec9: "),r.Vb(),r.Vb(),r.Wb(40,"div",13),r.Rb(41,"input",35),r.Vb(),r.Vb(),r.Wb(42,"div",10),r.Wb(43,"div",14),r.Wb(44,"b"),r.Ec(45,"L\u01b0\u01a1ng c\u01a1 s\u1edf: "),r.Vb(),r.Vb(),r.Wb(46,"div",13),r.Rb(47,"input",36),r.Vb(),r.Vb(),r.Wb(48,"div",10),r.Wb(49,"div",14),r.Wb(50,"b"),r.Ec(51,"Gi\u1edbi t\xednh: "),r.Vb(),r.Vb(),r.Wb(52,"div",13),r.Wb(53,"select",37),r.Wb(54,"option",38),r.Ec(55,"Ch\u1ecdn gi\u1edbi t\xednh"),r.Vb(),r.Wb(56,"option",39),r.Ec(57,"Nam"),r.Vb(),r.Wb(58,"option",40),r.Ec(59,"N\u1eef"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(60,"div",10),r.Wb(61,"div",14),r.Wb(62,"b"),r.Ec(63,"Ghi ch\xfa: "),r.Vb(),r.Vb(),r.Wb(64,"div",13),r.Rb(65,"textarea",41),r.Vb(),r.Vb(),r.Vb(),r.Wb(66,"div",6),r.Wb(67,"div",10),r.Wb(68,"div",14),r.Wb(69,"div",15),r.ec("click",(function(){return r.vc(e),r.ic().goBack()})),r.Rb(70,"i",16),r.Ec(71," Quay l\u1ea1i"),r.Vb(),r.Vb(),r.Wb(72,"div",42),r.Wb(73,"div",43),r.ec("click",(function(){return r.vc(e),r.ic().setupDataForm()})),r.Wb(74,"span",20),r.Ec(75,"H\u1ee7y"),r.Vb(),r.Vb(),r.Wb(76,"div",21),r.ec("click",(function(){return r.vc(e),r.ic().UpdateEmployee()})),r.Wb(77,"span"),r.Ec(78,"X\xe1c nh\u1eadn"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb()}if(2&e){const e=r.ic();r.oc("formGroup",e.updateEmployeeForm)}}let et=(()=>{class e{constructor(e,t,n,o,i,c,r,a,l){this.employeeQuery=e,this.employeeService=t,this.router=n,this.fb=o,this.ref=i,this.route=c,this.modalController=r,this.employeeStore=a,this.datePipe=l,this.filter={page:1,per_page:1e3},this.isEditing=!1,this.detail_employee$=this.employeeQuery.detail_employee$,this.updateEmployeeForm=this.fb.group({employee_id:[""],employee_name:[""],student_code:[""],last_name:[""],first_name:[""],email:[""],phone:[""],birth_date:[""],basic_rate:[""],address:[""],gender:[""],note:[""]})}ngOnInit(){return Object(u.a)(this,void 0,void 0,(function*(){const e={employee_id:parseInt(this.route.snapshot.params.id)},t=yield this.employeeService.SearchEmployees(e);this.employeeService.SetDetailEmployee(t[0])}))}ngOnChanges(){return Object(u.a)(this,void 0,void 0,(function*(){}))}onClickUpdateBtn(){return Object(u.a)(this,void 0,void 0,(function*(){if(this.isEditing){let e=this.updateEmployeeForm.value;yield this.employeeService.UpdateEmployee(e)}else this.toggleEdit(),this.setupDataForm()}))}goBack(){this.isEditing?this.toggleEdit():this.router.navigateByUrl("admin/account-management/employee-list")}toggleEdit(){this.isEditing=!this.isEditing}onOpenDeleteModal(){const e=this.modalController.create({component:He,componentProps:{employee:this.employeeQuery.getValue().detail_employee}});e.show().then(),e.onDismiss().then(e=>{if(e)try{this.employeeService.DeleteEmployeeById(e.employee_id),this.router.navigateByUrl("admin/account-management/employee-list"),toastr.success("B\u1ea1n \u0111\xe3 x\xf3a nh\xe2n vi\xean th\xe0nh c\xf4ng")}catch(t){toastr.error("X\xf3a nh\xe2n vi\xean kh\xf4ng th\xe0nh th\xf4ng",t.msg||t.message)}})}setupDataForm(){let e=this.employeeQuery.getValue().detail_employee;this.updateEmployeeForm.patchValue({first_name:null==e?void 0:e.first_name,last_name:null==e?void 0:e.last_name,employee_id:null==e?void 0:e.employee_id,employee_name:(null==e?void 0:e.last_name)+" "+(null==e?void 0:e.first_name),email:null==e?void 0:e.email,address:null==e?void 0:e.address,phone:null==e?void 0:e.phone,gender:null==e?void 0:e.gender,basic_rate:null==e?void 0:e.basic_rate,birth_date:this.datePipe.transform(null==e?void 0:e.birth_day,"yyyy-MM-dd"),note:null==e?void 0:e.note})}OpenAddSupplierModal(){}get employee_detail_in_store(){return this.employeeQuery.getValue().detail_employee.supplier.supplier_id}UpdateEmployee(){return Object(u.a)(this,void 0,void 0,(function*(){let e=this.updateEmployeeForm.value,t=Object.assign(Object.assign({},e),{account_id:this.employeeStore.getValue().detail_employee.account.account_id,gender:"true"==e.gender});try{let e=yield this.employeeService.UpdateEmployee(t);this.employeeStore.update({detail_employee:e}),toastr.success("C\u1eadp nh\u1eadt s\xe1ch th\xe0nh c\xf4ng."),this.router.navigateByUrl("admin/account-management/employee-list")}catch(n){toastr.error("C\u1eadp nh\u1eadt s\xe1ch th\u1ea5t b\u1ea1i.",n.msg||n.message)}}))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(ie),r.Qb(ce),r.Qb(o.g),r.Qb(D.d),r.Qb(r.h),r.Qb(o.a),r.Qb(P.a),r.Qb(oe),r.Qb(c.e))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-employee-detail"]],features:[r.Cb([c.e]),r.Bb],decls:10,vars:5,consts:[[1,"d-flex","justify-content-center","align-items-center","text-app","font-weight-bold"],[1,"font-weight-bold"],[4,"ngIf","ngIfElse"],["updateForm",""],[1,"d-flex","flex-row","p-5","mb-4"],[1,"avatar","col-3","mb-4"],[1,"d-flex","flex-column"],["alt","Avatar",2,"height","100%","width","100%","object-fit","cover",3,"src"],[1,"text-app","text-left","font-weight-bold","text-center","my-4"],[1,"col-9","d-flex","flex-column"],[1,"row","py-3"],[1,"col-2","text-center","font-weight-bold"],[1,"col-9","text-app","font-weight-bold"],[1,"col-9"],[1,"col-2","app-flex"],[1,"btn","btn-outline-app",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-left","pr-1"],[1,"col-9","d-flex","flex-row","justify-content-end",3,"click"],[1,"btn-danger","align-self-center","mr-2"],[1,"fas","fa-trash-alt","trash-icon"],[1,"ml-1",2,"width","60px"],[1,"btn-app","align-self-center",3,"click"],[1,"fas","fa-tools","mr-2"],["editButtons",""],[1,"d-flex","flex-row","ml-auto"],[1,"btn","btn-outline-danger","d-flex","justify-content-center","align-items-center","mr-2"],[1,"btn","btn-app","btn-outline-app","align-self-center"],[1,"ml-1"],[1,"d-flex","flex-row","p-5","mb-4",3,"formGroup"],["src","../../../../../../../assets/images/default-book.png","alt","Avatar",2,"height","390px","width","390px","object-fit","cover"],["type","text","placeholder","Nh\u1eadp h\u1ecd","formControlName","last_name",1,"form-control"],["type","text","placeholder","Nh\u1eadp t\xean","formControlName","first_name",1,"form-control"],["type","text","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9 email","formControlName","email",1,"form-control"],["type","text","placeholder","Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phone",1,"form-control"],["type","date","placeholder","Nh\u1eadp v\xe0o ng\xe0y sinh","formControlName","birth_date",1,"form-control"],["type","text","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9","formControlName","address",1,"form-control"],["type","text","placeholder","Nh\u1eadp l\u01b0\u01a1ng c\u01a1 b\u1ea3n","formControlName","basic_rate",1,"form-control"],["placeholder","Ch\u1ecdn gi\u1edbi t\xednh","formControlName","gender",1,"form-control"],["value","","selected","","autofocus","","disabled",""],["value","true",2,"background-color","white","color","var(--app-color)"],["value","false",2,"background-color","white","color","var(--app-color)"],["placeholder","Nh\u1eadp ghi ch\xfa","formControlName","note",1,"form-control"],[1,"col-9","d-flex","flex-row","justify-content-end"],[1,"btn-outline-app","align-self-center","mr-2",3,"click"]],template:function(e,t){if(1&e&&(r.Ub(0),r.Wb(1,"div",0),r.Wb(2,"h1",1),r.Ec(3,"Th\xf4ng tin chi ti\u1ebft nh\xe2n vi\xean "),r.Wb(4,"span"),r.Ec(5),r.jc(6,"async"),r.Vb(),r.Vb(),r.Vb(),r.Cc(7,Ze,97,44,"ng-container",2),r.Cc(8,Ye,79,1,"ng-template",null,3,r.Dc),r.Tb()),2&e){const e=r.tc(9);var n;r.Db(5),r.Fc(null==(n=r.kc(6,3,t.detail_employee$))?null:n.employee_name),r.Db(2),r.oc("ngIf",!t.isEditing)("ngIfElse",e)}},directives:[c.m,D.n,D.h,D.c,D.m,D.g,D.u,D.q,D.w],pipes:[c.b,g.b,c.e,g.a],styles:[""]}),e})(),tt=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["app-employee-row"]],inputs:{employee_item:"employee_item",index:"index"},decls:14,vars:7,consts:[[1,"item-row","py-2"],[1,"row"],[1,"col","align-self-center","text-center","text-app","font-weight-bold",2,"max-width","150px"],[1,"col","align-self-center","text-center",2,"max-width","150px"],["alt","",2,"height","80px","width","60px","object-fit","cover",3,"src"],[1,"col","align-self-center","text-center","text-app"],[1,"col","align-self-center","text-center",2,"max-width","200px"],[1,"col","align-self-center","text-center"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"div",2),r.Ec(3),r.jc(4,"standardizedId"),r.Vb(),r.Wb(5,"div",3),r.Rb(6,"img",4),r.Vb(),r.Wb(7,"div",5),r.Wb(8,"b"),r.Ec(9),r.Vb(),r.Vb(),r.Wb(10,"div",6),r.Ec(11),r.Vb(),r.Wb(12,"div",7),r.Ec(13),r.Vb(),r.Vb(),r.Vb()),2&e&&(r.Db(3),r.Fc(r.kc(4,5,null==t.employee_item?null:t.employee_item.employee_id)),r.Db(3),r.oc("src",(null==t.employee_item?null:t.employee_item.image)||"assets/images/default-avatar.png",r.xc),r.Db(3),r.Fc((null==t.employee_item?null:t.employee_item.last_name)+" "+(null==t.employee_item?null:t.employee_item.first_name)||"-"),r.Db(2),r.Gc(" ",(null==t.employee_item?null:t.employee_item.phone)||"-"," "),r.Db(2),r.Fc((null==t.employee_item?null:t.employee_item.note)||"-"))},pipes:[g.b],styles:[".item-row[_ngcontent-%COMP%]{display:flex;transition:.5s;padding-left:36px;height:100px;cursor:pointer;align-self:center!important;flex-direction:column;justify-content:center;box-shadow:3px 3px 8px 3px rgba(122,159,216,.2);margin-bottom:20px}.item-row[_ngcontent-%COMP%]:hover{background-color:#e4e4e4;border-left:7px solid var(--app-color)}.item-row[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{position:relative;display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;overflow:hidden;line-height:22px}.item-row[_ngcontent-%COMP%]   .trash-icon[_ngcontent-%COMP%]{border-radius:50%;padding:5px;background-color:#f5f5f5}.item-row[_ngcontent-%COMP%]   .trash-can[_ngcontent-%COMP%]{padding:3px 20px 3px 2px;border-radius:30px;margin-bottom:5px;display:flex;width:auto;align-items:center;flex-direction:row;justify-content:center}.item-row[_ngcontent-%COMP%]   .trash-can[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;color:#f5f5f5;margin-left:10px;font-size:.8rem}"]}),e})();function nt(e,t){}function ot(e,t){1&e&&(r.Wb(0,"p"),r.Ec(1,"Day la the item n\xe0"),r.Vb())}function it(e,t){if(1&e){const e=r.Xb();r.Ub(0),r.Wb(1,"app-employee-row",15),r.ec("click",(function(){r.vc(e);const n=t.$implicit;return r.ic(2).onViewEmployeeDetail(n.employee_id)})),r.Vb(),r.Tb()}if(2&e){const e=t.$implicit,n=t.index;r.Db(1),r.oc("employee_item",e)("index",n)}}function ct(e,t){if(1&e){const e=r.Xb();r.Wb(0,"div",3),r.Rb(1,"input",4),r.Rb(2,"input",5),r.Wb(3,"div",6),r.ec("click",(function(){return r.vc(e),r.ic().search()})),r.Ec(4,"T\xecm ki\u1ebfm"),r.Vb(),r.Vb(),r.Wb(5,"div",7),r.Wb(6,"div",8),r.Wb(7,"div",9),r.Wb(8,"div",10),r.Ec(9,"M\xe3 nh\xe2n vi\xean"),r.Vb(),r.Wb(10,"div",10),r.Ec(11,"H\xecnh \u1ea3nh"),r.Vb(),r.Wb(12,"div",11),r.Ec(13,"T\xean nh\xe2n vi\xean"),r.Vb(),r.Wb(14,"div",12),r.Ec(15,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),r.Vb(),r.Wb(16,"div",11),r.Ec(17,"Ghi ch\xfa"),r.Vb(),r.Vb(),r.Vb(),r.Cc(18,it,2,2,"ng-container",13),r.jc(19,"async"),r.Wb(20,"app-page-pagination",14),r.ec("navigate",(function(t){return r.vc(e),r.ic().navigate(t)})),r.jc(21,"async"),r.Vb(),r.Vb()}if(2&e){const e=r.ic();var n=null;const t=null==(n=r.kc(19,4,e.employee_list$))?null:n.items.slice().reverse();r.oc("formGroup",e.searchForm),r.Db(18),r.oc("ngForOf",t),r.Db(2),r.oc("paginationOpt",e.current_pagination_opt$)("currentPage",r.kc(21,6,e.current_page$))}}let rt=(()=>{class e{constructor(e,t,n,o,i,c){this.fb=e,this.router=t,this.ref=n,this.employeeQuery=o,this.employeeStore=i,this.employeeService=c,this.employee_list$=this.employeeQuery.employee_list_view$,this.current_pagination_opt$=this.employeeQuery.current_pagination_opt$,this.current_page$=this.employeeQuery.current_page$,this.currentPaginationOpt=new y.c,this.searchForm=this.fb.group({employee_id:"",phone:""})}ngOnInit(){return Object(u.a)(this,void 0,void 0,(function*(){yield this.onRequestNewPage()}))}onRequestNewPage(){return Object(u.a)(this,void 0,void 0,(function*(){yield this.employeeService.GetEmployees(this.employeeQuery.getValue().filter_page).then(()=>{this.employeeService.setupPagination()})}))}navigate(e){return Object(u.a)(this,void 0,void 0,(function*(){this.employeeService.navigate(e),yield this.onRequestNewPage()}))}onViewEmployeeDetail(e){this.router.navigateByUrl("/admin/account-management/employee-detail/"+e)}search(){return Object(u.a)(this,void 0,void 0,(function*(){let{employee_id:e,phone:t}=this.searchForm.value;if(!e&&!t)return yield this.onRequestNewPage();const n={employee_id:e||null,phone:t||null};let o=yield this.employeeService.SearchEmployees(n);this.employeeStore.update({employee_list_view:{items:o,has_next:!1,has_prev:!1,current_page:1}})}))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(D.d),r.Qb(o.g),r.Qb(r.h),r.Qb(ie),r.Qb(oe),r.Qb(ce))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-employee-list"]],decls:7,vars:0,consts:[["header",""],["emptyItem",""],["item",""],[1,"search-form","row","app-flex","mb-3",3,"formGroup"],["type","text","placeholder","Nh\u1eadp m\xe3","formControlName","employee_id",1,"form-control","rounded-pill","col-2","p-4","mr-3"],["type","text","placeholder","Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phone",1,"form-control","rounded-pill","col-2","p-4","mr-3"],[1,"btn-app","rounded-pill","col-1",3,"click"],[1,"d-flex","flex-column","h-100"],[1,"table","mt-3"],[1,"table-header","row","font-weight-bold","text-uppercase","ng-star-inserted","align-items-center","my-3"],[1,"col","text-center","text-app",2,"max-width","150px"],[1,"col","text-center","text-app"],[1,"col","text-center","text-app",2,"max-width","200px"],[4,"ngFor","ngForOf"],[1,"mt-auto",3,"paginationOpt","currentPage","navigate"],[3,"employee_item","index","click"]],template:function(e,t){1&e&&(r.Wb(0,"app-item-table"),r.Cc(1,nt,0,0,"ng-template",null,0,r.Dc),r.Cc(3,ot,2,0,"ng-template",null,1,r.Dc),r.Cc(5,ct,22,8,"ng-template",null,2,r.Dc),r.Vb())},directives:[B,D.n,D.h,D.c,D.m,D.g,c.l,y.b,tt],pipes:[c.b],styles:[".table-header[_ngcontent-%COMP%]{padding-left:36px}"]}),e})(),at=(()=>{class e{constructor(e){this.modalAction=e}ngOnInit(){}onConfirmDelete(){this.modalAction.dismiss(this.customer)}dismissModal(){this.modalAction.dismiss(null)}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(p.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-confirm-delete-customer"]],inputs:{customer:"customer"},decls:17,vars:2,consts:[[1,"modal-header"],[1,"modal-title","big-font"],[1,"close",3,"click"],[1,"text-large"],[1,"modal-body"],[1,"modal-footer"],[1,"btn","btn-app","btn-outline-app",3,"click"],[1,"btn","btn-app","text-white",3,"click"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Ec(2),r.Vb(),r.Wb(3,"div",2),r.ec("click",(function(){return t.dismissModal()})),r.Wb(4,"span",3),r.Ec(5,"\xd7"),r.Vb(),r.Vb(),r.Vb(),r.Wb(6,"div",4),r.Wb(7,"div"),r.Ec(8,"B\u1ea1n c\xf3 th\u1ef1c s\u1ef1 mu\u1ed1n x\xf3a kh\xe1ch h\xe0ng "),r.Wb(9,"b"),r.Ec(10),r.Vb(),r.Ec(11," ra kh\u1ecfi h\u1ec7 th\u1ed1ng th\u01b0 qu\xe1n kh\xf4ng ? "),r.Vb(),r.Vb(),r.Wb(12,"div",5),r.Wb(13,"button",6),r.ec("click",(function(){return t.dismissModal()})),r.Ec(14,"\u0110\xf3ng"),r.Vb(),r.Wb(15,"button",7),r.ec("click",(function(){return t.onConfirmDelete()})),r.Ec(16," X\xe1c nh\u1eadn "),r.Vb(),r.Vb()),2&e&&(r.Db(2),r.Gc(" X\xe1c nh\u1eadn x\xf3a kh\xe1ch h\xe0ng : ",(null==t.customer?null:t.customer.last_name)+" "+(null==t.customer?null:t.customer.first_name)," "),r.Db(8),r.Gc(" ",(null==t.customer?null:t.customer.last_name)+" "+(null==t.customer?null:t.customer.first_name),""))},styles:[""]}),e})();var lt=n("BrE/"),bt=n("bHZt");function st(e,t){1&e&&(r.Wb(0,"div",24),r.Wb(1,"div",25),r.Ec(2," H\u1ee7y "),r.Vb(),r.Wb(3,"div",26),r.Wb(4,"span",27),r.Ec(5,"X\xe1c nh\u1eadn"),r.Vb(),r.Vb(),r.Vb())}function dt(e,t){if(1&e){const e=r.Xb();r.Ub(0),r.Wb(1,"div",4),r.Wb(2,"div",5),r.Wb(3,"div",6),r.Rb(4,"img",7),r.jc(5,"async"),r.Wb(6,"h1",8),r.Ec(7),r.jc(8,"standardizedId"),r.jc(9,"async"),r.Vb(),r.Vb(),r.Vb(),r.Wb(10,"div",9),r.Wb(11,"div",6),r.Wb(12,"div",10),r.Wb(13,"div",11),r.Wb(14,"b"),r.Ec(15,"M\xe3 kh\xe1ch h\xe0ng: "),r.Vb(),r.Vb(),r.Wb(16,"div",12),r.Ec(17),r.jc(18,"standardizedId"),r.jc(19,"async"),r.Vb(),r.Vb(),r.Wb(20,"div",10),r.Wb(21,"div",11),r.Wb(22,"b"),r.Ec(23,"T\xean kh\xe1ch h\xe0ng: "),r.Vb(),r.Vb(),r.Wb(24,"div",12),r.Ec(25),r.jc(26,"async"),r.jc(27,"async"),r.Vb(),r.Vb(),r.Wb(28,"div",10),r.Wb(29,"div",11),r.Wb(30,"b"),r.Ec(31,"Email: "),r.Vb(),r.Vb(),r.Wb(32,"div",13),r.Ec(33),r.jc(34,"async"),r.Vb(),r.Vb(),r.Wb(35,"div",10),r.Wb(36,"div",11),r.Wb(37,"b"),r.Ec(38,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i: "),r.Vb(),r.Vb(),r.Wb(39,"div",13),r.Ec(40),r.jc(41,"async"),r.Vb(),r.Vb(),r.Wb(42,"div",10),r.Wb(43,"div",11),r.Wb(44,"b"),r.Ec(45,"Ng\xe0y sinh: "),r.Vb(),r.Vb(),r.Wb(46,"div",13),r.Ec(47),r.jc(48,"date"),r.jc(49,"async"),r.Vb(),r.Vb(),r.Wb(50,"div",10),r.Wb(51,"div",11),r.Wb(52,"b"),r.Ec(53,"\u0110\u1ecba ch\u1ec9: "),r.Vb(),r.Vb(),r.Wb(54,"div",13),r.Ec(55),r.jc(56,"async"),r.Vb(),r.Vb(),r.Wb(57,"div",10),r.Wb(58,"div",11),r.Wb(59,"b"),r.Ec(60,"Gi\u1edbi t\xednh: "),r.Vb(),r.Vb(),r.Wb(61,"div",13),r.Ec(62),r.jc(63,"async"),r.Vb(),r.Vb(),r.Wb(64,"div",10),r.Wb(65,"div",11),r.Wb(66,"b"),r.Ec(67,"Ghi ch\xfa: "),r.Vb(),r.Vb(),r.Wb(68,"div",13),r.Ec(69),r.jc(70,"async"),r.Vb(),r.Vb(),r.Vb(),r.Wb(71,"div",6),r.Wb(72,"div",10),r.Wb(73,"div",14),r.Wb(74,"div",15),r.ec("click",(function(){return r.vc(e),r.ic().goBack()})),r.Rb(75,"i",16),r.Ec(76," Quay l\u1ea1i"),r.Vb(),r.Vb(),r.Ub(77),r.Wb(78,"div",17),r.ec("click",(function(){return r.vc(e),r.ic().onOpenDeleteModal()})),r.Wb(79,"div",18),r.Rb(80,"i",19),r.Wb(81,"span",20),r.Ec(82,"X\xf3a b\u1ecf"),r.Vb(),r.Vb(),r.Wb(83,"div",21),r.ec("click",(function(){return r.vc(e),r.ic().onClickUpdateBtn()})),r.Rb(84,"i",22),r.Wb(85,"span"),r.Ec(86,"C\u1eadp nh\u1eadt"),r.Vb(),r.Vb(),r.Vb(),r.Tb(),r.Cc(87,st,6,0,"ng-template",null,23,r.Dc),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Tb()}if(2&e){const e=r.ic();var n;const t=(null==(n=r.kc(5,10,e.detail_customer$))?null:n.image)||"assets/images/default-avatar.png";var o,i,c,a,l,b,s,d,u=null;r.Db(4),r.oc("src",t,r.xc),r.Db(3),r.Gc("M\xe3 kh\xe1ch h\xe0ng: ",r.kc(8,12,null==(o=r.kc(9,14,e.detail_customer$))?null:o.customer_id),""),r.Db(10),r.Fc(r.kc(18,16,null==(i=r.kc(19,18,e.detail_customer$))?null:i.customer_id)||"-"),r.Db(8),r.Fc((null==(u=r.kc(26,20,e.detail_customer$))?null:u.last_name)+" "+(null==(u=r.kc(27,22,e.detail_customer$))?null:u.first_name)||"-"),r.Db(8),r.Fc((null==(c=r.kc(34,24,e.detail_customer$))?null:c.email)||"-"),r.Db(7),r.Fc((null==(a=r.kc(41,26,e.detail_customer$))?null:a.phone)||"-"),r.Db(7),r.Fc(r.lc(48,28,null==(l=r.kc(49,31,e.detail_customer$))?null:l.birth_day,"shortDate")),r.Db(8),r.Fc((null==(b=r.kc(56,33,e.detail_customer$))?null:b.address)||"-"),r.Db(7),r.Fc(null!=(s=r.kc(63,35,e.detail_customer$))&&s.gender?"Nam":"N\u1eef"),r.Db(7),r.Fc((null==(d=r.kc(70,37,e.detail_customer$))?null:d.note)||"-")}}function ut(e,t){if(1&e){const e=r.Xb();r.Wb(0,"div",28),r.Wb(1,"div",5),r.Wb(2,"div",6),r.Rb(3,"img",29),r.Vb(),r.Vb(),r.Wb(4,"div",9),r.Wb(5,"div",6),r.Wb(6,"div",10),r.Wb(7,"div",14),r.Wb(8,"b"),r.Ec(9,"H\u1ecd: "),r.Vb(),r.Vb(),r.Wb(10,"div",13),r.Rb(11,"input",30),r.Vb(),r.Vb(),r.Wb(12,"div",10),r.Wb(13,"div",14),r.Wb(14,"b"),r.Ec(15,"T\xean: "),r.Vb(),r.Vb(),r.Wb(16,"div",13),r.Rb(17,"input",31),r.Vb(),r.Vb(),r.Wb(18,"div",10),r.Wb(19,"div",14),r.Wb(20,"b"),r.Ec(21,"Email: "),r.Vb(),r.Vb(),r.Wb(22,"div",13),r.Rb(23,"input",32),r.Vb(),r.Vb(),r.Wb(24,"div",10),r.Wb(25,"div",14),r.Wb(26,"b"),r.Ec(27,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i: "),r.Vb(),r.Vb(),r.Wb(28,"div",13),r.Rb(29,"input",33),r.Vb(),r.Vb(),r.Wb(30,"div",10),r.Wb(31,"div",14),r.Wb(32,"b"),r.Ec(33,"Ng\xe0y sinh: "),r.Vb(),r.Vb(),r.Wb(34,"div",13),r.Rb(35,"input",34),r.Vb(),r.Vb(),r.Wb(36,"div",10),r.Wb(37,"div",14),r.Wb(38,"b"),r.Ec(39,"\u0110\u1ecba ch\u1ec9: "),r.Vb(),r.Vb(),r.Wb(40,"div",13),r.Rb(41,"input",35),r.Vb(),r.Vb(),r.Wb(42,"div",10),r.Wb(43,"div",14),r.Wb(44,"b"),r.Ec(45,"Gi\u1edbi t\xednh: "),r.Vb(),r.Vb(),r.Wb(46,"div",13),r.Wb(47,"select",36),r.Wb(48,"option",37),r.Ec(49,"Ch\u1ecdn gi\u1edbi t\xednh"),r.Vb(),r.Wb(50,"option",38),r.Ec(51,"Nam"),r.Vb(),r.Wb(52,"option",39),r.Ec(53,"N\u1eef"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(54,"div",10),r.Wb(55,"div",14),r.Wb(56,"b"),r.Ec(57,"Ghi ch\xfa: "),r.Vb(),r.Vb(),r.Wb(58,"div",13),r.Rb(59,"textarea",40),r.Vb(),r.Vb(),r.Vb(),r.Wb(60,"div",6),r.Wb(61,"div",10),r.Wb(62,"div",14),r.Wb(63,"div",15),r.ec("click",(function(){return r.vc(e),r.ic().goBack()})),r.Rb(64,"i",16),r.Ec(65," Quay l\u1ea1i"),r.Vb(),r.Vb(),r.Wb(66,"div",41),r.Wb(67,"div",42),r.ec("click",(function(){return r.vc(e),r.ic().setupDataForm()})),r.Wb(68,"span",20),r.Ec(69,"H\u1ee7y"),r.Vb(),r.Vb(),r.Wb(70,"div",21),r.ec("click",(function(){return r.vc(e),r.ic().UpdateCustomer()})),r.Wb(71,"span"),r.Ec(72,"X\xe1c nh\u1eadn"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb()}if(2&e){const e=r.ic();r.oc("formGroup",e.updateCustomerForm)}}let pt=(()=>{class e{constructor(e,t,n,o,i,c,r,a,l){this.customerQuery=e,this.customerService=t,this.router=n,this.fb=o,this.ref=i,this.route=c,this.modalController=r,this.customerStore=a,this.datePipe=l,this.filter={page:1,per_page:1e3},this.isEditing=!1,this.detail_customer$=this.customerQuery.detail_customer$,this.updateCustomerForm=this.fb.group({customer_id:[""],customer_name:[""],student_code:[""],last_name:[""],first_name:[""],email:[""],phone:[""],birth_date:[""],address:[""],gender:[""],note:[""]})}ngOnInit(){return Object(u.a)(this,void 0,void 0,(function*(){const e={customer_id:parseInt(this.route.snapshot.params.id)},t=yield this.customerService.SearchCustomers(e);this.customerService.SetDetailCustomer(t[0]),yield this.SetupData()}))}ngOnChanges(){return Object(u.a)(this,void 0,void 0,(function*(){}))}SetupData(){return Object(u.a)(this,void 0,void 0,(function*(){yield this.customerService.SearchOrdersByCustomerId({customer_id:this.customerQuery.getValue().detail_customer.customer_id})}))}onClickUpdateBtn(){return Object(u.a)(this,void 0,void 0,(function*(){if(this.isEditing){let e=this.updateCustomerForm.value;yield this.customerService.UpdateCustomer(e)}else this.toggleEdit(),this.setupDataForm()}))}goBack(){this.isEditing?this.toggleEdit():this.router.navigateByUrl("admin/account-management/customer-list")}toggleEdit(){this.isEditing=!this.isEditing}onOpenDeleteModal(){const e=this.modalController.create({component:at,componentProps:{customer:this.customerQuery.getValue().detail_customer}});e.show().then(),e.onDismiss().then(e=>{if(e)try{this.customerService.DeleteCustomerById(e.customer_id),this.router.navigateByUrl("admin/account-management/customer-list"),toastr.success("B\u1ea1n \u0111\xe3 x\xf3a kh\xe1ch h\xe0ng th\xe0nh c\xf4ng")}catch(t){toastr.error("X\xf3a kh\xe1ch h\xe0ng kh\xf4ng th\xe0nh th\xf4ng",t.msg||t.message)}})}setupDataForm(){let e=this.customerQuery.getValue().detail_customer;this.updateCustomerForm.patchValue({first_name:null==e?void 0:e.first_name,last_name:null==e?void 0:e.last_name,customer_id:null==e?void 0:e.customer_id,customer_name:(null==e?void 0:e.last_name)+" "+(null==e?void 0:e.first_name),email:null==e?void 0:e.email,address:null==e?void 0:e.address,phone:null==e?void 0:e.phone,gender:null==e?void 0:e.gender,birth_date:this.datePipe.transform(null==e?void 0:e.birth_day,"yyyy-MM-dd"),note:null==e?void 0:e.note})}OpenAddSupplierModal(){}get customer_detail_in_store(){return this.customerQuery.getValue().detail_customer.supplier.supplier_id}UpdateCustomer(){return Object(u.a)(this,void 0,void 0,(function*(){let e=this.updateCustomerForm.value,t=Object.assign(Object.assign({},e),{account_id:this.customerStore.getValue().detail_customer.account.account_id,gender:"true"==e.gender});try{let e=yield this.customerService.UpdateCustomer(t);this.customerStore.update({detail_customer:e}),toastr.success("C\u1eadp nh\u1eadt s\xe1ch th\xe0nh c\xf4ng."),this.router.navigateByUrl("admin/account-management/customer-list")}catch(n){toastr.error("C\u1eadp nh\u1eadt s\xe1ch th\u1ea5t b\u1ea1i.",n.msg||n.message)}}))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(lt.a),r.Qb(ee.a),r.Qb(o.g),r.Qb(D.d),r.Qb(r.h),r.Qb(o.a),r.Qb(P.a),r.Qb(bt.a),r.Qb(c.e))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-customer-detail"]],features:[r.Cb([c.e]),r.Bb],decls:10,vars:5,consts:[[1,"d-flex","justify-content-center","align-items-center","text-app","font-weight-bold"],[1,"font-weight-bold"],[4,"ngIf","ngIfElse"],["updateForm",""],[1,"d-flex","flex-row","p-5","mb-4"],[1,"avatar","col-3","mb-4"],[1,"d-flex","flex-column"],["alt","Avatar",2,"height","100%","width","100%","object-fit","cover",3,"src"],[1,"text-app","text-left","font-weight-bold","text-center","my-4"],[1,"col-9","d-flex","flex-column"],[1,"row","py-3"],[1,"col-2","text-center","font-weight-bold"],[1,"col-9","text-app","font-weight-bold"],[1,"col-9"],[1,"col-2","app-flex"],[1,"btn","btn-outline-app",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-left","pr-1"],[1,"col-9","d-flex","flex-row","justify-content-end",3,"click"],[1,"btn-danger","align-self-center","mr-2"],[1,"fas","fa-trash-alt","trash-icon"],[1,"ml-1",2,"width","60px"],[1,"btn-app","align-self-center",3,"click"],[1,"fas","fa-tools","mr-2"],["editButtons",""],[1,"d-flex","flex-row","ml-auto"],[1,"btn","btn-outline-danger","d-flex","justify-content-center","align-items-center","mr-2"],[1,"btn","btn-app","btn-outline-app","align-self-center"],[1,"ml-1"],[1,"d-flex","flex-row","p-5","mb-4",3,"formGroup"],["src","../../../../../../../assets/images/default-avatar.png","alt","Avatar",2,"height","390px","width","390px","object-fit","cover"],["type","text","placeholder","Nh\u1eadp h\u1ecd","formControlName","last_name",1,"form-control"],["type","text","placeholder","Nh\u1eadp t\xean","formControlName","first_name",1,"form-control"],["type","text","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9 email","formControlName","email",1,"form-control"],["type","text","placeholder","Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phone",1,"form-control"],["type","date","placeholder","Nh\u1eadp v\xe0o ng\xe0y sinh","formControlName","birth_date",1,"form-control"],["type","text","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9","formControlName","address",1,"form-control"],["placeholder","Ch\u1ecdn gi\u1edbi t\xednh","formControlName","gender",1,"form-control"],["value","","selected","","autofocus","","disabled",""],["value","true",2,"background-color","white","color","var(--app-color)"],["value","false",2,"background-color","white","color","var(--app-color)"],["placeholder","Nh\u1eadp ghi ch\xfa","formControlName","note",1,"form-control"],[1,"col-9","d-flex","flex-row","justify-content-end"],[1,"btn-outline-app","align-self-center","mr-2",3,"click"]],template:function(e,t){if(1&e&&(r.Ub(0),r.Wb(1,"div",0),r.Wb(2,"h1",1),r.Ec(3,"Th\xf4ng tin chi ti\u1ebft kh\xe1ch h\xe0ng "),r.Wb(4,"span"),r.Ec(5),r.jc(6,"async"),r.Vb(),r.Vb(),r.Vb(),r.Cc(7,dt,89,39,"ng-container",2),r.Cc(8,ut,73,1,"ng-template",null,3,r.Dc),r.Tb()),2&e){const e=r.tc(9);var n;r.Db(5),r.Fc(null==(n=r.kc(6,3,t.detail_customer$))?null:n.customer_name),r.Db(2),r.oc("ngIf",!t.isEditing)("ngIfElse",e)}},directives:[c.m,D.n,D.h,D.c,D.m,D.g,D.u,D.q,D.w],pipes:[c.b,g.b,c.e],styles:[""]}),e})();function ht(e,t){if(1&e&&(r.Ub(0),r.Wb(1,"a",4),r.Ec(2),r.Vb(),r.Tb()),2&e){const e=t.$implicit;r.Db(1),r.oc("routerLink",e.url),r.Db(1),r.Fc(e.itemName)}}let mt=(()=>{class e{constructor(){this.headerItems=[{itemName:"Danh s\xe1ch",url:"customer-list"}]}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["app-customer-management"]],decls:6,vars:1,consts:[[1,"p-0","pl-2","header-admin","d-flex","align-items-center"],[1,"page-title","font-weight-bold","pl-4","mr-5"],[4,"ngFor","ngForOf"],[1,"page-content-admin","p-4"],["routerLinkActive","active",1,"header-item",3,"routerLink"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Ec(2," Qu\u1ea3n l\xfd kh\xe1ch h\xe0ng "),r.Vb(),r.Cc(3,ht,3,2,"ng-container",2),r.Vb(),r.Wb(4,"div",3),r.Rb(5,"router-outlet"),r.Vb()),2&e&&(r.Db(3),r.oc("ngForOf",t.headerItems))},directives:[c.l,o.l,o.j,o.i],styles:[""]}),e})();var gt=n("ZiMh");function ft(e,t){1&e&&r.Rb(0,"i",9)}let vt=(()=>{class e{constructor(e){this.modalAction=e,this.loading=!1}ngOnInit(){}onConfirmDelete(){this.modalAction.dismiss(this.book)}dismissModal(){this.modalAction.dismiss(null)}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(p.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-confirm-delete-modal"]],inputs:{book:"book"},decls:18,vars:2,consts:[[1,"modal-header"],[1,"modal-title","big-font"],[1,"close",3,"click"],[1,"text-large"],[1,"modal-body"],[1,"modal-footer"],[1,"btn","btn-app","btn-outline-app",3,"click"],[1,"btn","btn-app","text-white",3,"click"],["class","fa fa-spin fa-circle-o-notch",4,"ngIf"],[1,"fa","fa-spin","fa-circle-o-notch"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Ec(2," X\xe1c nh\u1eadn x\xf3a s\xe1ch: "),r.Vb(),r.Wb(3,"div",2),r.ec("click",(function(){return t.dismissModal()})),r.Wb(4,"span",3),r.Ec(5,"\xd7"),r.Vb(),r.Vb(),r.Vb(),r.Wb(6,"div",4),r.Wb(7,"div"),r.Ec(8,"B\u1ea1n c\xf3 th\u1ef1c s\u1ef1 mu\u1ed1n x\xf3a s\xe1ch "),r.Wb(9,"b"),r.Ec(10),r.Vb(),r.Ec(11," ra kh\u1ecfi h\u1ec7 th\u1ed1ng th\u01b0 qu\xe1n kh\xf4ng ? "),r.Vb(),r.Vb(),r.Wb(12,"div",5),r.Wb(13,"button",6),r.ec("click",(function(){return t.dismissModal()})),r.Ec(14,"\u0110\xf3ng"),r.Vb(),r.Wb(15,"button",7),r.ec("click",(function(){return t.onConfirmDelete()})),r.Cc(16,ft,1,0,"i",8),r.Ec(17," X\xe1c nh\u1eadn "),r.Vb(),r.Vb()),2&e&&(r.Db(10),r.Fc(null==t.book?null:t.book.book_name),r.Db(6),r.oc("ngIf",t.loading))},directives:[c.m],styles:[""]}),e})(),_t=(()=>{class e{constructor(e,t){this.modalAction=e,this.util=t,this.supplier={contact_name:"",address:"",phone:"",email:"",note:""}}ngOnInit(){}AddSupplier(){this.supplier.contact_name?this.supplier.address?this.util.validatePhoneNumber(this.supplier.phone)&&this.util.validEmail(this.supplier.email)&&this.modalAction.dismiss(this.supplier):toastr.error("Vui l\xf2ng nh\u1eadp \u0111\u1ecba ch\u1ec9"):toastr.error("Vui l\xf2ng nh\u1eadp t\xean nh\xe0 cung c\u1ea5p")}dismissModal(){this.modalAction.dismiss(null)}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(p.a),r.Qb(ve.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-add-supplier-modal"]],decls:42,vars:5,consts:[[1,"modal-header"],[1,"modal-title","big-font"],[1,"close",3,"click"],[1,"text-large"],[1,"modal-body"],[1,"row","py-3"],[1,"col-3","app-flex"],[1,"col-9"],["type","text","placeholder","Nh\u1eadp t\xean nh\xe0 cung c\u1ea5p","name","category_name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9","name","category_name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i","name","category_name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Nh\u1eadp email","name","category_name",1,"form-control",3,"ngModel","ngModelChange"],["placeholder","Nh\u1eadp ghi ch\xfa",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],[1,"btn","btn-app","btn-outline-app",3,"click"],[1,"btn","btn-app","text-white",3,"click"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Ec(2," Th\xeam nh\xe0 cung c\u1ea5p "),r.Vb(),r.Wb(3,"div",2),r.ec("click",(function(){return t.dismissModal()})),r.Wb(4,"span",3),r.Ec(5,"\xd7"),r.Vb(),r.Vb(),r.Vb(),r.Wb(6,"div",4),r.Wb(7,"div",5),r.Wb(8,"div",6),r.Wb(9,"b"),r.Ec(10,"T\xean nh\xe0 cung c\u1ea5p: "),r.Vb(),r.Vb(),r.Wb(11,"div",7),r.Wb(12,"input",8),r.ec("ngModelChange",(function(e){return t.supplier.contact_name=e})),r.Vb(),r.Vb(),r.Vb(),r.Wb(13,"div",5),r.Wb(14,"div",6),r.Wb(15,"b"),r.Ec(16,"\u0110\u1ecba ch\u1ec9: "),r.Vb(),r.Vb(),r.Wb(17,"div",7),r.Wb(18,"input",9),r.ec("ngModelChange",(function(e){return t.supplier.address=e})),r.Vb(),r.Vb(),r.Vb(),r.Wb(19,"div",5),r.Wb(20,"div",6),r.Wb(21,"b"),r.Ec(22,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i: "),r.Vb(),r.Vb(),r.Wb(23,"div",7),r.Wb(24,"input",10),r.ec("ngModelChange",(function(e){return t.supplier.phone=e})),r.Vb(),r.Vb(),r.Vb(),r.Wb(25,"div",5),r.Wb(26,"div",6),r.Wb(27,"b"),r.Ec(28,"Email: "),r.Vb(),r.Vb(),r.Wb(29,"div",7),r.Wb(30,"input",11),r.ec("ngModelChange",(function(e){return t.supplier.email=e})),r.Vb(),r.Vb(),r.Vb(),r.Wb(31,"div",5),r.Wb(32,"div",6),r.Wb(33,"b"),r.Ec(34,"Ghi ch\xfa: "),r.Vb(),r.Vb(),r.Wb(35,"div",7),r.Wb(36,"textarea",12),r.ec("ngModelChange",(function(e){return t.supplier.note=e})),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(37,"div",13),r.Wb(38,"button",14),r.ec("click",(function(){return t.dismissModal()})),r.Ec(39,"\u0110\xf3ng"),r.Vb(),r.Wb(40,"button",15),r.ec("click",(function(){return t.AddSupplier()})),r.Ec(41," X\xe1c nh\u1eadn "),r.Vb(),r.Vb()),2&e&&(r.Db(12),r.oc("ngModel",t.supplier.contact_name),r.Db(6),r.oc("ngModel",t.supplier.address),r.Db(6),r.oc("ngModel",t.supplier.phone),r.Db(6),r.oc("ngModel",t.supplier.email),r.Db(6),r.oc("ngModel",t.supplier.note))},directives:[D.c,D.m,D.p],styles:[""]}),e})(),Vt=(()=>{class e{constructor(e){this.modalAction=e,this.category={category_name:"",description:""}}ngOnInit(){}AddCategory(){this.modalAction.dismiss(this.category)}dismissModal(){this.modalAction.dismiss(null)}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(p.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-add-category-modal"]],decls:24,vars:2,consts:[[1,"modal-header"],[1,"modal-title","big-font"],[1,"close",3,"click"],[1,"text-large"],[1,"modal-body"],[1,"row","py-3"],[1,"col-3","app-flex"],[1,"col-9"],["type","text","placeholder","Nh\u1eadp t\xean th\u1ec3 lo\u1ea1i s\xe1ch","name","category_name",1,"form-control",3,"ngModel","ngModelChange"],["placeholder","Nh\u1eadp m\xf4 t\u1ea3 th\u1ec3 lo\u1ea1i",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],[1,"btn","btn-app","btn-outline-app",3,"click"],[1,"btn","btn-app","text-white",3,"click"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Ec(2," Th\xeam th\u1ec3 lo\u1ea1i s\xe1ch "),r.Vb(),r.Wb(3,"div",2),r.ec("click",(function(){return t.dismissModal()})),r.Wb(4,"span",3),r.Ec(5,"\xd7"),r.Vb(),r.Vb(),r.Vb(),r.Wb(6,"div",4),r.Wb(7,"div",5),r.Wb(8,"div",6),r.Wb(9,"b"),r.Ec(10,"T\xean th\u1ec3 lo\u1ea1i s\xe1ch: "),r.Vb(),r.Vb(),r.Wb(11,"div",7),r.Wb(12,"input",8),r.ec("ngModelChange",(function(e){return t.category.category_name=e})),r.Vb(),r.Vb(),r.Vb(),r.Wb(13,"div",5),r.Wb(14,"div",6),r.Wb(15,"b"),r.Ec(16,"M\xf4 t\u1ea3: "),r.Vb(),r.Vb(),r.Wb(17,"div",7),r.Wb(18,"textarea",9),r.ec("ngModelChange",(function(e){return t.category.description=e})),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(19,"div",10),r.Wb(20,"button",11),r.ec("click",(function(){return t.dismissModal()})),r.Ec(21,"\u0110\xf3ng"),r.Vb(),r.Wb(22,"button",12),r.ec("click",(function(){return t.AddCategory()})),r.Ec(23," X\xe1c nh\u1eadn "),r.Vb(),r.Vb()),2&e&&(r.Db(12),r.oc("ngModel",t.category.category_name),r.Db(6),r.oc("ngModel",t.category.description))},directives:[D.c,D.m,D.p],styles:[""]}),e})(),Wt=(()=>{class e{constructor(e){this.modalAction=e,this.author={author_name:""}}ngOnInit(){}AddAuthor(){this.modalAction.dismiss(this.author)}dismissModal(){this.modalAction.dismiss(null)}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(p.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-add-author-modal"]],decls:18,vars:1,consts:[[1,"modal-header"],[1,"modal-title","big-font"],[1,"close",3,"click"],[1,"text-large"],[1,"modal-body"],[1,"row","py-3"],[1,"col-3","app-flex"],[1,"col-9"],["type","text","placeholder","Nh\u1eadp t\xean s\xe1ch","name","author_name",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],[1,"btn","btn-app","btn-outline-app",3,"click"],[1,"btn","btn-app","text-white",3,"click"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Ec(2," Th\xeam t\xe1c gi\u1ea3 "),r.Vb(),r.Wb(3,"div",2),r.ec("click",(function(){return t.dismissModal()})),r.Wb(4,"span",3),r.Ec(5,"\xd7"),r.Vb(),r.Vb(),r.Vb(),r.Wb(6,"div",4),r.Wb(7,"div",5),r.Wb(8,"div",6),r.Wb(9,"b"),r.Ec(10,"T\xean t\xe1c gi\u1ea3: "),r.Vb(),r.Vb(),r.Wb(11,"div",7),r.Wb(12,"input",8),r.ec("ngModelChange",(function(e){return t.author.author_name=e})),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(13,"div",9),r.Wb(14,"button",10),r.ec("click",(function(){return t.dismissModal()})),r.Ec(15,"\u0110\xf3ng"),r.Vb(),r.Wb(16,"button",11),r.ec("click",(function(){return t.AddAuthor()})),r.Ec(17," X\xe1c nh\u1eadn "),r.Vb(),r.Vb()),2&e&&(r.Db(12),r.oc("ngModel",t.author.author_name))},directives:[D.c,D.m,D.p],styles:[""]}),e})();var yt=n("l0ty"),kt=n("oJap"),xt=n("MK3z");function wt(e,t){1&e&&(r.Wb(0,"div",28),r.Wb(1,"div",29),r.Ec(2," H\u1ee7y "),r.Vb(),r.Wb(3,"div",30),r.Wb(4,"span",31),r.Ec(5,"X\xe1c nh\u1eadn"),r.Vb(),r.Vb(),r.Vb())}function Ct(e,t){if(1&e){const e=r.Xb();r.Ub(0),r.Wb(1,"div",4),r.Wb(2,"div",5),r.Wb(3,"div",6),r.Rb(4,"img",7),r.jc(5,"async"),r.Wb(6,"div",8),r.Wb(7,"b"),r.Ec(8,"H\xecnh \u1ea3nh th\u1ef1c t\u1ebf t\u1eeb kh\xe1ch h\xe0ng"),r.Vb(),r.Vb(),r.Wb(9,"div",9),r.Rb(10,"img",10),r.Rb(11,"img",10),r.Rb(12,"img",10),r.Rb(13,"img",10),r.Vb(),r.Wb(14,"h1",11),r.Ec(15),r.jc(16,"standardizedId"),r.jc(17,"async"),r.Vb(),r.Vb(),r.Vb(),r.Wb(18,"div",12),r.Wb(19,"div",13),r.Wb(20,"div",14),r.Wb(21,"div",15),r.Wb(22,"b"),r.Ec(23,"M\xe3 s\xe1ch: "),r.Vb(),r.Vb(),r.Wb(24,"div",16),r.Ec(25),r.jc(26,"standardizedId"),r.jc(27,"async"),r.Vb(),r.Vb(),r.Wb(28,"div",14),r.Wb(29,"div",15),r.Wb(30,"b"),r.Ec(31,"T\xean s\xe1ch: "),r.Vb(),r.Vb(),r.Wb(32,"div",16),r.Ec(33),r.jc(34,"async"),r.Vb(),r.Vb(),r.Wb(35,"div",14),r.Wb(36,"div",15),r.Wb(37,"b"),r.Ec(38,"T\xe1c gi\u1ea3: "),r.Vb(),r.Vb(),r.Wb(39,"div",17),r.Ec(40),r.jc(41,"async"),r.Vb(),r.Vb(),r.Wb(42,"div",14),r.Wb(43,"div",15),r.Wb(44,"b"),r.Ec(45,"Nh\xe0 cung c\u1ea5p: "),r.Vb(),r.Vb(),r.Wb(46,"div",17),r.Ec(47),r.jc(48,"async"),r.Vb(),r.Vb(),r.Wb(49,"div",14),r.Wb(50,"div",15),r.Wb(51,"b"),r.Ec(52,"Th\u1ec3 lo\u1ea1i: "),r.Vb(),r.Vb(),r.Wb(53,"div",17),r.Ec(54),r.jc(55,"async"),r.Vb(),r.Vb(),r.Wb(56,"div",14),r.Wb(57,"div",15),r.Wb(58,"b"),r.Ec(59,"S\u1ed1 trang: "),r.Vb(),r.Vb(),r.Wb(60,"div",17),r.Ec(61),r.jc(62,"async"),r.Vb(),r.Vb(),r.Wb(63,"div",14),r.Wb(64,"div",15),r.Wb(65,"b"),r.Ec(66,"Gi\xe1 v\u1ed1n: "),r.Vb(),r.Vb(),r.Wb(67,"div",17),r.Ec(68),r.jc(69,"vnd"),r.jc(70,"async"),r.Vb(),r.Vb(),r.Wb(71,"div",14),r.Wb(72,"div",15),r.Wb(73,"b"),r.Ec(74,"Gi\xe1 b\xe1n: "),r.Vb(),r.Vb(),r.Wb(75,"div",17),r.Ec(76),r.jc(77,"async"),r.Vb(),r.Vb(),r.Wb(78,"div",14),r.Wb(79,"div",15),r.Wb(80,"b"),r.Ec(81,"Gi\u1ea3m gi\xe1: "),r.Vb(),r.Vb(),r.Wb(82,"div",17),r.Ec(83),r.jc(84,"async"),r.Vb(),r.Vb(),r.Wb(85,"div",14),r.Wb(86,"div",15),r.Wb(87,"b"),r.Ec(88,"T\u1ed3n kho s\xe1ch b\xe1n : "),r.Vb(),r.Vb(),r.Wb(89,"div",17),r.Ec(90),r.jc(91,"async"),r.Vb(),r.Vb(),r.Wb(92,"div",14),r.Wb(93,"div",15),r.Wb(94,"b"),r.Ec(95,"T\u1ed3n kho s\xe1ch m\u01b0\u1ee3n: "),r.Vb(),r.Vb(),r.Wb(96,"div",17),r.Ec(97),r.jc(98,"async"),r.Vb(),r.Vb(),r.Wb(99,"div",14),r.Wb(100,"div",15),r.Wb(101,"b"),r.Ec(102,"T\xf3m t\u1eaft: "),r.Vb(),r.Vb(),r.Wb(103,"div",17),r.Ec(104),r.jc(105,"async"),r.Vb(),r.Vb(),r.Wb(106,"div",14),r.Wb(107,"div",15),r.Wb(108,"b"),r.Ec(109,"Ghi ch\xfa: "),r.Vb(),r.Vb(),r.Wb(110,"div",17),r.Ec(111),r.jc(112,"async"),r.Vb(),r.Vb(),r.Vb(),r.Wb(113,"div",13),r.Wb(114,"div",14),r.Wb(115,"div",18),r.Wb(116,"div",19),r.ec("click",(function(){return r.vc(e),r.ic().goBack()})),r.Rb(117,"i",20),r.Ec(118," Quay l\u1ea1i"),r.Vb(),r.Vb(),r.Ub(119),r.Wb(120,"div",21),r.Wb(121,"div",22),r.ec("click",(function(){return r.vc(e),r.ic().onOpenDeleteModal()})),r.Rb(122,"i",23),r.Wb(123,"span",24),r.Ec(124,"X\xf3a b\u1ecf"),r.Vb(),r.Vb(),r.Wb(125,"div",25),r.ec("click",(function(){return r.vc(e),r.ic().onClickUpdateBtn()})),r.Rb(126,"i",26),r.Wb(127,"span"),r.Ec(128,"C\u1eadp nh\u1eadt"),r.Vb(),r.Vb(),r.Vb(),r.Tb(),r.Cc(129,wt,6,0,"ng-template",null,27,r.Dc),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Tb()}if(2&e){const e=r.ic();var n;const t=(null==(n=r.kc(5,15,e.detail_book$))?null:n.image)||"assets/images/default-book.png ";var o,i,c,a,l,b,s,d,u,p,h,m,g,f;r.Db(4),r.oc("src",t,r.xc),r.Db(11),r.Gc("M\xe3 s\xe1ch: ",r.kc(16,17,null==(o=r.kc(17,19,e.detail_book$))?null:o.book_id),""),r.Db(10),r.Fc(r.kc(26,21,null==(i=r.kc(27,23,e.detail_book$))?null:i.book_id)||"-"),r.Db(8),r.Fc((null==(c=r.kc(34,25,e.detail_book$))?null:c.book_name)||"-"),r.Db(7),r.Fc((null==(a=r.kc(41,27,e.detail_book$))||null==a.author?null:a.author.author_name)||"-"),r.Db(7),r.Fc((null==(l=r.kc(48,29,e.detail_book$))||null==l.supplier?null:l.supplier.contact_name)||"-"),r.Db(7),r.Fc((null==(b=r.kc(55,31,e.detail_book$))||null==b.category?null:b.category.category_name)||"-"),r.Db(7),r.Fc((null==(s=r.kc(62,33,e.detail_book$))?null:s.page_number)||0),r.Db(7),r.Fc(r.kc(69,35,null==(d=r.kc(70,37,e.detail_book$))?null:d.cost_price)||0),r.Db(8),r.Fc((null==(u=r.kc(77,39,e.detail_book$))?null:u.retail_price)||0),r.Db(7),r.Fc(null==(p=r.kc(84,41,e.detail_book$))?null:p.discount),r.Db(7),r.Fc(null==(h=r.kc(91,43,e.detail_book$))?null:h.new_amount),r.Db(7),r.Fc(null==(m=r.kc(98,45,e.detail_book$))?null:m.old_amount),r.Db(7),r.Fc((null==(g=r.kc(105,47,e.detail_book$))?null:g.description)||"-"),r.Db(7),r.Fc((null==(f=r.kc(112,49,e.detail_book$))?null:f.note)||"-")}}function Et(e,t){if(1&e&&(r.Wb(0,"option",60),r.Ec(1),r.Vb()),2&e){const e=t.$implicit;r.oc("ngValue",e)("selected",1==e.author_id),r.Db(1),r.Gc(" ",null==e?null:e.author_name," ")}}function Ot(e,t){if(1&e&&(r.Wb(0,"option",60),r.Ec(1),r.Vb()),2&e){const e=t.$implicit,n=r.ic(2);r.oc("ngValue",e)("selected",e.supplier_id==n.book_detail_in_store),r.Db(1),r.Ic(" ",(null==e?null:e.contact_name)||"T\xean li\xean l\u1ea1c"," - ",(null==e?null:e.phone)||"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"," - ",(null==e?null:e.email)||"email"," ")}}function Mt(e,t){if(1&e&&(r.Wb(0,"option",61),r.Ec(1),r.Wb(2,"div",62),r.Rb(3,"i",45),r.Vb(),r.Vb()),2&e){const e=t.$implicit;r.oc("ngValue",e),r.Db(1),r.Gc(" ",null==e?null:e.category_name," ")}}function Dt(e,t){if(1&e){const e=r.Xb();r.Wb(0,"div",32),r.Wb(1,"div",5),r.Wb(2,"div",33),r.Wb(3,"label",34),r.Wb(4,"div",35),r.Ec(5,"Upload \u1ea3nh "),r.Rb(6,"i",36),r.Vb(),r.Wb(7,"div",37),r.Rb(8,"i",38),r.Vb(),r.Wb(9,"div",39),r.Rb(10,"i",40),r.Vb(),r.Wb(11,"input",41),r.ec("change",(function(t){return r.vc(e),r.ic().onChangeLogo(t)})),r.Vb(),r.Vb(),r.Wb(12,"b",42),r.Ec(13,"H\xecnh \u1ea3nh th\u1ef1c t\u1ebf t\u1eeb kh\xe1ch h\xe0ng"),r.Vb(),r.Wb(14,"div",9),r.Rb(15,"img",10),r.Rb(16,"img",10),r.Rb(17,"img",10),r.Rb(18,"img",10),r.Vb(),r.Wb(19,"h1",11),r.Ec(20),r.jc(21,"async"),r.Vb(),r.Vb(),r.Vb(),r.Wb(22,"div",12),r.Wb(23,"div",13),r.Wb(24,"div",14),r.Wb(25,"div",18),r.Wb(26,"b"),r.Ec(27,"T\xean s\xe1ch: "),r.Vb(),r.Vb(),r.Wb(28,"div",17),r.Rb(29,"input",43),r.Vb(),r.Vb(),r.Wb(30,"div",14),r.Wb(31,"div",18),r.Wb(32,"b"),r.Ec(33,"T\xe1c gi\u1ea3: "),r.Vb(),r.Vb(),r.Wb(34,"div",17),r.Wb(35,"div",44),r.ec("click",(function(){return r.vc(e),r.ic().OpenAddAuthorModal()})),r.Rb(36,"i",45),r.Vb(),r.Wb(37,"select",46),r.Wb(38,"option",47),r.Ec(39,"Vui l\xf2ng ch\u1ecdn t\xe1c gi\u1ea3 "),r.Vb(),r.Cc(40,Et,2,3,"option",48),r.jc(41,"async"),r.Vb(),r.Vb(),r.Vb(),r.Wb(42,"div",14),r.Wb(43,"div",18),r.Wb(44,"b"),r.Ec(45,"Nh\xe0 cung c\u1ea5p: "),r.Vb(),r.Vb(),r.Wb(46,"div",17),r.Wb(47,"div",44),r.ec("click",(function(){return r.vc(e),r.ic().OpenAddSupplierModal()})),r.Rb(48,"i",45),r.Vb(),r.Wb(49,"select",49),r.Cc(50,Ot,2,5,"option",48),r.jc(51,"async"),r.Vb(),r.Vb(),r.Vb(),r.Wb(52,"div",14),r.Wb(53,"div",18),r.Wb(54,"b"),r.Ec(55,"Th\u1ec3 lo\u1ea1i: "),r.Vb(),r.Vb(),r.Wb(56,"div",17),r.Wb(57,"div",44),r.ec("click",(function(){return r.vc(e),r.ic().OpenAddCategoryModal()})),r.Rb(58,"i",45),r.Vb(),r.Wb(59,"select",50),r.Wb(60,"option",51),r.Ec(61,"Vui l\xf2ng ch\u1ecdn th\u1ec3 lo\u1ea1i s\xe1ch "),r.Vb(),r.Cc(62,Mt,4,2,"option",52),r.jc(63,"async"),r.Vb(),r.Vb(),r.Vb(),r.Wb(64,"div",14),r.Wb(65,"div",18),r.Wb(66,"b"),r.Ec(67,"S\u1ed1 trang: "),r.Vb(),r.Vb(),r.Wb(68,"div",17),r.Rb(69,"input",53),r.Vb(),r.Vb(),r.Wb(70,"div",14),r.Wb(71,"div",18),r.Wb(72,"b"),r.Ec(73,"Gi\xe1 v\u1ed1n: "),r.Vb(),r.Vb(),r.Wb(74,"div",17),r.Rb(75,"input",54),r.Vb(),r.Vb(),r.Wb(76,"div",14),r.Wb(77,"div",18),r.Wb(78,"b"),r.Ec(79,"Gi\xe1 b\xe1n: "),r.Vb(),r.Vb(),r.Wb(80,"div",17),r.Rb(81,"input",55),r.Vb(),r.Vb(),r.Wb(82,"div",14),r.Wb(83,"div",18),r.Wb(84,"b"),r.Ec(85,"Gi\u1ea3m gi\xe1 (%): "),r.Vb(),r.Vb(),r.Wb(86,"div",17),r.Rb(87,"input",56),r.Vb(),r.Vb(),r.Wb(88,"div",14),r.Wb(89,"div",18),r.Wb(90,"b"),r.Ec(91,"T\xf3m t\u1eaft: "),r.Vb(),r.Vb(),r.Wb(92,"div",17),r.Rb(93,"textarea",57),r.Vb(),r.Vb(),r.Wb(94,"div",14),r.Wb(95,"div",18),r.Wb(96,"b"),r.Ec(97,"Ghi ch\xfa: "),r.Vb(),r.Vb(),r.Wb(98,"div",17),r.Rb(99,"textarea",58),r.Vb(),r.Vb(),r.Vb(),r.Wb(100,"div",13),r.Wb(101,"div",14),r.Wb(102,"div",18),r.Wb(103,"div",19),r.ec("click",(function(){return r.vc(e),r.ic().goBack()})),r.Rb(104,"i",20),r.Ec(105," Quay l\u1ea1i"),r.Vb(),r.Vb(),r.Wb(106,"div",21),r.Wb(107,"div",59),r.ec("click",(function(){return r.vc(e),r.ic().setupDataForm()})),r.Wb(108,"span",24),r.Ec(109,"H\u1ee7y"),r.Vb(),r.Vb(),r.Wb(110,"div",25),r.ec("click",(function(){return r.vc(e),r.ic().UpdateBook()})),r.Wb(111,"span"),r.Ec(112,"X\xe1c nh\u1eadn"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb()}if(2&e){const e=r.ic();var n;r.oc("formGroup",e.updateBookForm),r.Db(3),r.Bc("background-image","url("+(e.updateBookForm.value.image||"assets/images/default-book.png")+")",r.Jb),r.Db(17),r.Gc("M\xe3 s\xe1ch: ",null==(n=r.kc(21,7,e.detail_book$))?null:n.studentCode,""),r.Db(20),r.oc("ngForOf",r.kc(41,9,e.authors$)),r.Db(10),r.oc("ngForOf",r.kc(51,11,e.suppliers$)),r.Db(12),r.oc("ngForOf",r.kc(63,13,e.categories$))}}let jt=(()=>{class e{constructor(e,t,n,o,i,c,r,a,l){this.bookQuery=e,this.bookService=t,this.router=n,this.fb=o,this.ref=i,this.route=c,this.modalController=r,this.bookStore=a,this.http=l,this.filter={page:1,per_page:1e3},this.isEditing=!1,this.detail_book$=this.bookQuery.detail_book$,this.authors$=this.bookQuery.authors$,this.categories$=this.bookQuery.categories$,this.suppliers$=this.bookQuery.suppliers$,this.updateBookForm=this.fb.group({book_id:[""],book_name:[""],author:[""],supplier:[""],category:[""],page_number:[""],cost_price:[""],retail_price:[""],discount:[""],old_amount:[""],new_amount:[""],description:[""],image:"",note:[""]})}ngOnInit(){return Object(u.a)(this,void 0,void 0,(function*(){const e={book_id:parseInt(this.route.snapshot.params.id)},t=yield this.bookService.getBookByID(e);this.bookService.setDetailBook(t),yield this.SetupData()}))}ngOnChanges(){return Object(u.a)(this,void 0,void 0,(function*(){}))}SetupData(){return Object(u.a)(this,void 0,void 0,(function*(){yield this.bookService.GetAuthors(this.filter),yield this.bookService.GetSuppliers(this.filter)}))}onClickUpdateBtn(){return Object(u.a)(this,void 0,void 0,(function*(){if(this.isEditing){let e=this.updateBookForm.value;yield this.bookService.UpdateBook(e)}else this.toggleEdit(),this.setupDataForm()}))}goBack(){this.isEditing?this.toggleEdit():this.router.navigateByUrl("admin/book-management/book-list")}toggleEdit(){this.isEditing=!this.isEditing}onOpenDeleteModal(){const e=this.modalController.create({component:vt,componentProps:{book:this.bookQuery.getValue().detail_book}});e.show().then(),e.onDismiss().then(e=>{if(e)try{this.bookService.DeleteBookById(e.book_id),this.router.navigateByUrl("admin/book-management/book-list"),toastr.success("B\u1ea1n \u0111\xe3 x\xf3a s\xe1ch th\xe0nh c\xf4ng")}catch(t){toastr.error("X\xf3a s\xe1ch kh\xf4ng th\xe0nh th\xf4ng",t.msg||t.message)}})}setupDataForm(){let e=this.bookQuery.getValue().detail_book;this.updateBookForm.patchValue({book_id:null==e?void 0:e.book_id,book_name:null==e?void 0:e.book_name,author:null==e?void 0:e.author,supplier:null==e?void 0:e.supplier,category:null==e?void 0:e.category,page_number:null==e?void 0:e.page_number,cost_price:null==e?void 0:e.cost_price,retail_price:null==e?void 0:e.retail_price,discount:null==e?void 0:e.discount,description:null==e?void 0:e.description,old_amount:null==e?void 0:e.old_amount,new_amount:null==e?void 0:e.new_amount,note:null==e?void 0:e.note,image:null==e?void 0:e.image})}OpenAddAuthorModal(){const e=this.modalController.create({component:Wt,componentProps:{}});e.show().then(),e.onDismiss().then(e=>Object(u.a)(this,void 0,void 0,(function*(){if(e)try{yield this.bookService.CreateAuthor(e),yield this.bookService.GetAuthors(this.filter),toastr.success("Th\xeam m\u1edbi t\xe1c gi\u1ea3 th\xe0nh c\xf4ng.")}catch(t){toastr.error("Th\xeam m\u1edbi t\xe1c gi\u1ea3 th\u1ea5t b\u1ea1i.",t.msg||t.message)}})))}OpenAddCategoryModal(){const e=this.modalController.create({component:Vt,cssClass:"modal-lg",componentProps:{}});e.show().then(),e.onDismiss().then(e=>Object(u.a)(this,void 0,void 0,(function*(){if(e)try{yield this.bookService.CreateCategory(e),toastr.success("Th\xeam m\u1edbi th\u1ec3 lo\u1ea1i s\xe1ch th\xe0nh c\xf4ng.")}catch(t){toastr.error("Th\xeam m\u1edbi th\u1ec3 lo\u1ea1i s\xe1ch th\u1ea5t b\u1ea1i.",t.msg||t.message)}})))}OpenAddSupplierModal(){const e=this.modalController.create({component:_t,cssClass:"modal-xl",componentProps:{}});e.show().then(),e.onDismiss().then(e=>Object(u.a)(this,void 0,void 0,(function*(){if(e)try{yield this.bookService.CreateSupplier(e),yield this.bookService.GetSuppliers(this.filter),toastr.success("Th\xeam m\u1edbi nh\xe0 cung c\u1ea5p th\xe0nh c\xf4ng.")}catch(t){toastr.error("Th\xeam m\u1edbi nh\xe0 cung c\u1ea5p th\u1ea5t b\u1ea1i.",t.msg||t.message)}})))}get book_detail_in_store(){return this.bookQuery.getValue().detail_book.supplier.supplier_id}UpdateBook(){return Object(u.a)(this,void 0,void 0,(function*(){let e=this.updateBookForm.value,t=Object.assign(Object.assign({},e),{category_id:e.category.category_id,supplier_id:e.supplier.supplier_id,author_id:e.author.author_id});try{let e=yield this.bookService.UpdateBook(t);this.bookStore.update({detail_book:e}),toastr.success("C\u1eadp nh\u1eadt s\xe1ch th\xe0nh c\xf4ng."),this.router.navigateByUrl("admin/book-management/book-list")}catch(n){toastr.error("C\u1eadp nh\u1eadt s\xe1ch th\u1ea5t b\u1ea1i.",n.msg||n.message)}}))}get author(){return this.bookQuery.getValue().detail_book.author}onChangeLogo(e){return Object(u.a)(this,void 0,void 0,(function*(){try{let t=new FormData;t.append("image",e.target.files[0],e.target.files[0].name);let n=yield this.http.post("http://localhost:5000/admin/book-management/upload-book-image",t).toPromise();this.updateBookForm.patchValue({image:n.image})}catch(t){toastr.error("C\u1eadp nh\u1eadt \u1ea3nh th\u1ea5t b\u1ea1i!",t.msg||t.message)}}))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(yt.a),r.Qb(kt.a),r.Qb(o.g),r.Qb(D.d),r.Qb(r.h),r.Qb(o.a),r.Qb(P.a),r.Qb(xt.a),r.Qb(ae.b))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-book-detail"]],features:[r.Bb],decls:10,vars:5,consts:[[1,"d-flex","justify-content-center","align-items-center","text-app","font-weight-bold"],[1,"font-weight-bold"],[4,"ngIf","ngIfElse"],["updateForm",""],[1,"d-flex","flex-row","p-5","mb-4"],[1,"avatar","col-3","mb-4"],[1,"d-flex","flex-column","align-items-center"],["alt","Avatar",2,"height","400px","width","300px","object-fit","cover",3,"src"],[1,"mt-3","text-center"],[1,"d-flex","flex-row","justify-content-center"],["src","assets/images/default-book.png","alt","Avatar",1,"p-1","m-2","real-avatar",2,"height","70px","width","70px","object-fit","cover"],[1,"text-app","text-left","font-weight-bold","text-center","my-4"],[1,"col-9","d-flex","flex-column"],[1,"d-flex","flex-column"],[1,"row","py-3"],[1,"col-2","text-center","font-weight-bold"],[1,"col-9","text-app","font-weight-bold"],[1,"col-9"],[1,"col-2","app-flex"],[1,"btn","btn-outline-app",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-left","pr-1"],[1,"col-9","d-flex","flex-row","justify-content-end"],[1,"btn-danger","align-self-center","mr-2",3,"click"],[1,"fas","fa-trash-alt","trash-icon"],[1,"ml-1",2,"width","60px"],[1,"btn-app","align-self-center",3,"click"],[1,"fas","fa-tools","mr-2"],["editButtons",""],[1,"d-flex","flex-row","ml-auto"],[1,"btn","btn-outline-danger","d-flex","justify-content-center","align-items-center","mr-2"],[1,"btn","btn-app","btn-outline-app","align-self-center"],[1,"ml-1"],[1,"d-flex","flex-row","p-5","mb-4",3,"formGroup"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],[1,"logo-upload","m-0","border","rounded","h-100","w-75"],[1,"mask","pt-2"],[1,"fas","fa-cloud-upload-alt","text-white"],[1,"over-logo","rounded","m-0","p-0"],["aria-hidden","true",1,"fa","fa-camera"],[1,"upload-loading","m-0","p-0"],["aria-hidden","true",1,"fa","fa-circle-o-notch","fa-spin"],["accept","image/png,image/jpg,image/jpeg,image/gif","name","file","type","file",1,"d-none",3,"change"],[1,"mt-3"],["type","text","placeholder","Nh\u1eadp t\xean s\xe1ch","formControlName","book_name",1,"form-control"],[1,"btn-add","px-3","py-2",3,"click"],[1,"fa","fa-plus"],["name","author","formControlName","author",1,"w3-select","w3-border","form-control","pl-1"],["value","","disabled",""],["class","font-weight-bold",3,"ngValue","selected",4,"ngFor","ngForOf"],["name","supplier","formControlName","supplier",1,"w3-select","w3-border","form-control","pl-1"],["name","category","formControlName","category",1,"w3-select","w3-border","form-control","pl-1"],["value","","disabled","","selected",""],["class","font-weight-bold",3,"ngValue",4,"ngFor","ngForOf"],["type","number","placeholder","Nh\u1eadp s\u1ed1 trang","formControlName","page_number",1,"form-control"],["type","number","placeholder","Nh\u1eadp gi\xe1 v\u1ed1n ","formControlName","cost_price",1,"form-control"],["type","number","placeholder","Nh\u1eadp gi\xe1 b\xe1n","formControlName","retail_price",1,"form-control"],["type","number","placeholder","Nh\u1eadp gi\xe1 tr\u1ecb gi\u1ea3m gi\xe1","formControlName","discount",1,"form-control"],["placeholder","Nh\u1eadp nh\xf3m t\u1eaft n\u1ed9i dung s\xe1ch","formControlName","description",1,"form-control"],["placeholder","Nh\u1eadp ghi ch\xfa","formControlName","note",1,"form-control"],[1,"btn-outline-app","align-self-center","mr-2",3,"click"],[1,"font-weight-bold",3,"ngValue","selected"],[1,"font-weight-bold",3,"ngValue"],[1,"px-3","py-2"]],template:function(e,t){if(1&e&&(r.Ub(0),r.Wb(1,"div",0),r.Wb(2,"h1",1),r.Ec(3,"Th\xf4ng tin chi ti\u1ebft s\xe1ch "),r.Wb(4,"span"),r.Ec(5),r.jc(6,"async"),r.Vb(),r.Vb(),r.Vb(),r.Cc(7,Ct,131,51,"ng-container",2),r.Cc(8,Dt,113,15,"ng-template",null,3,r.Dc),r.Tb()),2&e){const e=r.tc(9);var n;r.Db(5),r.Fc(null==(n=r.kc(6,3,t.detail_book$))?null:n.book_name),r.Db(2),r.oc("ngIf",!t.isEditing)("ngIfElse",e)}},directives:[c.m,D.n,D.h,D.c,D.m,D.g,D.u,D.q,D.w,c.l,D.r],pipes:[c.b,g.b,g.a],styles:[".logo-upload[_ngcontent-%COMP%]{width:100%;padding-bottom:100%;cursor:pointer;background-size:cover;background-position:50%;background-repeat:no-repeat;border-radius:5px;position:relative}.logo-upload[_ngcontent-%COMP%]   .over-logo[_ngcontent-%COMP%], .logo-upload[_ngcontent-%COMP%]   .upload-loading[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;display:none;background:rgba(0,0,0,.8);color:var(--white-color);justify-content:center;align-items:center;border-radius:5px}.logo-upload[_ngcontent-%COMP%]   .mask[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;color:#fff;font-size:3rem;text-align:center;font-weight:600;width:100%;height:25%;background-color:rgba(0,0,0,.5);display:none}.logo-upload[_ngcontent-%COMP%]:hover   .mask[_ngcontent-%COMP%]{display:block;-webkit-animation:goup .6s ease-out;animation:goup .6s ease-out}.logo-upload.loading[_ngcontent-%COMP%]   .upload-loading[_ngcontent-%COMP%]{display:flex}"]}),e})(),Pt=(()=>{class e{}return e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({factory:function(t){return new(t||e)},imports:[[c.c]]}),e})();var Tt=n("Ujjn");let St=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["app-book-row"]],inputs:{book_item:"book_item",index:"index"},decls:22,vars:14,consts:[[1,"item-row","py-2"],[1,"row"],[1,"col","align-self-center","text-center","text-app","font-weight-bold",2,"max-width","150px"],[1,"col","align-self-center","text-center",2,"max-width","150px"],["alt","",2,"height","80px","width","60px","object-fit","cover",3,"src"],[1,"col","align-self-center","text-center","text-app"],[1,"col","align-self-center","text-center",2,"max-width","300px"],[1,"col","align-self-center","text-center",2,"max-width","200px"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"div",2),r.Ec(3),r.jc(4,"standardizedId"),r.Vb(),r.Wb(5,"div",3),r.Rb(6,"img",4),r.Vb(),r.Wb(7,"div",5),r.Wb(8,"b"),r.Ec(9),r.Vb(),r.Vb(),r.Wb(10,"div",6),r.Ec(11),r.Vb(),r.Wb(12,"div",7),r.Ec(13),r.Vb(),r.Wb(14,"div",7),r.Ec(15),r.jc(16,"vnd"),r.Vb(),r.Wb(17,"div",7),r.Ec(18),r.jc(19,"vnd"),r.Vb(),r.Wb(20,"div",7),r.Ec(21),r.Vb(),r.Vb(),r.Vb()),2&e&&(r.Db(3),r.Fc(r.kc(4,8,null==t.book_item?null:t.book_item.book_id)),r.Db(3),r.oc("src",(null==t.book_item?null:t.book_item.image)||"assets/images/default-book.png",r.xc),r.Db(3),r.Fc((null==t.book_item?null:t.book_item.book_name)||"-"),r.Db(2),r.Fc((null==t.book_item||null==t.book_item.author?null:t.book_item.author.author_name)||"-"),r.Db(2),r.Gc(" ",(null==t.book_item||null==t.book_item.supplier?null:t.book_item.supplier.contact_name)||"-"," "),r.Db(2),r.Fc(r.kc(16,10,null==t.book_item?null:t.book_item.cost_price)||"-"),r.Db(3),r.Fc(r.kc(19,12,null==t.book_item?null:t.book_item.retail_price)||"-"),r.Db(3),r.Fc((null==t.book_item?null:t.book_item.old_amount)+(null==t.book_item?null:t.book_item.new_amount)||"-"))},pipes:[g.b,g.a],styles:[".item-row[_ngcontent-%COMP%]{display:flex;transition:.5s;padding-left:36px;height:100px;cursor:pointer;align-self:center!important;flex-direction:column;justify-content:center;box-shadow:3px 3px 8px 3px rgba(122,159,216,.2);margin-bottom:20px}.item-row[_ngcontent-%COMP%]:hover{background-color:#e4e4e4;border-left:7px solid var(--app-color)}.item-row[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{position:relative;display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;overflow:hidden;line-height:22px}.item-row[_ngcontent-%COMP%]   .trash-icon[_ngcontent-%COMP%]{border-radius:50%;padding:5px;background-color:#f5f5f5}.item-row[_ngcontent-%COMP%]   .trash-can[_ngcontent-%COMP%]{padding:3px 20px 3px 2px;border-radius:30px;margin-bottom:5px;display:flex;width:auto;align-items:center;flex-direction:row;justify-content:center}.item-row[_ngcontent-%COMP%]   .trash-can[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;color:#f5f5f5;margin-left:10px;font-size:.8rem}"]}),e})();function Ft(e,t){}function Qt(e,t){1&e&&(r.Wb(0,"p"),r.Ec(1,"Day la the item n\xe0"),r.Vb())}function Nt(e,t){if(1&e&&(r.Wb(0,"option",19),r.Ec(1),r.Wb(2,"div",20),r.Rb(3,"i",21),r.Vb(),r.Vb()),2&e){const e=t.$implicit;r.oc("ngValue",e.supplier_id),r.Db(1),r.Gc(" ",null==e?null:e.contact_name," ")}}function Rt(e,t){if(1&e&&(r.Wb(0,"option",19),r.Ec(1),r.Wb(2,"div",20),r.Rb(3,"i",21),r.Vb(),r.Vb()),2&e){const e=t.$implicit;r.oc("ngValue",e.category_id),r.Db(1),r.Gc(" ",null==e?null:e.category_name," ")}}function $t(e,t){if(1&e){const e=r.Xb();r.Ub(0),r.Wb(1,"app-book-row",22),r.ec("click",(function(){r.vc(e);const n=t.$implicit;return r.ic(2).onViewBookDetail(n.book_id)})),r.Vb(),r.Tb()}if(2&e){const e=t.$implicit,n=t.index;r.Db(1),r.oc("book_item",e)("index",n)}}function It(e,t){if(1&e){const e=r.Xb();r.Wb(0,"div",3),r.Wb(1,"div",4),r.Wb(2,"input",5),r.ec("ngModelChange",(function(t){return r.vc(e),r.ic().book_id=t})),r.Vb(),r.Wb(3,"input",6),r.ec("ngModelChange",(function(t){return r.vc(e),r.ic().searchKeyword=t})),r.Vb(),r.Wb(4,"select",7),r.ec("ngModelChange",(function(t){return r.vc(e),r.ic().supplier_id=t})),r.Wb(5,"option",8),r.Ec(6,"Ch\u1ecdn nh\xe0 cung c\u1ea5p "),r.Vb(),r.Cc(7,Nt,4,2,"option",9),r.jc(8,"async"),r.Vb(),r.Wb(9,"select",7),r.ec("ngModelChange",(function(t){return r.vc(e),r.ic().category_id=t})),r.Wb(10,"option",8),r.Ec(11,"Ch\u1ecdn th\u1ec3 lo\u1ea1i "),r.Vb(),r.Cc(12,Rt,4,2,"option",9),r.jc(13,"async"),r.Vb(),r.Wb(14,"div",10),r.ec("click",(function(){return r.vc(e),r.ic().SearchBooks()})),r.Ec(15,"T\xecm ki\u1ebfm"),r.Vb(),r.Vb(),r.Wb(16,"div",11),r.Wb(17,"div",12),r.Wb(18,"div",13),r.Ec(19,"M\xe3 s\xe1ch"),r.Vb(),r.Wb(20,"div",13),r.Ec(21,"H\xecnh \u1ea3nh"),r.Vb(),r.Wb(22,"div",14),r.Ec(23,"T\xean s\xe1ch"),r.Vb(),r.Wb(24,"div",15),r.Ec(25,"T\xe1c gi\u1ea3"),r.Vb(),r.Wb(26,"div",16),r.Ec(27,"Nh\xe0 cung c\u1ea5p"),r.Vb(),r.Wb(28,"div",16),r.Ec(29,"Gi\xe1 v\u1ed1n"),r.Vb(),r.Wb(30,"div",16),r.Ec(31,"Gi\xe1 b\xe1n"),r.Vb(),r.Wb(32,"div",16),r.Ec(33,"T\u1ed5ng l\u01b0\u1ee3ng"),r.Vb(),r.Vb(),r.Vb(),r.Cc(34,$t,2,2,"ng-container",17),r.jc(35,"async"),r.Wb(36,"app-page-pagination",18),r.ec("navigate",(function(t){return r.vc(e),r.ic().navigate(t)})),r.jc(37,"async"),r.Vb(),r.Vb()}if(2&e){const e=r.ic();var n=null;const t=null==(n=r.kc(35,13,e.book_list$))?null:n.items.slice().reverse();r.Db(2),r.oc("ngModel",e.book_id),r.Db(1),r.oc("ngModel",e.searchKeyword),r.Db(1),r.oc("ngModel",e.supplier_id),r.Db(3),r.oc("ngForOf",r.kc(8,9,e.suppliers$)),r.Db(2),r.oc("ngModel",e.category_id),r.Db(3),r.oc("ngForOf",r.kc(13,11,e.categories$)),r.Db(22),r.oc("ngForOf",t),r.Db(2),r.oc("paginationOpt",e.current_pagination_opt$)("currentPage",r.kc(37,15,e.current_page$))}}let Bt=(()=>{class e{constructor(e,t,n,o,i,c,r){this.router=e,this.bookService=t,this.bookQuery=n,this.bookStore=o,this.ref=i,this.supplierService=c,this.supplierQuery=r,this.book_list$=this.bookQuery.book_list_view$,this.current_pagination_opt$=this.bookQuery.current_pagination_opt$,this.categories$=this.bookQuery.categories$,this.current_page$=this.bookQuery.current_page$,this.suppliers$=this.supplierQuery.select("supplier_list_view").pipe(Object(fe.a)(e=>null==e?void 0:e.items)),this.book_id="",this.searchKeyword="",this.category_id="",this.supplier_id=""}ngOnInit(){return Object(u.a)(this,void 0,void 0,(function*(){yield this.onRequestNewPage()}))}onRequestNewPage(){return Object(u.a)(this,void 0,void 0,(function*(){yield this.bookService.getBooks(this.bookQuery.getValue().filter_page).then(()=>{this.bookService.setupPagination()}),yield this.supplierService.GetSuppliers(this.supplierQuery.getValue().filter_page).then(()=>{})}))}SearchBooks(){return Object(u.a)(this,void 0,void 0,(function*(){if(!(this.searchKeyword||this.book_id||this.category_id||this.supplier_id))return yield this.onRequestNewPage();const e={book_id:this.book_id||null,book_name:this.searchKeyword||null,category_id:this.category_id||null,supplier_id:this.supplier_id||null};let t=yield this.bookService.searchBooks(e),n=this.bookStore.getValue().book_list_view;this.bookStore.update(t.books.length?{book_list_view:Object.assign(Object.assign({},n),{items:t.books,has_next:!1,has_prev:!1,current_page:1})}:{book_list_view:Object.assign(Object.assign({},n),{items:[],has_next:!1,has_prev:!1,current_page:1})})}))}navigate(e){return Object(u.a)(this,void 0,void 0,(function*(){this.bookService.navigate(e),yield this.onRequestNewPage()}))}onViewBookDetail(e){this.router.navigateByUrl("/admin/book-management/book-detail/"+e)}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(o.g),r.Qb(kt.a),r.Qb(yt.a),r.Qb(xt.a),r.Qb(r.h),r.Qb(Ie.a),r.Qb(Ae.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-book-list"]],decls:7,vars:0,consts:[["header",""],["emptyItem",""],["item",""],[1,"d-flex","flex-column","h-100"],[1,"row","app-flex","mb-3"],["type","text","placeholder","Nh\u1eadp m\xe3 s\xe1ch",1,"form-control","rounded-pill","col-2","p-4","mr-3",3,"ngModel","ngModelChange"],["type","text","placeholder","Nh\u1eadp t\xean s\xe1ch",1,"form-control","rounded-pill","col-2","p-4","mr-3",3,"ngModel","ngModelChange"],["name","category",1,"form-control","col-2","p-2","rounded-pill","mr-3",3,"ngModel","ngModelChange"],["value","","selected",""],["class","font-weight-bold",3,"ngValue",4,"ngFor","ngForOf"],[1,"btn-app","rounded-pill","col-1",3,"click"],[1,"table","mt-3"],[1,"table-header","row","font-weight-bold","text-uppercase","ng-star-inserted","align-items-center","my-3"],[1,"col","text-center","text-app",2,"max-width","150px"],[1,"col","text-center","text-app"],[1,"col","text-center","text-app",2,"max-width","300px"],[1,"col","text-center","text-app",2,"max-width","200px"],[4,"ngFor","ngForOf"],[1,"mt-auto",3,"paginationOpt","currentPage","navigate"],[1,"font-weight-bold",3,"ngValue"],[1,"px-3","py-2"],[1,"fa","fa-plus"],[3,"book_item","index","click"]],template:function(e,t){1&e&&(r.Wb(0,"app-item-table"),r.Cc(1,Ft,0,0,"ng-template",null,0,r.Dc),r.Cc(3,Qt,2,0,"ng-template",null,1,r.Dc),r.Cc(5,It,38,17,"ng-template",null,2,r.Dc),r.Vb())},directives:[B,D.c,D.m,D.p,D.u,D.q,D.w,c.l,y.b,St],pipes:[c.b],styles:[".table-header[_ngcontent-%COMP%]{padding-left:36px}"]}),e})();function At(e,t){if(1&e&&(r.Wb(0,"option",43),r.Ec(1),r.Wb(2,"div",44),r.Rb(3,"i",23),r.Vb(),r.Vb()),2&e){const e=t.$implicit;r.oc("ngValue",e),r.Db(1),r.Gc(" ",null==e?null:e.author_name," ")}}function Gt(e,t){if(1&e&&(r.Wb(0,"option",43),r.Ec(1),r.Wb(2,"div",44),r.Rb(3,"i",23),r.Vb(),r.Vb()),2&e){const e=t.$implicit;r.oc("ngValue",e),r.Db(1),r.Ic(" ",(null==e?null:e.contact_name)||"T\xean li\xean l\u1ea1c"," - ",(null==e?null:e.phone)||"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"," - ",(null==e?null:e.email)||"email"," ")}}function Ut(e,t){if(1&e&&(r.Wb(0,"option",43),r.Ec(1),r.Wb(2,"div",44),r.Rb(3,"i",23),r.Vb(),r.Vb()),2&e){const e=t.$implicit;r.oc("ngValue",e),r.Db(1),r.Gc(" ",null==e?null:e.category_name," ")}}let Lt=(()=>{class e{constructor(e,t,n,o,i,c,r,a){this.fb=e,this.router=t,this.bookService=n,this.bookStore=o,this.bookQuery=i,this.modalController=c,this.apiAppService=r,this.http=a,this.filter={page:1,per_page:1e3},this.createBookForm=this.fb.group({book_name:[""],author:[""],supplier:[""],category:[""],page_number:[""],cost_price:[""],retail_price:[""],discount:[""],old_amount:[""],new_amount:[""],description:[""],note:[""],image:""}),this.baseURL="",this.authors$=this.bookQuery.authors$,this.categories$=this.bookQuery.categories$,this.suppliers$=this.bookQuery.suppliers$,this.baseURL=this.apiAppService.baseURL}ngOnInit(){return Object(u.a)(this,void 0,void 0,(function*(){yield this.SetupData()}))}onCreateUser(){return Object(u.a)(this,void 0,void 0,(function*(){}))}SetupData(){return Object(u.a)(this,void 0,void 0,(function*(){yield this.bookService.GetAuthors(this.filter),yield this.bookService.GetSuppliers(this.filter)}))}ResetDataForm(){this.createBookForm.patchValue({book_name:"",author:"",supplier:"",category:"",page_number:"",cost_price:"",retail_price:"",discount:"",description:"",old_amount:"",new_amount:"",note:""})}CreateBook(){return Object(u.a)(this,void 0,void 0,(function*(){let e=this.createBookForm.value;if(e.book_name&&e.author&&e.supplier&&e.category&&e.cost_price&&e.retail_price)try{let t=Object.assign(Object.assign({},e),{category_id:e.category.category_id,supplier_id:e.supplier.supplier_id,author_id:e.author.author_id}),n=yield this.bookService.CreateBook(t);this.router.navigateByUrl("/admin/book-management/book-detail/"+n.book_id),toastr.success("T\u1ea1o m\u1edbi s\xe1ch th\xe0nh c\xf4ng.")}catch(t){toastr.error("T\u1ea1o m\u1edbi s\xe1ch th\u1ea5t b\u1ea1i",t.msg||t.message)}else toastr.error("T\u1ea1o m\u1edbi s\xe1ch th\u1ea5t b\u1ea1i.","Vui l\xf2ng nh\u1eadp \u0111\u1ea7y \u0111\u1ee7 th\xf4ng tin s\xe1ch.")}))}goBack(){this.router.navigateByUrl("admin/book-management/book-list")}OpenAddAuthorModal(){const e=this.modalController.create({component:Wt,componentProps:{}});e.show().then(),e.onDismiss().then(e=>Object(u.a)(this,void 0,void 0,(function*(){if(e)try{yield this.bookService.CreateAuthor(e),yield this.bookService.GetAuthors(this.filter),toastr.success("Th\xeam m\u1edbi t\xe1c gi\u1ea3 th\xe0nh c\xf4ng.")}catch(t){toastr.error("Th\xeam m\u1edbi t\xe1c gi\u1ea3 th\u1ea5t b\u1ea1i.",t.msg||t.message)}})))}OpenAddCategoryModal(){const e=this.modalController.create({component:Vt,cssClass:"modal-lg",componentProps:{}});e.show().then(),e.onDismiss().then(e=>Object(u.a)(this,void 0,void 0,(function*(){if(e)try{yield this.bookService.CreateCategory(e),toastr.success("Th\xeam m\u1edbi th\u1ec3 lo\u1ea1i s\xe1ch th\xe0nh c\xf4ng.")}catch(t){toastr.error("Th\xeam m\u1edbi th\u1ec3 lo\u1ea1i s\xe1ch th\u1ea5t b\u1ea1i.",t.msg||t.message)}})))}OpenAddSupplierModal(){const e=this.modalController.create({component:_t,cssClass:"modal-xl",componentProps:{}});e.show().then(),e.onDismiss().then(e=>Object(u.a)(this,void 0,void 0,(function*(){if(e)try{yield this.bookService.CreateSupplier(e),yield this.bookService.GetSuppliers(this.filter),toastr.success("Th\xeam m\u1edbi nh\xe0 cung c\u1ea5p th\xe0nh c\xf4ng.")}catch(t){toastr.error("Th\xeam m\u1edbi nh\xe0 cung c\u1ea5p th\u1ea5t b\u1ea1i.",t.msg||t.message)}})))}onChangeLogo(e){return Object(u.a)(this,void 0,void 0,(function*(){try{let t=new FormData;t.append("image",e.target.files[0],e.target.files[0].name);let n=yield this.http.post("http://localhost:5000/admin/book-management/upload-book-image",t).toPromise();this.createBookForm.patchValue({image:n.image})}catch(t){toastr.error("C\u1eadp nh\u1eadt \u1ea3nh th\u1ea5t b\u1ea1i!",t.msg||t.message)}}))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(D.d),r.Qb(o.g),r.Qb(kt.a),r.Qb(xt.a),r.Qb(yt.a),r.Qb(P.a),r.Qb(x.a),r.Qb(ae.b))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-create-book"]],decls:124,vars:12,consts:[[1,""],[1,"d-flex","justify-content-center","align-items-center","text-app","font-weight-bold"],[1,"font-weight-bold"],[1,"d-flex","flex-row","p-5","mb-4",3,"formGroup"],[1,"avatar","col-3","mb-4"],[1,"d-flex","flex-column","flex-app"],[1,"product-detail-img"],[1,"logo-upload","m-0","border","rounded","h-100","w-75"],[1,"mask","pt-2"],[1,"fas","fa-cloud-upload-alt","text-white"],[1,"over-logo","rounded","m-0","p-0"],["aria-hidden","true",1,"fa","fa-camera"],[1,"upload-loading","m-0","p-0"],["aria-hidden","true",1,"fa","fa-circle-o-notch","fa-spin"],["accept","image/png,image/jpg,image/jpeg,image/gif","name","file","type","file",1,"d-none",3,"change"],[1,"text-app","text-center","font-weight-bold"],[1,"col-9","d-flex","flex-column"],[1,"d-flex","flex-column"],[1,"row","py-3"],[1,"col-2","app-flex"],[1,"col-9"],["type","text","placeholder","Nh\u1eadp t\xean s\xe1ch","formControlName","book_name",1,"form-control"],[1,"btn-add","px-3","py-2",3,"click"],[1,"fa","fa-plus"],["name","author","formControlName","author",1,"w3-select","w3-border","form-control","pl-1"],["value","","disabled","","selected",""],["class","font-weight-bold",3,"ngValue",4,"ngFor","ngForOf"],["name","category","formControlName","supplier",1,"w3-select","w3-border","form-control","pl-1"],["name","category","formControlName","category",1,"w3-select","w3-border","form-control","pl-1"],["type","number","placeholder","Nh\u1eadp s\u1ed1 trang","formControlName","page_number",1,"form-control"],["type","number","placeholder","Nh\u1eadp gi\xe1 v\u1ed1n ","formControlName","cost_price",1,"form-control"],["type","number","placeholder","Nh\u1eadp gi\xe1 b\xe1n","formControlName","retail_price",1,"form-control"],["type","number","placeholder","Nh\u1eadp s\u1ed1 l\u01b0\u1ee3ng s\xe1ch b\xe1n","formControlName","new_amount",1,"form-control"],["type","number","placeholder","Nh\u1eadp s\u1ed1 l\u01b0\u1ee3ng s\xe1ch m\u01b0\u1ee3n","formControlName","old_amount",1,"form-control"],["type","number","placeholder","Nh\u1eadp gi\xe1 tr\u1ecb gi\u1ea3m gi\xe1","formControlName","discount",1,"form-control"],["placeholder","Nh\u1eadp nh\xf3m t\u1eaft n\u1ed9i dung s\xe1ch","formControlName","description",1,"form-control"],["placeholder","Nh\u1eadp ghi ch\xfa","formControlName","note",1,"form-control"],[1,"btn","btn-outline-app",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-left","pr-1"],[1,"col-9","d-flex","flex-row","justify-content-end"],[1,"btn-outline-app","align-self-center","mr-2",3,"click"],[1,"ml-1",2,"width","60px"],[1,"btn-app","align-self-center",3,"click"],[1,"font-weight-bold",3,"ngValue"],[1,"px-3","py-2"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"h1",2),r.Ec(3,"\u0110\u0103ng k\xfd s\xe1ch m\u1edbi"),r.Vb(),r.Vb(),r.Wb(4,"div",3),r.Wb(5,"div",4),r.Wb(6,"div",5),r.Wb(7,"div",6),r.Wb(8,"label",7),r.Wb(9,"div",8),r.Ec(10,"Upload \u1ea3nh "),r.Rb(11,"i",9),r.Vb(),r.Wb(12,"div",10),r.Rb(13,"i",11),r.Vb(),r.Wb(14,"div",12),r.Rb(15,"i",13),r.Vb(),r.Wb(16,"input",14),r.ec("change",(function(e){return t.onChangeLogo(e)})),r.Vb(),r.Vb(),r.Vb(),r.Wb(17,"h1",15),r.Ec(18,"T\u1ea3i \u1ea3nh b\xeca"),r.Vb(),r.Vb(),r.Vb(),r.Wb(19,"div",16),r.Wb(20,"div",17),r.Wb(21,"div",18),r.Wb(22,"div",19),r.Wb(23,"b"),r.Ec(24,"T\xean s\xe1ch: "),r.Vb(),r.Vb(),r.Wb(25,"div",20),r.Rb(26,"input",21),r.Vb(),r.Vb(),r.Wb(27,"div",18),r.Wb(28,"div",19),r.Wb(29,"b"),r.Ec(30,"T\xe1c gi\u1ea3: "),r.Vb(),r.Vb(),r.Wb(31,"div",20),r.Wb(32,"div",22),r.ec("click",(function(){return t.OpenAddAuthorModal()})),r.Rb(33,"i",23),r.Vb(),r.Wb(34,"select",24),r.Wb(35,"option",25),r.Ec(36,"Vui l\xf2ng ch\u1ecdn t\xe1c gi\u1ea3 "),r.Vb(),r.Cc(37,At,4,2,"option",26),r.jc(38,"async"),r.Vb(),r.Vb(),r.Vb(),r.Wb(39,"div",18),r.Wb(40,"div",19),r.Wb(41,"b"),r.Ec(42,"Nh\xe0 cung c\u1ea5p: "),r.Vb(),r.Vb(),r.Wb(43,"div",20),r.Wb(44,"div",22),r.ec("click",(function(){return t.OpenAddSupplierModal()})),r.Rb(45,"i",23),r.Vb(),r.Wb(46,"select",27),r.Wb(47,"option",25),r.Ec(48,"Vui l\xf2ng ch\u1ecdn nh\xe0 cung c\u1ea5p "),r.Vb(),r.Cc(49,Gt,4,4,"option",26),r.jc(50,"async"),r.Vb(),r.Vb(),r.Vb(),r.Wb(51,"div",18),r.Wb(52,"div",19),r.Wb(53,"b"),r.Ec(54,"Th\u1ec3 lo\u1ea1i: "),r.Vb(),r.Vb(),r.Wb(55,"div",20),r.Wb(56,"div",22),r.ec("click",(function(){return t.OpenAddCategoryModal()})),r.Rb(57,"i",23),r.Vb(),r.Wb(58,"select",28),r.Wb(59,"option",25),r.Ec(60,"Vui l\xf2ng ch\u1ecdn th\u1ec3 lo\u1ea1i s\xe1ch "),r.Vb(),r.Cc(61,Ut,4,2,"option",26),r.jc(62,"async"),r.Vb(),r.Vb(),r.Vb(),r.Wb(63,"div",18),r.Wb(64,"div",19),r.Wb(65,"b"),r.Ec(66,"S\u1ed1 trang: "),r.Vb(),r.Vb(),r.Wb(67,"div",20),r.Rb(68,"input",29),r.Vb(),r.Vb(),r.Wb(69,"div",18),r.Wb(70,"div",19),r.Wb(71,"b"),r.Ec(72,"Gi\xe1 v\u1ed1n: "),r.Vb(),r.Vb(),r.Wb(73,"div",20),r.Rb(74,"input",30),r.Vb(),r.Vb(),r.Wb(75,"div",18),r.Wb(76,"div",19),r.Wb(77,"b"),r.Ec(78,"Gi\xe1 b\xe1n: "),r.Vb(),r.Vb(),r.Wb(79,"div",20),r.Rb(80,"input",31),r.Vb(),r.Vb(),r.Wb(81,"div",18),r.Wb(82,"div",19),r.Wb(83,"b"),r.Ec(84,"S\u1ed1 l\u01b0\u1ee3ng s\xe1ch b\xe1n: "),r.Vb(),r.Vb(),r.Wb(85,"div",20),r.Rb(86,"input",32),r.Vb(),r.Vb(),r.Wb(87,"div",18),r.Wb(88,"div",19),r.Wb(89,"b"),r.Ec(90,"S\u1ed1 l\u01b0\u1ee3ng s\xe1ch m\u01b0\u1ee3n: "),r.Vb(),r.Vb(),r.Wb(91,"div",20),r.Rb(92,"input",33),r.Vb(),r.Vb(),r.Wb(93,"div",18),r.Wb(94,"div",19),r.Wb(95,"b"),r.Ec(96,"Gi\u1ea3m gi\xe1 (%): "),r.Vb(),r.Vb(),r.Wb(97,"div",20),r.Rb(98,"input",34),r.Vb(),r.Vb(),r.Wb(99,"div",18),r.Wb(100,"div",19),r.Wb(101,"b"),r.Ec(102,"T\xf3m t\u1eaft: "),r.Vb(),r.Vb(),r.Wb(103,"div",20),r.Rb(104,"textarea",35),r.Vb(),r.Vb(),r.Wb(105,"div",18),r.Wb(106,"div",19),r.Wb(107,"b"),r.Ec(108,"Ghi ch\xfa: "),r.Vb(),r.Vb(),r.Wb(109,"div",20),r.Rb(110,"textarea",36),r.Vb(),r.Vb(),r.Vb(),r.Wb(111,"div",17),r.Wb(112,"div",18),r.Wb(113,"div",19),r.Wb(114,"div",37),r.ec("click",(function(){return t.goBack()})),r.Rb(115,"i",38),r.Ec(116," Quay l\u1ea1i"),r.Vb(),r.Vb(),r.Wb(117,"div",39),r.Wb(118,"div",40),r.ec("click",(function(){return t.ResetDataForm()})),r.Wb(119,"span",41),r.Ec(120,"H\u1ee7y"),r.Vb(),r.Vb(),r.Wb(121,"div",42),r.ec("click",(function(){return t.CreateBook()})),r.Wb(122,"span"),r.Ec(123,"T\u1ea1o m\u1edbi"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb()),2&e&&(r.Db(4),r.oc("formGroup",t.createBookForm),r.Db(4),r.Bc("background-image","url("+(t.createBookForm.value.image||"assets/images/default-book.png")+")",r.Jb),r.Db(29),r.oc("ngForOf",r.kc(38,6,t.authors$)),r.Db(12),r.oc("ngForOf",r.kc(50,8,t.suppliers$)),r.Db(12),r.oc("ngForOf",r.kc(62,10,t.categories$)))},directives:[D.n,D.h,D.c,D.m,D.g,D.u,D.q,D.w,c.l,D.r],pipes:[c.b],styles:[".detail-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{height:39px;box-sizing:border-box}.product-detail-img[_ngcontent-%COMP%]{text-align:center}.logo-upload[_ngcontent-%COMP%], .product-detail-img[_ngcontent-%COMP%]{border-radius:5px;position:relative}.logo-upload[_ngcontent-%COMP%]{width:100%;padding-bottom:100%;cursor:pointer;background-size:cover;background-position:50%;background-repeat:no-repeat}.logo-upload[_ngcontent-%COMP%]   .over-logo[_ngcontent-%COMP%], .logo-upload[_ngcontent-%COMP%]   .upload-loading[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;display:none;background:rgba(0,0,0,.8);color:var(--white-color);justify-content:center;align-items:center;border-radius:5px}.logo-upload[_ngcontent-%COMP%]   .mask[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;color:#fff;font-size:3rem;text-align:center;font-weight:600;width:100%;height:25%;background-color:rgba(0,0,0,.5);display:none}.logo-upload[_ngcontent-%COMP%]:hover   .mask[_ngcontent-%COMP%]{display:block;-webkit-animation:goup .6s ease-out;animation:goup .6s ease-out}.logo-upload.loading[_ngcontent-%COMP%]   .upload-loading[_ngcontent-%COMP%]{display:flex}.product-slide-item[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:var(--light)}.product-slide-item[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:400;padding:7px 15px;border-bottom:1px solid var(--border-gray-color);border-top:1px solid var(--border-gray-color)}.product-slide-item[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 15px}.product-slide-item[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid var(--border-gray-color)}.add-btn[_ngcontent-%COMP%]{position:absolute;right:10px;top:10px;border:none!important}"]}),e})();function zt(e,t){if(1&e&&(r.Ub(0),r.Wb(1,"a",4),r.Ec(2),r.Vb(),r.Tb()),2&e){const e=t.$implicit;r.Db(1),r.oc("routerLink",e.url),r.Db(1),r.Fc(e.itemName)}}let Xt=(()=>{class e{constructor(){this.headerItems=[{itemName:"Danh s\xe1ch",url:"book-list"},{itemName:"T\u1ea1o m\u1edbi",url:"create-book"}]}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["app-book-management"]],decls:6,vars:1,consts:[[1,"p-0","pl-2","header-admin","d-flex","align-items-center"],[1,"page-title","font-weight-bold","pl-4","mr-5"],[4,"ngFor","ngForOf"],[1,"page-content-admin","p-4"],["routerLinkActive","active",1,"header-item",3,"routerLink"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Ec(2," Qu\u1ea3n l\xfd s\xe1ch "),r.Vb(),r.Cc(3,zt,3,2,"ng-container",2),r.Vb(),r.Wb(4,"div",3),r.Rb(5,"router-outlet"),r.Vb()),2&e&&(r.Db(3),r.oc("ngForOf",t.headerItems))},directives:[c.l,o.l,o.j,o.i],styles:[""]}),e})();function qt(e,t){if(1&e){const e=r.Xb();r.Ub(0),r.Wb(1,"div",6),r.ec("click",(function(){r.vc(e);const n=t.$implicit;return r.ic().onRedirect(n.routerLink)})),r.Wb(2,"div",3),r.Rb(3,"span",7),r.Vb(),r.Wb(4,"div",5),r.Ec(5),r.Vb(),r.Vb(),r.Tb()}if(2&e){const e=t.$implicit;r.Db(3),r.oc("outerHTML",e.iconHtml,r.wc),r.Db(2),r.Fc(e.itemTitle)}}let Kt=(()=>{class e{constructor(e,t,n){this.router=e,this.accountService=t,this.activatedRoute=n,this.menuItems=[{iconHtml:'<i class="fas fa-2x fa-chart-bar" aria-hidden="true"></i>',itemTitle:"T\u1ed5ng quan",routerLink:"dashboard"},{iconHtml:'<i class="fa fa-2x fa-book" aria-hidden="true"></i>',itemTitle:"Qu\u1ea3n l\xfd s\xe1ch",routerLink:"book-management"},{iconHtml:'<i class="fa fa-2x fa-shopping-cart" aria-hidden="true"></i>',itemTitle:"POS",routerLink:"pos-management"},{iconHtml:'<i class="fas fa-receipt fa-2x"></i>',itemTitle:"Qu\u1ea3n l\xfd h\xf3a \u0111\u01a1n",routerLink:"order-management"},{iconHtml:'<i class="fa fa-2x fa-ticket" aria-hidden="true"></i>',itemTitle:"Qu\u1ea3n l\xfd m\u01b0\u1ee3n tr\u1ea3",routerLink:"borrow-ticket-management"},{iconHtml:'<i class="fa fa-2x fa-truck" aria-hidden="true"></i>',itemTitle:"Qu\u1ea3n l\xfd nh\xe0 cung c\u1ea5p",routerLink:"supplier-management"},{iconHtml:'<i class="fa fa-2x fa-user-circle" aria-hidden="true"></i>',itemTitle:"Qu\u1ea3n l\xfd t\xe0i kho\u1ea3n",routerLink:"account-management"},{iconHtml:'<i class="fas fa-tools  fa-2x"></i>',itemTitle:"Thi\u1ebft l\u1eadp",routerLink:"settings"},{iconHtml:'<i class="fas fa-comments  fa-2x"></i>',itemTitle:"Ch\u0103m s\xf3c kh\xe1ch h\xe0ng",routerLink:"message-management"}]}ngOnInit(){}onRedirect(e){this.router.navigateByUrl("/admin/"+e)}onLogout(){this.accountService.Logout()}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(o.g),r.Qb(H.a),r.Qb(o.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-sidebar-menu"]],decls:7,vars:1,consts:[[1,"sidebar-menu","d-flex","flex-column"],[4,"ngFor","ngForOf"],[1,"menu-item","d-flex","flex-row",3,"click"],[1,"menu-icon","d-flex","justify-content-center","align-items-center"],["aria-hidden","true",1,"fa","fa-2x","fa-sign-out"],[1,"menu-slider","d-flex","justify-content-center","align-items-center"],["routerLinkActive","active",1,"menu-item","d-flex","flex-row",3,"click"],[3,"outerHTML"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Cc(1,qt,6,2,"ng-container",1),r.Wb(2,"div",2),r.ec("click",(function(){return t.onLogout()})),r.Wb(3,"div",3),r.Rb(4,"i",4),r.Vb(),r.Wb(5,"div",5),r.Ec(6,"\u0110\u0103ng xu\u1ea5t"),r.Vb(),r.Vb(),r.Vb()),2&e&&(r.Db(1),r.oc("ngForOf",t.menuItems))},directives:[c.l,o.i],styles:[".sidebar-menu[_ngcontent-%COMP%]{color:#fff;position:fixed;z-index:10;overflow:hidden;width:var(--sidebar-width);height:100%;background-color:var(--app-color);box-shadow:5px 0 5px 0 rgba(0,0,0,.2)}.sidebar-menu[_ngcontent-%COMP%]:hover{width:-webkit-max-content;width:-moz-max-content;width:max-content}.sidebar-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{width:auto;height:var(--sidebar-width)}.sidebar-menu[_ngcontent-%COMP%]   .menu-item.active[_ngcontent-%COMP%]{background-color:#4580c3;border-left:4px solid #eee}.sidebar-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:last-child{margin-top:auto}.sidebar-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover{background-color:#4580c3;border-left:4px solid #eee}.sidebar-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .menu-icon[_ngcontent-%COMP%]{height:var(--sidebar-width);min-width:var(--sidebar-width);cursor:pointer}.sidebar-menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   .menu-slider[_ngcontent-%COMP%]{height:var(--sidebar-width);padding:0 20px 0 10px;cursor:pointer;width:auto}"]}),e})(),Ht=(()=>{class e{constructor(e){this.accountService=e,this.arr=["21","21","41","121","21"]}ngOnInit(){this.accountService.UploadAccountFromLocalStorageToStore()}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(H.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-admin"]],decls:5,vars:0,consts:[[1,"layout"],[1,"sidebar"],[1,"body"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Rb(2,"app-sidebar-menu"),r.Vb(),r.Wb(3,"div",2),r.Rb(4,"router-outlet"),r.Vb(),r.Vb())},directives:[Kt,o.l],styles:[".layout[_ngcontent-%COMP%]{height:100vh;width:100vw;display:flex;flex-direction:row;min-width:1024px}.body[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;background-color:#fff;color:#444;width:auto;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content}.header[_ngcontent-%COMP%]{position:relative;z-index:5;background-color:#cd5c5c;height:60px}.content[_ngcontent-%COMP%]{flex:1;overflow-x:hidden;overflow-y:auto}.sidebar[_ngcontent-%COMP%]{position:relative;z-index:10;background-color:#adff2f;height:100%;width:var(--sidebar-width);box-shadow:-20px 4px 50px 0 rgba(0,0,0,.4)}"]}),e})(),Jt=(()=>{class e{}return e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({factory:function(t){return new(t||e)},imports:[[c.c]]}),e})(),Zt=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["app-customer-row"]],inputs:{customer_item:"customer_item",index:"index"},decls:14,vars:7,consts:[[1,"item-row","py-2"],[1,"row"],[1,"col","align-self-center","text-center","text-app","font-weight-bold",2,"max-width","150px"],[1,"col","align-self-center","text-center",2,"max-width","150px"],["alt","",2,"height","80px","width","60px","object-fit","cover",3,"src"],[1,"col","align-self-center","text-center","text-app"],[1,"col","align-self-center","text-center",2,"max-width","200px"],[1,"col","align-self-center","text-center"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"div",2),r.Ec(3),r.jc(4,"standardizedId"),r.Vb(),r.Wb(5,"div",3),r.Rb(6,"img",4),r.Vb(),r.Wb(7,"div",5),r.Wb(8,"b"),r.Ec(9),r.Vb(),r.Vb(),r.Wb(10,"div",6),r.Ec(11),r.Vb(),r.Wb(12,"div",7),r.Ec(13),r.Vb(),r.Vb(),r.Vb()),2&e&&(r.Db(3),r.Fc(r.kc(4,5,null==t.customer_item?null:t.customer_item.customer_id)),r.Db(3),r.oc("src",(null==t.customer_item?null:t.customer_item.image)||"assets/images/default-avatar.png",r.xc),r.Db(3),r.Fc((null==t.customer_item?null:t.customer_item.last_name)+" "+(null==t.customer_item?null:t.customer_item.first_name)||"-"),r.Db(2),r.Gc(" ",(null==t.customer_item?null:t.customer_item.phone)||"-"," "),r.Db(2),r.Fc((null==t.customer_item?null:t.customer_item.note)||"-"))},pipes:[g.b],styles:[".item-row[_ngcontent-%COMP%]{display:flex;transition:.5s;padding-left:36px;height:100px;cursor:pointer;align-self:center!important;flex-direction:column;justify-content:center;box-shadow:3px 3px 8px 3px rgba(122,159,216,.2);margin-bottom:20px}.item-row[_ngcontent-%COMP%]:hover{background-color:#e4e4e4;border-left:7px solid var(--app-color)}.item-row[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{position:relative;display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;overflow:hidden;line-height:22px}.item-row[_ngcontent-%COMP%]   .trash-icon[_ngcontent-%COMP%]{border-radius:50%;padding:5px;background-color:#f5f5f5}.item-row[_ngcontent-%COMP%]   .trash-can[_ngcontent-%COMP%]{padding:3px 20px 3px 2px;border-radius:30px;margin-bottom:5px;display:flex;width:auto;align-items:center;flex-direction:row;justify-content:center}.item-row[_ngcontent-%COMP%]   .trash-can[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;color:#f5f5f5;margin-left:10px;font-size:.8rem}"]}),e})();function Yt(e,t){}function en(e,t){1&e&&(r.Wb(0,"p"),r.Ec(1,"Day la the item n\xe0"),r.Vb())}function tn(e,t){if(1&e){const e=r.Xb();r.Ub(0),r.Wb(1,"app-customer-row",15),r.ec("click",(function(){r.vc(e);const n=t.$implicit;return r.ic(2).onViewCustomerDetail(n.customer_id)})),r.Vb(),r.Tb()}if(2&e){const e=t.$implicit,n=t.index;r.Db(1),r.oc("customer_item",e)("index",n)}}function nn(e,t){if(1&e){const e=r.Xb();r.Wb(0,"div",3),r.Rb(1,"input",4),r.Rb(2,"input",5),r.Wb(3,"div",6),r.ec("click",(function(){return r.vc(e),r.ic().search()})),r.Ec(4,"T\xecm ki\u1ebfm"),r.Vb(),r.Vb(),r.Wb(5,"div",7),r.Wb(6,"div",8),r.Wb(7,"div",9),r.Wb(8,"div",10),r.Ec(9,"M\xe3 kh\xe1ch h\xe0ng"),r.Vb(),r.Wb(10,"div",10),r.Ec(11,"H\xecnh \u1ea3nh"),r.Vb(),r.Wb(12,"div",11),r.Ec(13,"T\xean kh\xe1ch h\xe0ng"),r.Vb(),r.Wb(14,"div",12),r.Ec(15,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),r.Vb(),r.Wb(16,"div",11),r.Ec(17,"Ghi ch\xfa"),r.Vb(),r.Vb(),r.Vb(),r.Cc(18,tn,2,2,"ng-container",13),r.jc(19,"async"),r.Wb(20,"app-page-pagination",14),r.ec("navigate",(function(t){return r.vc(e),r.ic().navigate(t)})),r.jc(21,"async"),r.Vb(),r.Vb()}if(2&e){const e=r.ic();var n=null;const t=null==(n=r.kc(19,4,e.customer_list$))?null:n.items.slice().reverse();r.oc("formGroup",e.searchForm),r.Db(18),r.oc("ngForOf",t),r.Db(2),r.oc("paginationOpt",e.current_pagination_opt$)("currentPage",r.kc(21,6,e.current_page$))}}let on=(()=>{class e{constructor(e,t,n,o,i,c){this.fb=e,this.router=t,this.ref=n,this.customerQuery=o,this.customerStore=i,this.customerService=c,this.customer_list$=this.customerQuery.customer_list_view$,this.current_pagination_opt$=this.customerQuery.current_pagination_opt$,this.current_page$=this.customerQuery.current_page$,this.currentPaginationOpt=new y.c,this.searchForm=this.fb.group({customer_id:"",phone:""})}ngOnInit(){return Object(u.a)(this,void 0,void 0,(function*(){yield this.onRequestNewPage()}))}onRequestNewPage(){return Object(u.a)(this,void 0,void 0,(function*(){yield this.customerService.GetCustomers(this.customerQuery.getValue().filter_page).then(()=>{this.customerService.setupPagination()})}))}navigate(e){return Object(u.a)(this,void 0,void 0,(function*(){this.customerService.navigate(e),yield this.onRequestNewPage()}))}onViewCustomerDetail(e){this.router.navigateByUrl("/admin/account-management/customer-detail/"+e)}search(){return Object(u.a)(this,void 0,void 0,(function*(){let{customer_id:e,phone:t}=this.searchForm.value;if(!e&&!t)return yield this.onRequestNewPage();const n={customer_id:e||null,phone:t||null};let o=yield this.customerService.SearchCustomers(n);this.customerStore.update({customer_list_view:{items:o,has_next:!1,has_prev:!1,current_page:1}})}))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(D.d),r.Qb(o.g),r.Qb(r.h),r.Qb(lt.a),r.Qb(bt.a),r.Qb(ee.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-customer-list"]],decls:7,vars:0,consts:[["header",""],["emptyItem",""],["item",""],[1,"search-form","row","app-flex","mb-3",3,"formGroup"],["type","text","placeholder","Nh\u1eadp m\xe3","formControlName","customer_id",1,"form-control","rounded-pill","col-2","p-4","mr-3"],["type","text","placeholder","Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phone",1,"form-control","rounded-pill","col-2","p-4","mr-3"],[1,"btn-app","rounded-pill","col-1",3,"click"],[1,"d-flex","flex-column","h-100"],[1,"table","mt-3"],[1,"table-header","row","font-weight-bold","text-uppercase","ng-star-inserted","align-items-center","my-3"],[1,"col","text-center","text-app",2,"max-width","150px"],[1,"col","text-center","text-app"],[1,"col","text-center","text-app",2,"max-width","200px"],[4,"ngFor","ngForOf"],[1,"mt-auto",3,"paginationOpt","currentPage","navigate"],[3,"customer_item","index","click"]],template:function(e,t){1&e&&(r.Wb(0,"app-item-table"),r.Cc(1,Yt,0,0,"ng-template",null,0,r.Dc),r.Cc(3,en,2,0,"ng-template",null,1,r.Dc),r.Cc(5,nn,22,8,"ng-template",null,2,r.Dc),r.Vb())},directives:[B,D.n,D.h,D.c,D.m,D.g,c.l,y.b,Zt],pipes:[c.b],styles:[".table-header[_ngcontent-%COMP%]{padding-left:36px}"]}),e})();function cn(e,t){if(1&e&&(r.Ub(0),r.Wb(1,"a",4),r.Ec(2),r.Vb(),r.Tb()),2&e){const e=t.$implicit;r.Db(1),r.oc("routerLink",e.url),r.Db(1),r.Fc(e.itemName)}}let rn=(()=>{class e{constructor(){this.headerItems=[{itemName:"Danh s\xe1ch",url:"employee-list"}]}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["app-employee-management"]],decls:6,vars:1,consts:[[1,"p-0","pl-2","header-admin","d-flex","align-items-center"],[1,"page-title","font-weight-bold","pl-4","mr-5"],[4,"ngFor","ngForOf"],[1,"page-content-admin","p-4"],["routerLinkActive","active",1,"header-item",3,"routerLink"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Ec(2," Qu\u1ea3n l\xfd nh\xe2n vi\xean "),r.Vb(),r.Cc(3,cn,3,2,"ng-container",2),r.Vb(),r.Wb(4,"div",3),r.Rb(5,"router-outlet"),r.Vb()),2&e&&(r.Db(3),r.oc("ngForOf",t.headerItems))},directives:[c.l,o.l,o.j,o.i],styles:[""]}),e})();function an(e,t){if(1&e&&(r.Ub(0),r.Wb(1,"a",4),r.Ec(2),r.Vb(),r.Tb()),2&e){const e=t.$implicit;r.Db(1),r.oc("routerLink",e.url),r.Db(1),r.Fc(e.itemName)}}let ln=(()=>{class e{constructor(){this.headerItems=[{itemName:"Danh s\xe1ch",url:"supplier-list"},{itemName:"T\u1ea1o m\u1edbi",url:"create-supplier"}]}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["app-supplier-management"]],decls:6,vars:1,consts:[[1,"p-0","pl-2","header-admin","d-flex","align-items-center"],[1,"page-title","font-weight-bold","pl-4","mr-5"],[4,"ngFor","ngForOf"],[1,"page-content-admin","p-4"],["routerLinkActive","active",1,"header-item",3,"routerLink"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Ec(2," Qu\u1ea3n l\xfd nh\xe0 cung c\u1ea5p "),r.Vb(),r.Cc(3,an,3,2,"ng-container",2),r.Vb(),r.Wb(4,"div",3),r.Rb(5,"router-outlet"),r.Vb()),2&e&&(r.Db(3),r.oc("ngForOf",t.headerItems))},directives:[c.l,o.l,o.j,o.i],styles:[""]}),e})();function bn(e,t){1&e&&r.Rb(0,"i",9)}let sn=(()=>{class e{constructor(e){this.modalAction=e,this.loading=!1}ngOnInit(){}onConfirmDelete(){this.modalAction.dismiss(this.supplier)}dismissModal(){this.modalAction.dismiss(null)}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(p.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-confirm-delete-modal"]],inputs:{supplier:"supplier"},decls:18,vars:2,consts:[[1,"modal-header"],[1,"modal-title","big-font"],[1,"close",3,"click"],[1,"text-large"],[1,"modal-body"],[1,"modal-footer"],[1,"btn","btn-app","btn-outline-app",3,"click"],[1,"btn","btn-app","text-white",3,"click"],["class","fa fa-spin fa-circle-o-notch",4,"ngIf"],[1,"fa","fa-spin","fa-circle-o-notch"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Ec(2," X\xe1c nh\u1eadn x\xf3a nh\xe0 cung c\u1ea5p: "),r.Vb(),r.Wb(3,"div",2),r.ec("click",(function(){return t.dismissModal()})),r.Wb(4,"span",3),r.Ec(5,"\xd7"),r.Vb(),r.Vb(),r.Vb(),r.Wb(6,"div",4),r.Wb(7,"div"),r.Ec(8,"B\u1ea1n c\xf3 th\u1ef1c s\u1ef1 mu\u1ed1n x\xf3a nh\xe0 cung c\u1ea5p "),r.Wb(9,"b"),r.Ec(10),r.Vb(),r.Ec(11," ra kh\u1ecfi h\u1ec7 th\u1ed1ng th\u01b0 qu\xe1n kh\xf4ng ? "),r.Vb(),r.Vb(),r.Wb(12,"div",5),r.Wb(13,"button",6),r.ec("click",(function(){return t.dismissModal()})),r.Ec(14,"\u0110\xf3ng"),r.Vb(),r.Wb(15,"button",7),r.ec("click",(function(){return t.onConfirmDelete()})),r.Cc(16,bn,1,0,"i",8),r.Ec(17," X\xe1c nh\u1eadn "),r.Vb(),r.Vb()),2&e&&(r.Db(10),r.Fc(null==t.supplier?null:t.supplier.contact_name),r.Db(6),r.oc("ngIf",t.loading))},styles:[""]}),e})();function dn(e,t){1&e&&(r.Wb(0,"div",21),r.Wb(1,"div",22),r.Ec(2," H\u1ee7y "),r.Vb(),r.Wb(3,"div",23),r.Wb(4,"span",24),r.Ec(5,"X\xe1c nh\u1eadn"),r.Vb(),r.Vb(),r.Vb())}function un(e,t){if(1&e){const e=r.Xb();r.Ub(0),r.Wb(1,"div",4),r.Wb(2,"div",5),r.Wb(3,"div",6),r.Wb(4,"div",7),r.Wb(5,"div",8),r.Wb(6,"b"),r.Ec(7,"M\xe3 nh\xe0 cung c\u1ea5p: "),r.Vb(),r.Vb(),r.Wb(8,"div",9),r.Ec(9),r.jc(10,"standardizedId"),r.jc(11,"async"),r.Vb(),r.Vb(),r.Wb(12,"div",7),r.Wb(13,"div",8),r.Wb(14,"b"),r.Ec(15,"T\xean nh\xe0 cung c\u1ea5p: "),r.Vb(),r.Vb(),r.Wb(16,"div",9),r.Ec(17),r.jc(18,"async"),r.Vb(),r.Vb(),r.Wb(19,"div",7),r.Wb(20,"div",8),r.Wb(21,"b"),r.Ec(22,"\u0110\u1ecba ch\u1ec9: "),r.Vb(),r.Vb(),r.Wb(23,"div",10),r.Ec(24),r.jc(25,"async"),r.Vb(),r.Vb(),r.Wb(26,"div",7),r.Wb(27,"div",8),r.Wb(28,"b"),r.Ec(29,"Email: "),r.Vb(),r.Vb(),r.Wb(30,"div",10),r.Ec(31),r.jc(32,"async"),r.Vb(),r.Vb(),r.Wb(33,"div",7),r.Wb(34,"div",8),r.Wb(35,"b"),r.Ec(36,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i: "),r.Vb(),r.Vb(),r.Wb(37,"div",10),r.Ec(38),r.jc(39,"async"),r.Vb(),r.Vb(),r.Wb(40,"div",7),r.Wb(41,"div",8),r.Wb(42,"b"),r.Ec(43,"Ghi ch\xfa: "),r.Vb(),r.Vb(),r.Wb(44,"div",10),r.Ec(45),r.jc(46,"async"),r.Vb(),r.Vb(),r.Vb(),r.Wb(47,"div",6),r.Wb(48,"div",7),r.Wb(49,"div",11),r.Wb(50,"div",12),r.ec("click",(function(){return r.vc(e),r.ic().goBack()})),r.Rb(51,"i",13),r.Ec(52," Quay l\u1ea1i"),r.Vb(),r.Vb(),r.Ub(53),r.Wb(54,"div",14),r.ec("click",(function(){return r.vc(e),r.ic().onOpenDeleteModal()})),r.Wb(55,"div",15),r.Rb(56,"i",16),r.Wb(57,"span",17),r.Ec(58,"X\xf3a b\u1ecf"),r.Vb(),r.Vb(),r.Wb(59,"div",18),r.ec("click",(function(){return r.vc(e),r.ic().onClickUpdateBtn()})),r.Rb(60,"i",19),r.Wb(61,"span"),r.Ec(62,"C\u1eadp nh\u1eadt"),r.Vb(),r.Vb(),r.Vb(),r.Tb(),r.Cc(63,dn,6,0,"ng-template",null,20,r.Dc),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Tb()}if(2&e){const e=r.ic();var n,o,i,c,a,l;r.Db(9),r.Fc(r.kc(10,6,null==(n=r.kc(11,8,e.detail_supplier$))?null:n.supplier_id)||"-"),r.Db(8),r.Fc((null==(o=r.kc(18,10,e.detail_supplier$))?null:o.contact_name)||"-"),r.Db(7),r.Fc((null==(i=r.kc(25,12,e.detail_supplier$))?null:i.address)||"-"),r.Db(7),r.Fc((null==(c=r.kc(32,14,e.detail_supplier$))?null:c.email)||"-"),r.Db(7),r.Fc((null==(a=r.kc(39,16,e.detail_supplier$))?null:a.phone)||"-"),r.Db(7),r.Fc((null==(l=r.kc(46,18,e.detail_supplier$))?null:l.note)||"-")}}function pn(e,t){if(1&e){const e=r.Xb();r.Wb(0,"div",25),r.Wb(1,"div",5),r.Wb(2,"div",6),r.Wb(3,"div",7),r.Wb(4,"div",11),r.Wb(5,"b"),r.Ec(6,"T\xean nh\xe0 cung c\u1ea5p: "),r.Vb(),r.Vb(),r.Wb(7,"div",10),r.Rb(8,"input",26),r.Vb(),r.Vb(),r.Wb(9,"div",7),r.Wb(10,"div",11),r.Wb(11,"b"),r.Ec(12,"\u0110\u1ecba ch\u1ec9: "),r.Vb(),r.Vb(),r.Wb(13,"div",10),r.Rb(14,"input",27),r.Vb(),r.Vb(),r.Wb(15,"div",7),r.Wb(16,"div",11),r.Wb(17,"b"),r.Ec(18,"Email: "),r.Vb(),r.Vb(),r.Wb(19,"div",10),r.Rb(20,"input",28),r.Vb(),r.Vb(),r.Wb(21,"div",7),r.Wb(22,"div",11),r.Wb(23,"b"),r.Ec(24,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i: "),r.Vb(),r.Vb(),r.Wb(25,"div",10),r.Rb(26,"input",29),r.Vb(),r.Vb(),r.Wb(27,"div",7),r.Wb(28,"div",11),r.Wb(29,"b"),r.Ec(30,"Ghi ch\xfa: "),r.Vb(),r.Vb(),r.Wb(31,"div",10),r.Rb(32,"textarea",30),r.Vb(),r.Vb(),r.Vb(),r.Wb(33,"div",6),r.Wb(34,"div",7),r.Wb(35,"div",11),r.Wb(36,"div",12),r.ec("click",(function(){return r.vc(e),r.ic().goBack()})),r.Rb(37,"i",13),r.Ec(38," Quay l\u1ea1i"),r.Vb(),r.Vb(),r.Wb(39,"div",31),r.Wb(40,"div",32),r.ec("click",(function(){return r.vc(e),r.ic().setupDataForm()})),r.Wb(41,"span",17),r.Ec(42,"H\u1ee7y"),r.Vb(),r.Vb(),r.Wb(43,"div",18),r.ec("click",(function(){return r.vc(e),r.ic().UpdateSupplier()})),r.Wb(44,"span"),r.Ec(45,"X\xe1c nh\u1eadn"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb()}if(2&e){const e=r.ic();r.oc("formGroup",e.updateSupplierForm)}}let hn=(()=>{class e{constructor(e,t,n,o,i,c,r,a){this.supplierQuery=e,this.supplierService=t,this.router=n,this.fb=o,this.ref=i,this.route=c,this.modalController=r,this.supplierStore=a,this.filter={page:1,per_page:1e3},this.isEditing=!1,this.detail_supplier$=this.supplierQuery.detail_supplier$,this.updateSupplierForm=this.fb.group({supplier_id:[""],contact_name:[""],address:[""],phone:[""],email:[""],note:[""]})}ngOnInit(){return Object(u.a)(this,void 0,void 0,(function*(){const e={supplier_id:parseInt(this.route.snapshot.params.id)},t=yield this.supplierService.SearchSuppliers(e);this.supplierService.SetDetailSupplier(t[0])}))}ngOnChanges(){return Object(u.a)(this,void 0,void 0,(function*(){}))}onClickUpdateBtn(){return Object(u.a)(this,void 0,void 0,(function*(){if(this.isEditing){let e=this.updateSupplierForm.value;yield this.supplierService.UpdateSupplier(e)}else this.toggleEdit(),this.setupDataForm()}))}goBack(){this.isEditing?this.toggleEdit():this.router.navigateByUrl("admin/supplier-management/supplier-list")}toggleEdit(){this.isEditing=!this.isEditing}onOpenDeleteModal(){const e=this.modalController.create({component:sn,componentProps:{supplier:this.supplierQuery.getValue().detail_supplier}});e.show().then(),e.onDismiss().then(e=>{if(e)try{this.supplierService.DeleteSupplierById(e.supplier_id),this.router.navigateByUrl("admin/supplier-management/supplier-list"),toastr.success("B\u1ea1n \u0111\xe3 x\xf3a nh\xe0 cung c\u1ea5p th\xe0nh c\xf4ng")}catch(t){toastr.error("X\xf3a nh\xe0 cung c\u1ea5p kh\xf4ng th\xe0nh th\xf4ng",t.msg||t.message)}})}setupDataForm(){let e=this.supplierQuery.getValue().detail_supplier;this.updateSupplierForm.patchValue({supplier_id:null==e?void 0:e.supplier_id,contact_name:null==e?void 0:e.contact_name,address:null==e?void 0:e.address,phone:null==e?void 0:e.phone,email:null==e?void 0:e.email,note:null==e?void 0:e.note})}get supplier_detail_in_store(){return this.supplierQuery.getValue().detail_supplier.supplier.supplier_id}UpdateSupplier(){return Object(u.a)(this,void 0,void 0,(function*(){let e=Object.assign({},this.updateSupplierForm.value);try{let t=yield this.supplierService.UpdateSupplier(e);this.supplierStore.update({detail_supplier:t}),toastr.success("C\u1eadp nh\u1eadt nh\xe0 cung c\u1ea5p th\xe0nh c\xf4ng."),this.router.navigateByUrl("admin/supplier-management/supplier-list")}catch(t){toastr.error("C\u1eadp nh\u1eadt nh\xe0 cung c\u1ea5p th\u1ea5t b\u1ea1i.",t.msg||t.message)}}))}get author(){return this.supplierQuery.getValue().detail_supplier.author}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(Ae.a),r.Qb(Ie.a),r.Qb(o.g),r.Qb(D.d),r.Qb(r.h),r.Qb(o.a),r.Qb(P.a),r.Qb(Ge.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-supplier-detail"]],features:[r.Bb],decls:10,vars:5,consts:[[1,"d-flex","justify-content-center","align-items-center","text-app","font-weight-bold"],[1,"font-weight-bold"],[4,"ngIf","ngIfElse"],["updateForm",""],[1,"d-flex","flex-row","p-5","mb-4","app-flex"],[1,"col-6","d-flex","flex-column"],[1,"d-flex","flex-column"],[1,"row","py-3"],[1,"col-2","text-center","font-weight-bold"],[1,"col-9","text-app","font-weight-bold"],[1,"col-9"],[1,"col-2","app-flex"],[1,"btn","btn-outline-app",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-left","pr-1"],[1,"col-9","d-flex","flex-row","justify-content-end",3,"click"],[1,"btn-danger","align-self-center","mr-2"],[1,"fas","fa-trash-alt","trash-icon"],[1,"ml-1",2,"width","60px"],[1,"btn-app","align-self-center",3,"click"],[1,"fas","fa-tools","mr-2"],["editButtons",""],[1,"d-flex","flex-row","ml-auto"],[1,"btn","btn-outline-danger","d-flex","justify-content-center","align-items-center","mr-2"],[1,"btn","btn-app","btn-outline-app","align-self-center"],[1,"ml-1"],[1,"d-flex","flex-row","p-5","mb-4","app-flex",3,"formGroup"],["type","text","placeholder","Nh\u1eadp t\xean nh\xe0 cung c\u1ea5p","formControlName","contact_name",1,"form-control"],["type","text","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9 nh\xe0 cung c\u1ea5p","formControlName","address",1,"form-control"],["type","text","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9 email ","formControlName","email",1,"form-control"],["type","text","placeholder","Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i","formControlName","phone",1,"form-control"],["placeholder","Nh\u1eadp ghi ch\xfa","formControlName","note",1,"form-control"],[1,"col-9","d-flex","flex-row","justify-content-end"],[1,"btn-outline-app","align-self-center","mr-2",3,"click"]],template:function(e,t){if(1&e&&(r.Ub(0),r.Wb(1,"div",0),r.Wb(2,"h1",1),r.Ec(3,"Th\xf4ng tin chi ti\u1ebft nh\xe0 cung c\u1ea5p "),r.Wb(4,"span"),r.Ec(5),r.jc(6,"async"),r.Vb(),r.Vb(),r.Vb(),r.Cc(7,un,65,20,"ng-container",2),r.Cc(8,pn,46,1,"ng-template",null,3,r.Dc),r.Tb()),2&e){const e=r.tc(9);var n;r.Db(5),r.Fc(null==(n=r.kc(6,3,t.detail_supplier$))?null:n.contact_name),r.Db(2),r.oc("ngIf",!t.isEditing)("ngIfElse",e)}},directives:[c.m,D.n,D.h,D.c,D.m,D.g],pipes:[c.b,g.b],styles:[""]}),e})();function mn(e,t){if(1&e&&(r.Ub(0),r.Wb(1,"a",4),r.Ec(2),r.Vb(),r.Tb()),2&e){const e=t.$implicit;r.Db(1),r.oc("routerLink",e.url),r.Db(1),r.Fc(e.itemName)}}let gn=(()=>{class e{constructor(){this.headerItems=[{itemName:"Danh s\xe1ch phi\u1ebfu m\u01b0\u1ee3n",url:"borrow-ticket-list"},{itemName:"T\u1ea1o m\u1edbi",url:"create-borrow-ticket"}]}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["app-borrow-ticket-management"]],decls:6,vars:1,consts:[[1,"p-0","pl-2","header-admin","d-flex","align-items-center"],[1,"page-title","font-weight-bold","pl-4","mr-5"],[4,"ngFor","ngForOf"],[1,"page-content-admin","p-4"],["routerLinkActive","active",1,"header-item",3,"routerLink"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Ec(2," Qu\u1ea3n l\xfd m\u01b0\u1ee3n tr\u1ea3 s\xe1ch "),r.Vb(),r.Cc(3,mn,3,2,"ng-container",2),r.Vb(),r.Wb(4,"div",3),r.Rb(5,"router-outlet"),r.Vb()),2&e&&(r.Db(3),r.oc("ngForOf",t.headerItems))},directives:[c.l,o.l,o.j,o.i],styles:[""]}),e})();var fn=n("JX91"),vn=n("vkgz"),_n=n("kmnG"),Vn=n("qFsG"),Wn=n("/1cH"),yn=n("FKr1");function kn(e,t){if(1&e&&(r.Wb(0,"mat-option",28),r.Ec(1),r.Vb()),2&e){const e=t.$implicit;r.oc("value",e),r.Db(1),r.Gc(" ",e," ")}}function xn(e,t){if(1&e){const e=r.Xb();r.Wb(0,"div",29),r.Wb(1,"div",30),r.Wb(2,"div",31),r.Rb(3,"img",32),r.Vb(),r.Vb(),r.Wb(4,"div",33),r.Wb(5,"div",34),r.Wb(6,"div",35),r.Ec(7," M\xe3 kh\xe1ch h\xe0ng: "),r.Vb(),r.Wb(8,"div",36),r.Wb(9,"input",37),r.ec("ngModelChange",(function(t){return r.vc(e),r.ic(2).customer_item.customer_id=t})),r.jc(10,"standardizedId"),r.Vb(),r.Vb(),r.Vb(),r.Wb(11,"div",34),r.Wb(12,"div",35),r.Ec(13," H\u1ecd v\xe0 t\xean: "),r.Vb(),r.Wb(14,"div",38),r.Wb(15,"input",37),r.ec("ngModelChange",(function(t){return r.vc(e),r.ic(2).customer_item.customer_id=t})),r.Vb(),r.Vb(),r.Wb(16,"div",39),r.Wb(17,"input",37),r.ec("ngModelChange",(function(t){return r.vc(e),r.ic(2).customer_item.customer_id=t})),r.Vb(),r.Vb(),r.Vb(),r.Wb(18,"div",34),r.Wb(19,"div",35),r.Ec(20," S\u1ed1 \u0111i\u1ec7n tho\u1ea1i: "),r.Vb(),r.Wb(21,"div",36),r.Wb(22,"input",37),r.ec("ngModelChange",(function(t){return r.vc(e),r.ic(2).customer_item.customer_id=t})),r.Vb(),r.Vb(),r.Vb(),r.Wb(23,"div",34),r.Wb(24,"div",35),r.Ec(25," Email: "),r.Vb(),r.Wb(26,"div",36),r.Wb(27,"input",37),r.ec("ngModelChange",(function(t){return r.vc(e),r.ic(2).customer_item.customer_id=t})),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(28,"div",40),r.ec("click",(function(){return r.vc(e),r.ic(2).ClearCustomer()})),r.Wb(29,"span",41),r.Ec(30,"X\xf3a \u0111\u1ecdc gi\u1ea3"),r.Vb(),r.Vb(),r.Vb()}if(2&e){const e=r.ic(2);r.Db(3),r.oc("src",(null==e.customer_item?null:e.customer_item.image)||"assets/images/default-avatar.png",r.xc),r.Db(6),r.oc("ngModel",r.kc(10,6,e.customer_item.customer_id)),r.Db(6),r.oc("ngModel",e.customer_item.last_name),r.Db(2),r.oc("ngModel",e.customer_item.first_name),r.Db(5),r.oc("ngModel",e.customer_item.phone),r.Db(5),r.oc("ngModel",e.customer_item.email)}}function wn(e,t){if(1&e&&(r.Wb(0,"mat-option",28),r.Ec(1),r.Vb()),2&e){const e=t.$implicit;r.oc("value",e),r.Db(1),r.Gc(" ",e," ")}}function Cn(e,t){if(1&e){const e=r.Xb();r.Ub(0),r.Wb(1,"h3",42),r.Ec(2,"Th\xf4ng tin chi ti\u1ebft s\xe1ch"),r.Vb(),r.Wb(3,"div",43),r.Wb(4,"div",44),r.Wb(5,"div",45),r.Ec(6),r.jc(7,"standardizedId"),r.Vb(),r.Wb(8,"div",46),r.Rb(9,"img",47),r.Vb(),r.Wb(10,"div",48),r.Ec(11),r.Vb(),r.Wb(12,"div",49),r.Ec(13),r.Vb(),r.Wb(14,"div",50),r.Ec(15),r.Vb(),r.Wb(16,"div",51),r.ec("click",(function(){return r.vc(e),r.ic(2).AddBookToTicket()})),r.Wb(17,"div",52),r.Rb(18,"i",53),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Tb()}if(2&e){const e=r.ic(2);r.Db(6),r.Gc(" ",r.kc(7,5,null==e.book_item?null:e.book_item.book_id),""),r.Db(3),r.oc("src",(null==e.book_item?null:e.book_item.image)||"assets/images/default-book.png",r.xc),r.Db(2),r.Fc((null==e.book_item?null:e.book_item.book_name)||"-"),r.Db(2),r.Fc((null==e.book_item||null==e.book_item.category?null:e.book_item.category.category_name)||"-"),r.Db(2),r.Gc(" ",(null==e.book_item||null==e.book_item.author?null:e.book_item.author.author_name)||"-"," ")}}function En(e,t){if(1&e){const e=r.Xb();r.Wb(0,"div"),r.Wb(1,"div",55),r.Wb(2,"div",44),r.Wb(3,"div",56),r.Wb(4,"b"),r.Ec(5),r.Vb(),r.Vb(),r.Wb(6,"div",46),r.Rb(7,"img",47),r.Vb(),r.Wb(8,"div",50),r.Ec(9),r.Vb(),r.Wb(10,"div",46),r.Ec(11),r.Vb(),r.Wb(12,"div",50),r.Ec(13),r.Vb(),r.Wb(14,"div",50),r.Ec(15),r.Vb(),r.Wb(16,"div",51),r.ec("click",(function(){r.vc(e);const n=t.$implicit;return r.ic(3).RemoveBookFromTicket(n.book_id)})),r.Rb(17,"i",57),r.Vb(),r.Vb(),r.Vb(),r.Vb()}if(2&e){const e=t.$implicit,n=t.index;r.Eb("data-index",n),r.Db(5),r.Gc(" ",n+1," "),r.Db(2),r.oc("src",(null==e?null:e.image)||"assets/images/default-avatar.png",r.xc),r.Db(2),r.Fc((null==e?null:e.book_name)||"-"),r.Db(2),r.Fc((null==e||null==e.category?null:e.category.category_name)||"-"),r.Db(2),r.Gc(" ",(null==e||null==e.author?null:e.author.author_name)||"-"," "),r.Db(2),r.Fc((null==e||null==e.supplier?null:e.supplier.contact_name)||"-")}}function On(e,t){if(1&e&&(r.Ub(0),r.Wb(1,"h3",42),r.Ec(2,"Danh s\xe1ch s\xe1ch m\u01b0\u1ee3n"),r.Vb(),r.Cc(3,En,18,7,"div",54),r.Tb()),2&e){const e=r.ic(2);r.Db(3),r.oc("ngForOf",e.borrowTicket.books)}}function Mn(e,t){if(1&e&&(r.Wb(0,"span",58),r.Ec(1,"S\u1ed1 l\u01b0\u1ee3ng s\xe1ch m\u01b0\u1ee3n: "),r.Wb(2,"b"),r.Ec(3),r.Vb(),r.Vb()),2&e){const e=r.ic(2);r.Db(3),r.Fc(null==e.borrowTicket.books?null:e.borrowTicket.books.length)}}function Dn(e,t){if(1&e){const e=r.Xb();r.Ub(0),r.Wb(1,"div",2),r.Wb(2,"div",3),r.Wb(3,"div",4),r.Wb(4,"div",5),r.Wb(5,"h1",6),r.Ec(6,"Phi\u1ebfu m\u01b0\u1ee3n s\xe1ch"),r.Vb(),r.Vb(),r.Vb(),r.Wb(7,"div",7),r.Wb(8,"div",8),r.Ec(9),r.jc(10,"date"),r.Vb(),r.Wb(11,"div",9),r.Wb(12,"div",10),r.Wb(13,"div",11),r.Ec(14,"M\xe3 \u0111\u1ecdc gi\u1ea3: "),r.Vb(),r.Wb(15,"div",12),r.Wb(16,"form",13),r.Wb(17,"mat-form-field",14),r.Wb(18,"input",15),r.ec("change",(function(){return r.vc(e),r.ic().onCustomerChange()})),r.Vb(),r.Wb(19,"mat-autocomplete",16,17),r.Cc(21,kn,2,2,"mat-option",18),r.jc(22,"async"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Cc(23,xn,31,8,"div",19),r.Wb(24,"div",10),r.Wb(25,"div",11),r.Ec(26,"M\xe3 s\xe1ch "),r.Vb(),r.Wb(27,"div",20),r.Wb(28,"form",13),r.Wb(29,"mat-form-field",14),r.Wb(30,"input",21),r.ec("change",(function(){return r.vc(e),r.ic().onBookChange()})),r.Vb(),r.Wb(31,"mat-autocomplete",16,22),r.Cc(33,wn,2,2,"mat-option",18),r.jc(34,"async"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Cc(35,Cn,19,7,"ng-container",23),r.Cc(36,On,4,1,"ng-container",23),r.Vb(),r.Vb(),r.Wb(37,"div",24),r.Wb(38,"div",25),r.Cc(39,Mn,4,1,"span",26),r.Wb(40,"div",27),r.ec("click",(function(){return r.vc(e),r.ic().CreateBorrowTicket()})),r.Ec(41," T\u1ea1o phi\u1ebfu m\u01b0\u1ee3n "),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Tb()}if(2&e){const e=r.tc(20),t=r.tc(32),n=r.ic();r.Db(9),r.Gc("Ng\xe0y: ",r.lc(10,11,n.today,"dd-MM-yyyy"),""),r.Db(9),r.oc("formControl",n.customer_control)("matAutocomplete",e),r.Db(3),r.oc("ngForOf",r.kc(22,14,n.customer_filtered_options)),r.Db(2),r.oc("ngIf",n.customer_item),r.Db(7),r.oc("formControl",n.book_control)("matAutocomplete",t),r.Db(3),r.oc("ngForOf",r.kc(34,16,n.book_filtered_options)),r.Db(2),r.oc("ngIf",n.book_item),r.Db(1),r.oc("ngIf",(null==n.borrowTicket||null==n.borrowTicket.books?null:n.borrowTicket.books.length)>0),r.Db(3),r.oc("ngIf",null==n.borrowTicket||null==n.borrowTicket.books?null:n.borrowTicket.books.length)}}function jn(e,t){if(1&e&&(r.Wb(0,"div"),r.Wb(1,"div",55),r.Wb(2,"div",44),r.Wb(3,"div",56),r.Wb(4,"b"),r.Ec(5),r.Vb(),r.Vb(),r.Wb(6,"div",46),r.Rb(7,"img",47),r.Vb(),r.Wb(8,"div",50),r.Ec(9),r.Vb(),r.Wb(10,"div",46),r.Ec(11),r.Vb(),r.Wb(12,"div",50),r.Ec(13),r.Vb(),r.Wb(14,"div",50),r.Ec(15),r.Vb(),r.Vb(),r.Vb(),r.Vb()),2&e){const e=t.$implicit,n=t.index;r.Eb("data-index",n),r.Db(5),r.Gc(" ",n+1," "),r.Db(2),r.oc("src",(null==e?null:e.image)||"assets/images/default-avatar.png",r.xc),r.Db(2),r.Fc((null==e?null:e.book_name)||"-"),r.Db(2),r.Fc((null==e||null==e.category?null:e.category.category_name)||"-"),r.Db(2),r.Gc(" ",(null==e||null==e.author?null:e.author.author_name)||"-"," "),r.Db(2),r.Fc((null==e||null==e.supplier?null:e.supplier.contact_name)||"-")}}function Pn(e,t){if(1&e&&(r.Ub(0),r.Wb(1,"h3",42),r.Ec(2,"Danh s\xe1ch s\xe1ch m\u01b0\u1ee3n"),r.Vb(),r.Cc(3,jn,16,7,"div",54),r.Tb()),2&e){const e=r.ic(2);r.Db(3),r.oc("ngForOf",e.borrowTicket.books)}}function Tn(e,t){if(1&e&&(r.Wb(0,"span",58),r.Ec(1,"S\u1ed1 l\u01b0\u1ee3ng s\xe1ch m\u01b0\u1ee3n: "),r.Wb(2,"b"),r.Ec(3),r.Vb(),r.Vb()),2&e){const e=r.ic(2);r.Db(3),r.Fc(null==e.borrowTicket.books?null:e.borrowTicket.books.length)}}function Sn(e,t){if(1&e){const e=r.Xb();r.Wb(0,"div",2),r.Wb(1,"div",3),r.Wb(2,"div",4),r.Wb(3,"div",5),r.Wb(4,"h1",6),r.Ec(5,"X\xe1c nh\u1eadn phi\u1ebfu m\u01b0\u1ee3n s\xe1ch"),r.Vb(),r.Vb(),r.Vb(),r.Wb(6,"div",7),r.Wb(7,"div",59),r.Wb(8,"div",60),r.Wb(9,"div",61),r.Rb(10,"img",62),r.Wb(11,"h1",63),r.Ec(12),r.jc(13,"standardizedId"),r.Vb(),r.Vb(),r.Vb(),r.Wb(14,"div",64),r.Wb(15,"div",65),r.Wb(16,"div",66),r.Wb(17,"div",67),r.Wb(18,"b"),r.Ec(19,"M\xe3 phi\u1ebfu m\u01b0\u1ee3n: "),r.Vb(),r.Vb(),r.Wb(20,"div",68),r.Ec(21),r.jc(22,"standardizedId"),r.Vb(),r.Vb(),r.Wb(23,"div",66),r.Wb(24,"div",67),r.Wb(25,"b"),r.Ec(26,"Kh\xe1ch h\xe0ng: "),r.Vb(),r.Vb(),r.Wb(27,"div",68),r.Ec(28),r.jc(29,"standardizedId"),r.Vb(),r.Vb(),r.Wb(30,"div",66),r.Wb(31,"div",67),r.Wb(32,"b"),r.Ec(33,"Nh\xe2n vi\xean: "),r.Vb(),r.Vb(),r.Wb(34,"div",68),r.Ec(35),r.jc(36,"standardizedId"),r.Vb(),r.Vb(),r.Wb(37,"div",66),r.Wb(38,"div",67),r.Wb(39,"b"),r.Ec(40,"Ng\xe0y m\u01b0\u1ee3n: "),r.Vb(),r.Vb(),r.Wb(41,"div",36),r.Ec(42),r.jc(43,"date"),r.Vb(),r.Vb(),r.Wb(44,"div",66),r.Wb(45,"div",67),r.Wb(46,"b"),r.Ec(47,"Ng\xe0y h\u1eb9n tr\u1ea3: "),r.Vb(),r.Vb(),r.Wb(48,"div",36),r.Ec(49),r.jc(50,"date"),r.Vb(),r.Vb(),r.Wb(51,"div",66),r.Wb(52,"div",67),r.Wb(53,"b"),r.Ec(54,"S\u1ed1 l\u01b0\u1ee3ng : "),r.Vb(),r.Vb(),r.Wb(55,"div",36),r.Ec(56),r.Vb(),r.Vb(),r.Wb(57,"div",66),r.Wb(58,"div",67),r.Wb(59,"b"),r.Ec(60,"Ghi ch\xfa: "),r.Vb(),r.Vb(),r.Wb(61,"div",36),r.Ec(62),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Cc(63,Pn,4,1,"ng-container",23),r.Vb(),r.Wb(64,"div",24),r.Wb(65,"div",25),r.Cc(66,Tn,4,1,"span",26),r.Wb(67,"div",69),r.ec("click",(function(){return r.vc(e),r.ic().DeleteBorrowTicket()})),r.Ec(68," H\u1ee7y "),r.Vb(),r.Wb(69,"div",70),r.ec("click",(function(){return r.vc(e),r.ic().Confirm()})),r.Ec(70," X\xe1c nh\u1eadn "),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb()}if(2&e){const e=r.ic();r.Db(12),r.Gc("M\xe3 phi\u1ebfu m\u01b0\u1ee3n: ",r.kc(13,10,null==e.confirm_borrow_ticket?null:e.confirm_borrow_ticket.borrow_ticket_id),""),r.Db(9),r.Fc(r.kc(22,12,null==e.confirm_borrow_ticket?null:e.confirm_borrow_ticket.borrow_ticket_id)||"-"),r.Db(7),r.Fc(r.kc(29,14,null==e.confirm_borrow_ticket||null==e.confirm_borrow_ticket.customer?null:e.confirm_borrow_ticket.customer.customer_id)+" - "+(null==e.confirm_borrow_ticket||null==e.confirm_borrow_ticket.customer?null:e.confirm_borrow_ticket.customer.last_name)+" "+(null==e.confirm_borrow_ticket||null==e.confirm_borrow_ticket.customer?null:e.confirm_borrow_ticket.customer.first_name)||"-"),r.Db(7),r.Fc(r.kc(36,16,null==e.confirm_borrow_ticket||null==e.confirm_borrow_ticket.employee?null:e.confirm_borrow_ticket.employee.employee_id)+" - "+(null==e.confirm_borrow_ticket||null==e.confirm_borrow_ticket.employee?null:e.confirm_borrow_ticket.employee.last_name)+" "+(null==e.confirm_borrow_ticket||null==e.confirm_borrow_ticket.employee?null:e.confirm_borrow_ticket.employee.first_name)||"-"),r.Db(7),r.Fc(r.lc(43,18,null==e.confirm_borrow_ticket?null:e.confirm_borrow_ticket.borrow_date,"dd/MM/yyyy")||"-"),r.Db(7),r.Fc(r.lc(50,21,null==e.confirm_borrow_ticket?null:e.confirm_borrow_ticket.appointment_date,"dd/MM/yyyy")||"-"),r.Db(7),r.Fc((null==e.confirm_borrow_ticket||null==e.confirm_borrow_ticket.borrow_ticket_details?null:e.confirm_borrow_ticket.borrow_ticket_details.length)||"-"),r.Db(6),r.Fc((null==e.confirm_borrow_ticket?null:e.confirm_borrow_ticket.note)||"-"),r.Db(1),r.oc("ngIf",(null==e.confirm_borrow_ticket||null==e.confirm_borrow_ticket.borrow_ticket_details?null:e.confirm_borrow_ticket.borrow_ticket_details.length)>0),r.Db(3),r.oc("ngIf",null==e.borrowTicket||null==e.borrowTicket.books?null:e.borrowTicket.books.length)}}let Fn=(()=>{class e{constructor(e,t,n,i,c,r,a,l,b,s){this.borrowTicketService=e,this.bookService=t,this.bookQuery=n,this.customerService=i,this.customerStore=c,this.customerQuery=r,this.accountStore=a,this.accountQuery=l,this.util=b,this.router=s,this.today=(new Date).toDateString(),this.all_customers=[],this.customer_control=new D.e,this.customer_options=[],this.all_books=[],this.book_control=new D.e,this.book_options=[],this.borrowTicket={readerId:"",books:[]},this.filter={page:1,per_page:1e3},this.router.routeReuseStrategy.shouldReuseRoute=function(){return!1},this.mySubscription=this.router.events.subscribe(e=>{e instanceof o.d&&(this.router.navigated=!1)})}ngOnInit(){return Object(u.a)(this,void 0,void 0,(function*(){this.employee_id=JSON.parse(localStorage.getItem("auth_info")).user_info.employee_id,yield this.customerService.GetCustomers(this.filter),yield this.bookService.getBooks(this.filter),this.all_books=this.bookQuery.getValue().book_list_view.items,this.all_customers=this.customerQuery.getValue().customer_list_view.items,this.all_books.forEach(e=>{this.book_options.push(e.book_id+" - "+e.book_name.toString())}),this.book_filtered_options=this.book_control.valueChanges.pipe(Object(fn.a)(""),Object(fe.a)(e=>this._bookFilter(e)),Object(vn.a)(()=>{this.book_control.value&&(this.book_item=this.all_books.find(e=>e.book_id==parseInt(this.book_control.value)))})),this.all_customers.forEach(e=>{this.customer_options.push(`${e.customer_id.toString()} - ${e.last_name} ${e.first_name}`)}),this.customer_filtered_options=this.customer_control.valueChanges.pipe(Object(fn.a)(""),Object(fe.a)(e=>this._customerFilter(e)),Object(vn.a)(()=>{parseInt(this.customer_control.value)&&(this.customer_item=this.all_customers.find(e=>e.customer_id==parseInt(this.customer_control.value)))}))}))}ngOnDestroy(){this.mySubscription&&this.mySubscription.unsubscribe()}_customerFilter(e){return this.customer_options.filter(t=>0===t.toLowerCase().indexOf(e))}_bookFilter(e){return this.book_options.filter(t=>0===t.toLowerCase().indexOf(e))}ClearCustomer(){this.customer_control.setValue(""),this.customer_item=null}AddBookToTicket(){if(-1!=this.borrowTicket.books.map(e=>e.book_id).indexOf(this.book_item.book_id))return toastr.error("Th\xeam s\xe1ch v\xe0o phi\u1ebfu m\u01b0\u1ee3n kh\xf4ng th\xe0nh c\xf4ng","M\u1ed7i quy\u1ec3n s\xe1ch ch\u1ec9 \u0111\u01b0\u1ee3c m\u01b0\u1ee3n v\u1edbi s\u1ed1 l\u01b0\u1ee3ng l\xe0 1");this.borrowTicket.books.push(this.book_item),this.book_control.setValue(""),this.book_item=null}RemoveBookFromTicket(e){this.borrowTicket.books=this.borrowTicket.books.filter(t=>t.book_id!=e)}CreateBorrowTicket(){return Object(u.a)(this,void 0,void 0,(function*(){try{const e=this.borrowTicket.books.map(e=>e.book_id);if(this.util.isDuplicateExists(e))return toastr.error("T\u1ea1o phi\u1ebfu m\u01b0\u1ee3n s\xe1ch kh\xf4ng th\xe0nh c\xf4ng","M\u1ed7i quy\u1ec3n s\xe1ch ch\u1ec9 \u0111\u01b0\u1ee3c m\u01b0\u1ee3n v\u1edbi s\u1ed1 l\u01b0\u1ee3ng l\xe0 1");if(!this.customer_item)return toastr.error("T\u1ea1o phi\u1ebfu m\u01b0\u1ee3n s\xe1ch kh\xf4ng th\xe0nh c\xf4ng","Vui l\xf2ng ch\u1ecdn \u0111\u1ecdc gi\u1ea3");if(!e||!e.length)return toastr.error("T\u1ea1o phi\u1ebfu m\u01b0\u1ee3n s\xe1ch kh\xf4ng th\xe0nh c\xf4ng","Vui l\xf2ng ch\u1ecdn s\xe1ch m\u01b0\u1ee3n");const t={customer_id:this.customer_item.customer_id,employee_id:JSON.parse(localStorage.getItem("auth_info")).user_info.employee_id,borrow_book_ids:e},n=yield this.borrowTicketService.CreateBorrowTicket(t);n&&(this.confirm_borrow_ticket=n),toastr.success("T\u1ea1o phi\u1ebfu m\u01b0\u1ee3n s\xe1ch th\xe0nh c\xf4ng")}catch(e){toastr.error("T\u1ea1o phi\u1ebfu m\u01b0\u1ee3n s\xe1ch kh\xf4ng th\xe0nh c\xf4ng",e.msg||e.message)}}))}Confirm(){this.router.navigateByUrl("admin/borrow-ticket-management/borrow-ticket-list")}DeleteBorrowTicket(){return Object(u.a)(this,void 0,void 0,(function*(){yield this.borrowTicketService.DeleteBorrowTicketById(this.confirm_borrow_ticket.borrow_ticket_id),this.router.navigateByUrl("admin/borrow-ticket-management/create-borrow-ticket"),this.ngOnInit()}))}onBookChange(){return Object(u.a)(this,void 0,void 0,(function*(){const e={book_id:Number(this.book_control.value),book_name:this.book_control.value},t=(yield this.bookService.searchBooks(e)).books;this.book_options=[],t.forEach(e=>{this.book_options.push(e.book_id+" - "+e.book_name.toString())}),this.book_filtered_options=this.book_control.valueChanges.pipe(Object(fn.a)(""),Object(fe.a)(e=>this._bookFilter(e)),Object(vn.a)(()=>{this.book_control.value&&(this.book_item=this.all_books.find(e=>e.book_id==parseInt(this.book_control.value)))}))}))}onCustomerChange(){return Object(u.a)(this,void 0,void 0,(function*(){const e={customer_id:Number(this.customer_control.value),customer_name:this.customer_control.value};let t=yield this.customerService.SearchCustomers(e);this.customer_options=[],t.forEach(e=>{this.customer_options.push(`${e.customer_id.toString()} - ${e.last_name} ${e.first_name}`)}),this.customer_filtered_options=this.customer_control.valueChanges.pipe(Object(fn.a)(""),Object(fe.a)(e=>this._customerFilter(e)),Object(vn.a)(()=>{this.customer_control.value&&(this.customer_item=this.all_customers.find(e=>e.customer_id==parseInt(this.customer_control.value)))}))}))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(M),r.Qb(kt.a),r.Qb(yt.a),r.Qb(ee.a),r.Qb(bt.a),r.Qb(lt.a),r.Qb(re.a),r.Qb(K.a),r.Qb(ve.a),r.Qb(o.g))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-create-borrow-ticket"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["confirm_borrow_ticket_view",""],[1,"app-flex","flex-column","text-center"],[1,"box","setting-box","mt-0","w-75"],[1,"setting-header"],[1,"d-flex","justify-content-center","align-items-center","text-app"],[1,"font-weight-bold","text-app"],[1,"setting-body",2,"border-bottom","1px solid lightgrey"],[1,"col-12","text-left","font-weight-bold","mb-3"],[1,"col-12","d-flex","flex-column","justify-content-center"],[1,"row","app-flex","flex-row"],[1,"col-2","detail-title","font-weight-bold","text-app"],[1,"col-10","detail-info","d-flex","justify-content-center"],[1,"example-form"],[1,"example-full-width"],["type","text","placeholder","M\xe3 \u0111\u1ecdc gi\u1ea3","aria-label","Number","matInput","",3,"formControl","matAutocomplete","change"],["autoActiveFirstOption",""],["customerAuto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["class","row","style","padding-left:5.5rem",4,"ngIf"],[1,"col-10","detail-info"],["type","text","placeholder","M\xe3 s\xe1ch","aria-label","Number","matInput","",3,"formControl","matAutocomplete","change"],["bookAuto","matAutocomplete"],[4,"ngIf"],[1,"setting-footer","flex-end"],[1,"d-flex","align-items-center","ml-auto"],["class","mr-4",4,"ngIf"],[1,"btn-outline-app",3,"click"],[3,"value"],[1,"row",2,"padding-left","5.5rem"],[1,"col-2","app-flex"],[1,"h-75"],["alt","Avatar",2,"height","100%","width","100%","object-fit","cover",3,"src"],[1,"col-8","pt-4","d-flex","flex-column"],[1,"row","align-items-center","mb-4"],[1,"col-3","font-weight-bold"],[1,"col-9"],["type","text","disabled","","placeholder","Nh\u1eadp \u0111\u1ecba ch\u1ec9 email","name","inputField",1,"form-control","read-only","text-app","font-weight-bold",3,"ngModel","ngModelChange"],[1,"col-5"],[1,"col-4"],[1,"col-2","app-flex",3,"click"],[1,"btn","btn-danger","d-inline-flex"],[1,"text-center","text-app","font-weight-bold","mb-2","mt-4"],[1,"item-row","py-2","my-4","w-100"],[1,"row","d-flex","flex-row"],[1,"col","align-self-center","font-weight-bold","text-app",2,"max-width","150px"],[1,"col","align-self-center",2,"max-width","150px"],["alt","",2,"height","80px","width","60px","object-fit","cover",3,"src"],[1,"col-4","align-self-center"],[1,"col-3","align-self-center",2,"max-width","150px"],[1,"col","align-self-center"],[1,"col","align-self-center",2,"max-width","150px",3,"click"],[1,"btn-add","px-3","py-2","position-relative"],[1,"fa","fa-plus"],[4,"ngFor","ngForOf"],[1,"item-row","mt-4"],[1,"col","align-self-center","font-weight-bold","text-app",2,"max-width","100px"],[1,"fa","fa-remove","btn-danger"],[1,"mr-4"],[1,"d-flex","flex-row","p-5","mb-4"],[1,"avatar","col-3","mb-4"],[1,"d-flex","flex-column","h-100"],["src","assets/images/default-avatar.png","alt","Avatar",2,"height","100%","width","100%","object-fit","cover"],[1,"text-app","text-left","font-weight-bold","text-center","my-4"],[1,"col-9","d-flex","flex-column"],[1,"d-flex","flex-column"],[1,"row","py-3"],[1,"col-2","text-center","font-weight-bold"],[1,"col-9","text-app","font-weight-bold"],[1,"btn-outline-app",2,"width","6rem",3,"click"],[1,"btn-app",3,"click"]],template:function(e,t){if(1&e&&(r.Cc(0,Dn,42,18,"ng-container",0),r.Cc(1,Sn,71,24,"ng-template",null,1,r.Dc)),2&e){const e=r.tc(2);r.oc("ngIf",!t.confirm_borrow_ticket)("ngIfElse",e)}},directives:[c.m,D.x,D.n,D.o,_n.b,Vn.b,D.c,Wn.c,D.m,D.f,Wn.a,c.l,yn.n,D.p],pipes:[c.e,c.b,g.b],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}.item-row[_ngcontent-%COMP%]{display:flex;transition:.25s;padding-left:36px;height:100px;align-self:center!important;flex-direction:column;justify-content:center;box-shadow:3px 3px 8px 3px rgba(122,159,216,.2)}.item-row[_ngcontent-%COMP%]:hover{background-color:#eeeded;border-left:7px solid var(--app-color)}.item-row[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{position:relative;display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;overflow:hidden;line-height:22px}.item-row[_ngcontent-%COMP%]   .trash-icon[_ngcontent-%COMP%]{border-radius:50%;padding:5px;background-color:#f5f5f5}.item-row[_ngcontent-%COMP%]   .trash-can[_ngcontent-%COMP%]{padding:3px 20px 3px 2px;border-radius:30px;margin-bottom:5px;display:flex;width:auto;align-items:center;flex-direction:row;justify-content:center}.item-row[_ngcontent-%COMP%]   .trash-can[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;color:#f5f5f5;margin-left:10px;font-size:.8rem}.detail-title[_ngcontent-%COMP%]{font-size:1rem}.detail-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{box-sizing:border-box}.detail-info[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .detail-info[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-weight:bolder;box-sizing:border-box}.title-info[_ngcontent-%COMP%]{min-width:-webkit-fit-content;min-width:-moz-fit-content;min-width:fit-content}.detail-info[_ngcontent-%COMP%]{width:100%}.detail-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{border-bottom:1px solid var(--app-color)}"]}),e})();var Qn=n("4ShQ"),Nn=n("yaN0");const Rn=["paypalRef"];function $n(e,t){if(1&e&&(r.Wb(0,"i"),r.Ec(1),r.Vb()),2&e){const e=r.ic().$implicit;r.Db(1),r.Gc("Gi\u1ea3m gi\xe1: ",100*e.discount,"%")}}function In(e,t){if(1&e){const e=r.Xb();r.Ub(0),r.Wb(1,"div",69),r.Wb(2,"div",70),r.Ec(3),r.Vb(),r.Wb(4,"div",71),r.Wb(5,"div",72),r.Rb(6,"img",73),r.Vb(),r.Vb(),r.Wb(7,"div",74),r.Wb(8,"div",75),r.Wb(9,"div",76),r.Ec(10),r.Vb(),r.Wb(11,"div",77),r.Ec(12),r.Vb(),r.Vb(),r.Vb(),r.Wb(13,"div",78),r.Wb(14,"div",79),r.Ec(15),r.jc(16,"vnd"),r.Vb(),r.Cc(17,$n,2,1,"i",80),r.Vb(),r.Wb(18,"div",81),r.Wb(19,"div",82),r.Wb(20,"button",83),r.ec("click",(function(){r.vc(e);const n=t.$implicit;return r.ic().DecreaseQuantity(n)})),r.Rb(21,"i",84),r.Vb(),r.Wb(22,"input",85),r.ec("ngModelChange",(function(n){return r.vc(e),t.$implicit.quantity=n}))("ngModelChange",(function(){r.vc(e);const n=t.$implicit;return r.ic().ChangeQuantity(n)})),r.Vb(),r.Wb(23,"button",83),r.ec("click",(function(){r.vc(e);const n=t.$implicit;return r.ic().IncreaseQuantity(n)})),r.Rb(24,"i",86),r.Vb(),r.Vb(),r.Vb(),r.Wb(25,"div",87),r.Ec(26),r.jc(27,"vnd"),r.Vb(),r.Wb(28,"div",88),r.ec("click",(function(){r.vc(e);const n=t.$implicit;return r.ic().RemoveOrderLine(n)})),r.Rb(29,"i",89),r.Vb(),r.Vb(),r.Tb()}if(2&e){const e=t.$implicit,n=t.index;r.Db(3),r.Gc(" ",n+1,". "),r.Db(3),r.oc("src",e.image||"assets/images/default-book.png",r.xc),r.Db(4),r.Fc(e.book_name),r.Db(2),r.Gc(" T\u1ed3n: ",e.new_amount,""),r.Db(3),r.Fc(r.kc(16,8,e.retail_price)),r.Db(2),r.oc("ngIf",e.discount),r.Db(5),r.oc("ngModel",e.quantity),r.Db(4),r.Gc(" ",r.kc(27,10,e.total_price)," ")}}function Bn(e,t){if(1&e){const e=r.Xb();r.Ub(0),r.Wb(1,"div",90),r.ec("click",(function(){r.vc(e);const n=t.$implicit;return r.ic().AddToChart(n)})),r.Wb(2,"div",91),r.Wb(3,"div",92),r.Rb(4,"img",93),r.Wb(5,"div",94),r.Ec(6),r.Vb(),r.Wb(7,"div",95),r.Ec(8),r.jc(9,"vnd"),r.Vb(),r.Vb(),r.Wb(10,"div",96),r.Ec(11),r.Vb(),r.Vb(),r.Vb(),r.Tb()}if(2&e){const e=t.$implicit;r.Db(4),r.oc("src",(null==e?null:e.image)||"assets/images/default-book.png",r.xc),r.Db(2),r.Gc("T\u1ed3n: ",e.new_amount," "),r.Db(2),r.Fc(r.kc(9,4,e.retail_price)),r.Db(3),r.Fc(e.book_name)}}function An(e,t){if(1&e&&(r.Wb(0,"mat-option",97),r.Wb(1,"b"),r.Ec(2),r.Vb(),r.Vb()),2&e){const e=t.$implicit;r.oc("value",e),r.Db(2),r.Gc(" ",e," ")}}function Gn(e,t){if(1&e){const e=r.Xb();r.Wb(0,"input",98),r.ec("ngModelChange",(function(t){return r.vc(e),r.ic().customer_item.customer_id=t})),r.Vb()}if(2&e){const e=r.ic();r.oc("ngModel",e.customer_item.customer_id)}}function Un(e,t){1&e&&r.Rb(0,"input",99)}function Ln(e,t){if(1&e){const e=r.Xb();r.Wb(0,"input",100),r.ec("ngModelChange",(function(t){return r.vc(e),r.ic().customer_item.phone=t})),r.Vb()}if(2&e){const e=r.ic();r.oc("ngModel",e.customer_item.phone)}}function zn(e,t){1&e&&r.Rb(0,"input",101)}function Xn(e,t){if(1&e){const e=r.Xb();r.Wb(0,"input",100),r.ec("ngModelChange",(function(t){return r.vc(e),r.ic().customer_item.last_name=t})),r.Vb()}if(2&e){const e=r.ic();r.oc("ngModel",e.customer_item.last_name)}}function qn(e,t){1&e&&r.Rb(0,"input",102)}function Kn(e,t){if(1&e){const e=r.Xb();r.Wb(0,"input",100),r.ec("ngModelChange",(function(t){return r.vc(e),r.ic().customer_item.first_name=t})),r.Vb()}if(2&e){const e=r.ic();r.oc("ngModel",e.customer_item.first_name)}}function Hn(e,t){1&e&&r.Rb(0,"input",103)}let Jn=(()=>{class e{constructor(e,t,n,o,i,c,r,a,l,b){this.bookService=e,this.bookStore=t,this.bookQuery=n,this.customerService=o,this.customerQuery=i,this.fb=c,this.apiOrderService=r,this.router=a,this.route=l,this.telegramService=b,this.order_lines=[],this.books=[],this.order={price:0,total:0,total_amount:0,discount:0,fee:0,receipt:0,note:"",customer_paid_fee:0},this.all_customers=[],this.customer_control=new D.e,this.customer_options=[],this.filter={page:1,per_page:1e3}}ngOnInit(){return Object(u.a)(this,void 0,void 0,(function*(){const e=this.route.snapshot.queryParamMap.get("internalOrderId"),t=parseInt(this.route.snapshot.queryParamMap.get("errorCode"));t&&0!==t&&(yield this.apiOrderService.DeleteOrder({order_id:e}).then(e=>{this.router.navigateByUrl("/admin/pos-management")})),yield this.customerService.GetCustomers(this.filter),yield this.bookService.getBooks(this.filter),this.books=this.bookQuery.getValue().book_list_view.items,this.all_customers=this.customerQuery.getValue().customer_list_view.items,this.all_customers.forEach(e=>{this.customer_options.push(`${e.customer_id.toString()} - ${e.last_name} ${e.first_name}`)}),this.customer_filtered_options=this.customer_control.valueChanges.pipe(Object(fn.a)(""),Object(fe.a)(e=>this._customerFilter(e)),Object(vn.a)(()=>{parseInt(this.customer_control.value)&&(this.customer_item=this.all_customers.find(e=>e.customer_id==parseInt(this.customer_control.value)))}))}))}_customerFilter(e){return this.customer_options.filter(t=>0===t.toLowerCase().indexOf(e))}ClearCustomer(){this.customer_control.setValue(""),this.customer_item=null}onCustomerChange(){return Object(u.a)(this,void 0,void 0,(function*(){const e={customer_id:Number(this.customer_control.value),customer_name:this.customer_control.value};let t=yield this.customerService.SearchCustomers(e);this.customer_options=[],t.forEach(e=>{this.customer_options.push(`${e.customer_id.toString()} - ${e.last_name} ${e.first_name}`)}),this.customer_filtered_options=this.customer_control.valueChanges.pipe(Object(fn.a)(""),Object(fe.a)(e=>this._customerFilter(e)),Object(vn.a)(()=>{this.customer_control.value&&(this.customer_item=this.all_customers.find(e=>e.customer_id==parseInt(this.customer_control.value)))}))}))}AddToChart(e){let t=this.order_lines.map(e=>e.book_id),n=this.order_lines.find(t=>t.book_id==e.book_id);if(0==e.new_amount||n&&n.quantity>=e.new_amount)return toastr.error("S\u1ed1 l\u01b0\u1ee3ng t\u1ed3n kho kh\xf4ng h\u1ee3p l\u1ec7!");-1!=t.indexOf(e.book_id)?this.order_lines.forEach(t=>{t.book_id==e.book_id&&(t.quantity+=1,this.ChangeQuantity(t))}):(this.order_lines.push({book_id:e.book_id,quantity:1,image:e.image,book_name:e.book_name,retail_price:e.retail_price,total_price:e.retail_price*(1-e.discount),new_amount:e.new_amount,discount:e.discount}),this.SumOrder())}SumOrder(){0==this.order_lines.length&&(this.order={price:0,total:0,total_amount:0,discount:0,fee:0,receipt:0,note:"",customer_paid_fee:0}),this.order.price=this.order_lines.reduce((e,t)=>e+t.total_price,0),this.order.total_amount=this.order_lines.reduce((e,t)=>e+t.quantity,0),this.order.total=this.order.price-this.order.discount+this.order.fee}RemoveOrderLine(e){this.order_lines=this.order_lines.filter(t=>t.book_id!=e.book_id),this.SumOrder()}IncreaseQuantity(e){if(e.quantity>=e.new_amount)return toastr.error("S\u1ed1 l\u01b0\u1ee3ng h\xe0ng t\u1ed3n kho kh\xf4ng \u0111\u1ee7!");e.quantity+=1,this.ChangeQuantity(e),this.SumOrder()}DecreaseQuantity(e){e.quantity-=1,this.ChangeQuantity(e),this.SumOrder()}ChangeQuantity(e){e.quantity=e.quantity<0?Math.abs(e.quantity):e.quantity,e.total_price=e.retail_price*(1-e.discount)*e.quantity,this.SumOrder()}CreateOrder(){var e;return Object(u.a)(this,void 0,void 0,(function*(){try{const t={customer_id:(null===(e=this.customer_item)||void 0===e?void 0:e.customer_id)||1,employee_id:JSON.parse(localStorage.getItem("auth_info")).user_info.employee_id,order_date:Date.now(),type:"offline",total:this.order.total,note:this.order.note,order_detail_list:this.order_lines};yield this.apiOrderService.CreateOrder(t).then(e=>Object(u.a)(this,void 0,void 0,(function*(){yield this.telegramService.sendCreateOrder(e),toastr.success("Thanh to\xe1n h\xf3a \u0111\u01a1n th\xe0nh c\xf4ng"),location.reload()})))}catch(t){toastr.error("Thanh to\xe1n h\xf3a \u0111\u01a1n th\u1ea5t b\u1ea1i")}}))}SearchBooks(){let e=this.bookQuery.getValue().book_list_view.items;this.books=e.filter(e=>e.book_name.includes(this.search_keyword)||e.book_id==this.search_keyword)}CreateOrderByMomo(){return Object(u.a)(this,void 0,void 0,(function*(){try{const e={customer_id:this.customer_item.customer_id||1,employee_id:JSON.parse(localStorage.getItem("auth_info")).user_info.employee_id,order_date:Date.now(),type:"offline",total:this.order.total.toFixed(0),note:this.order.note,order_detail_list:this.order_lines};let t=yield this.apiOrderService.CreateOrderByMoMo(e);0===t.errorCode&&(toastr.success("Thanh to\xe1n h\xf3a \u0111\u01a1n b\u1eb1ng MOMO th\xe0nh c\xf4ng"),window.location.href=t.payUrl)}catch(e){toastr.error("Thanh to\xe1n h\xf3a \u0111\u01a1n b\u1eb1ng MOMO th\u1ea5t b\u1ea1i")}}))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(kt.a),r.Qb(xt.a),r.Qb(yt.a),r.Qb(ee.a),r.Qb(lt.a),r.Qb(D.d),r.Qb(Qn.a),r.Qb(o.g),r.Qb(o.a),r.Qb(Nn.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-POS"]],viewQuery:function(e,t){var n;1&e&&r.Ac(Rn,!0),2&e&&r.sc(n=r.fc())&&(t.paypalRef=n.first)},decls:146,vars:30,consts:[[1,"p-4","content","position-relative",2,"height","100vh"],[1,"h-100","d-flex","align-items-start","flex-column"],[1,"d-flex","w-100","h-100","justify-content-between","overflow-hidden","mb-auto","no-print"],[1,"left-part"],[1,"w-100","h-100"],[1,"d-flex","align-items-start","flex-column","h-100"],[1,"list-order-line","mb-auto","w-100","box","setting-box","mt-0"],[1,"setting-header","p-0"],[1,"my-3","text-app","ml-3"],[2,"font-size","2rem"],[1,"fas","fa-cart-plus","text-app"],[1,"order-lines"],[1,"mb-3"],[4,"ngFor","ngForOf"],[1,"list-product-group","position-relative","w-100","box","setting-box","mt-0"],[1,"fas","fa-book","text-app"],[1,"list-product-header"],[1,"d-flex","align-items-center","h-100"],[1,"barcode","barcode-click","border-right","cursor-pointer","px-3"],["src","assets/images/barcode.svg","alt","",1,"barcode-click",2,"width","2.25rem"],[1,"barcode-click","ml-2"],[1,"position-relative","h-100"],["id","search-input","type","text","placeholder","T\xecm s\u1ea3n ph\u1ea9m",1,"h-100","search-pos","border-0","ng-pristine","ng-valid","ng-touched",3,"ngModel","keyup","ngModelChange"],["src","assets/images/search_icon.png","alt","search",1,"search-icon"],[1,"list-product"],[1,"right-part","position-relative"],[1,"mb-auto","w-100","box","setting-box","mt-0",2,"height","30%!important","margin-bottom","10px!important"],[1,"fas","fa-users","text-app"],[1,"row"],[1,"col-12","pt-4","d-flex","flex-column"],[1,"row","mx-0"],[1,"col-12"],[1,"example-form"],[1,"example-full-width","w-100"],["type","text","placeholder","M\xe3 \u0111\u1ecdc gi\u1ea3","aria-label","Number","matInput","",3,"formControl","matAutocomplete","change"],["autoActiveFirstOption",""],["customerAuto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"row","align-items-center","mb-4","mx-0"],[1,"col-3","font-weight-bold"],[1,"col-9"],["type","text","style","width: 85%","class","form-control read-only text-app font-weight-bold d-inline-block","disabled","","name","inputField",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","style","width: 85%","class","form-control read-only text-app font-weight-bold d-inline-block","disabled","","name","inputField","placeholder","M\xe3 kh\xe1ch h\xe0ng",4,"ngIf"],[1,"col","align-self-center","d-inline",3,"click"],[1,"fa","fa-remove","btn-danger",2,"padding","8px 10px","display","inline-block"],["type","text","class","form-control read-only text-app font-weight-bold","disabled","","name","inputField",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","class","form-control read-only text-app font-weight-bold","disabled","","name","inputField","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ",4,"ngIf"],[1,"col-5"],["type","text","class","form-control read-only text-app font-weight-bold","disabled","","name","inputField","placeholder","H\u1ecd",4,"ngIf"],[1,"col-4"],["type","text","class","form-control read-only text-app font-weight-bold","disabled","","name","inputField","placeholder","T\xean ",4,"ngIf"],[1,"position-relative","w-100","box","setting-box","mt-0",2,"height","69%!important"],[1,"fas","fa-receipt","text-app"],[1,"setting-body"],[1,"row","py-2","px-0"],[1,"col-4","d-flex","align-items-center"],[1,"col-8"],[1,"font-weight-bolder","text-right"],["type","number","placeholder","Nh\u1eadp gi\u1ea3m gi\xe1",1,"form-control","text-right",3,"ngModel","ngModelChange"],["type","number","placeholder","Nh\u1eadp ph\u1ee5 thu",1,"form-control","text-right",3,"ngModel","ngModelChange"],["type","text ","placeholder","Nh\u1eadp ghi ch\xfa \u0111\u01a1n h\xe0ng",1,"form-control","text-right",3,"ngModel","ngModelChange"],["size","20","height","6px",1,"font-weight-bolder",2,"background","black","height","1px"],[1,"row","py-3","px-0"],[1,"setting-footer","d-block"],[1,"row","px-0","pb-1"],[1,"btn-app","btn-block","w-100",2,"font-size","1.5rem",3,"click"],[1,"fas","fa-cart-plus","text-white",2,"height","1.5rem"],[1,"btn-app","btn-block","w-100",2,"background","#ae2070","font-size","1.5rem",3,"click"],["src","assets/images/momo-icon.jpg","alt","",1,"ml-2",2,"height","2.5rem"],[1,"d-flex","align-items-center","order-line-wrapper","mb-3"],[1,"line-index","text-center","font-weight-bold"],[1,"d-flex","align-items-center"],[1,"upload-photo-wrapper"],["alt","Logo s\u1ea3n ph\u1ea9m","height","100%",1,"p-0","line-logo",3,"src"],[1,"flex-fill","product-name"],[1,"w-100"],[1,"text-wrap","text-truncate","text-app","font-weight-bold"],[1,"text-default","font-10"],[1,"line-price","m-1","text-right"],[1,"font-weight-bold"],[4,"ngIf"],[1,"d-flex","align-items-center","line-quantity","ml-5"],["role","group",1,"btn-group","border","group-quantity"],["type","button",1,"btn","btn-sm","border-0","bg-transparent",3,"click"],[1,"fa","fa-minus","text-white"],["type","number","min","0",1,"number-input","text-center","editable",2,"width","8rem",3,"ngModel","ngModelChange"],[1,"fa","fa-plus","text-white"],[1,"font-weight-bold","text-right","line-payment"],[1,"d-flex","align-items-center","line-delete",2,"cursor","pointer",3,"click"],[1,"fas","fa-minus-circle"],[1,"product-card",3,"click"],[1,"product-card-item"],[1,"box-card"],["alt","",1,"product-img","h-100",2,"width","120px!important","height","180px!important","object-fit","cover",3,"src"],[1,"product-quantity"],[1,"product-price"],["placement","top",1,"product-name-card","font-weight-bold"],[3,"value"],["type","text","disabled","","name","inputField",1,"form-control","read-only","text-app","font-weight-bold","d-inline-block",2,"width","85%",3,"ngModel","ngModelChange"],["type","text","disabled","","name","inputField","placeholder","M\xe3 kh\xe1ch h\xe0ng",1,"form-control","read-only","text-app","font-weight-bold","d-inline-block",2,"width","85%"],["type","text","disabled","","name","inputField",1,"form-control","read-only","text-app","font-weight-bold",3,"ngModel","ngModelChange"],["type","text","disabled","","name","inputField","placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ",1,"form-control","read-only","text-app","font-weight-bold"],["type","text","disabled","","name","inputField","placeholder","H\u1ecd",1,"form-control","read-only","text-app","font-weight-bold"],["type","text","disabled","","name","inputField","placeholder","T\xean ",1,"form-control","read-only","text-app","font-weight-bold"]],template:function(e,t){if(1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"div",2),r.Wb(3,"div",3),r.Wb(4,"div",4),r.Wb(5,"div",5),r.Wb(6,"div",6),r.Wb(7,"div",7),r.Wb(8,"h3",8),r.Wb(9,"b",9),r.Ec(10," Gi\u1ecf h\xe0ng "),r.Rb(11,"i",10),r.Vb(),r.Vb(),r.Vb(),r.Wb(12,"div",11),r.Wb(13,"div",12),r.Cc(14,In,30,12,"ng-container",13),r.Vb(),r.Vb(),r.Vb(),r.Wb(15,"div",14),r.Wb(16,"div",7),r.Wb(17,"h3",8),r.Wb(18,"b",9),r.Ec(19," S\u1ea3n ph\u1ea9m "),r.Rb(20,"i",15),r.Vb(),r.Vb(),r.Vb(),r.Wb(21,"div",16),r.Wb(22,"div",17),r.Wb(23,"div",18),r.Rb(24,"img",19),r.Wb(25,"span",20),r.Ec(26,"Qu\xe9t m\xe3 v\u1ea1ch"),r.Vb(),r.Vb(),r.Wb(27,"div",21),r.Wb(28,"input",22),r.ec("keyup",(function(){return t.SearchBooks()}))("ngModelChange",(function(e){return t.search_keyword=e})),r.Vb(),r.Rb(29,"img",23),r.Vb(),r.Vb(),r.Vb(),r.Wb(30,"div",24),r.Cc(31,Bn,12,6,"ng-container",13),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(32,"div",25),r.Wb(33,"div",26),r.Wb(34,"div",7),r.Wb(35,"h3",8),r.Wb(36,"b",9),r.Ec(37," Kh\xe1ch h\xe0ng "),r.Rb(38,"i",27),r.Vb(),r.Vb(),r.Vb(),r.Wb(39,"div",28),r.Wb(40,"div",29),r.Wb(41,"div",30),r.Wb(42,"div",31),r.Wb(43,"form",32),r.Wb(44,"mat-form-field",33),r.Wb(45,"input",34),r.ec("change",(function(){return t.onCustomerChange()})),r.Vb(),r.Wb(46,"mat-autocomplete",35,36),r.Cc(48,An,3,2,"mat-option",37),r.jc(49,"async"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(50,"div",38),r.Wb(51,"div",39),r.Ec(52," M\xe3 kh\xe1ch h\xe0ng: "),r.Vb(),r.Wb(53,"div",40),r.Cc(54,Gn,1,1,"input",41),r.Cc(55,Un,1,0,"input",42),r.Wb(56,"div",43),r.ec("click",(function(){return t.ClearCustomer()})),r.Rb(57,"i",44),r.Vb(),r.Vb(),r.Vb(),r.Wb(58,"div",38),r.Wb(59,"div",39),r.Ec(60," S\u1ed1 \u0111i\u1ec7n tho\u1ea1i: "),r.Vb(),r.Wb(61,"div",40),r.Cc(62,Ln,1,1,"input",45),r.Cc(63,zn,1,0,"input",46),r.Vb(),r.Vb(),r.Wb(64,"div",38),r.Wb(65,"div",39),r.Ec(66," H\u1ecd v\xe0 t\xean: "),r.Vb(),r.Wb(67,"div",47),r.Cc(68,Xn,1,1,"input",45),r.Cc(69,qn,1,0,"input",48),r.Vb(),r.Wb(70,"div",49),r.Cc(71,Kn,1,1,"input",45),r.Cc(72,Hn,1,0,"input",50),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(73,"div",51),r.Wb(74,"div",7),r.Wb(75,"h3",8),r.Wb(76,"b",9),r.Ec(77," H\xf3a \u0111\u01a1n "),r.Rb(78,"i",52),r.Vb(),r.Vb(),r.Vb(),r.Wb(79,"div",53),r.Wb(80,"div",54),r.Wb(81,"div",55),r.Wb(82,"b"),r.Ec(83,"T\u1ea1m t\xednh: "),r.Vb(),r.Vb(),r.Wb(84,"div",56),r.Wb(85,"div",57),r.Ec(86),r.jc(87,"vnd"),r.Vb(),r.Vb(),r.Vb(),r.Wb(88,"div",54),r.Wb(89,"div",55),r.Wb(90,"b"),r.Ec(91,"S\u1ed1 l\u01b0\u1ee3ng: "),r.Vb(),r.Vb(),r.Wb(92,"div",56),r.Wb(93,"div",57),r.Ec(94),r.Vb(),r.Vb(),r.Vb(),r.Wb(95,"div",54),r.Wb(96,"div",55),r.Wb(97,"b"),r.Ec(98,"Gi\u1ea3m gi\xe1 (\u0111): "),r.Vb(),r.Vb(),r.Wb(99,"div",56),r.Wb(100,"input",58),r.ec("ngModelChange",(function(){return t.SumOrder()}))("ngModelChange",(function(e){return t.order.discount=e})),r.Vb(),r.Vb(),r.Vb(),r.Wb(101,"div",54),r.Wb(102,"div",55),r.Wb(103,"b"),r.Ec(104,"Ph\u1ee5 thu kh\xe1c(\u0111): "),r.Vb(),r.Vb(),r.Wb(105,"div",56),r.Wb(106,"input",59),r.ec("ngModelChange",(function(){return t.SumOrder()}))("ngModelChange",(function(e){return t.order.fee=e})),r.Vb(),r.Vb(),r.Vb(),r.Wb(107,"div",54),r.Wb(108,"div",55),r.Wb(109,"b"),r.Ec(110,"Kh\xe1ch thanh to\xe1n(\u0111): "),r.Vb(),r.Vb(),r.Wb(111,"div",56),r.Wb(112,"input",59),r.ec("ngModelChange",(function(){return t.SumOrder()}))("ngModelChange",(function(e){return t.order.customer_paid_fee=e})),r.Vb(),r.Vb(),r.Vb(),r.Wb(113,"div",54),r.Wb(114,"div",55),r.Wb(115,"b"),r.Ec(116,"Ghi ch\xfa \u0111\u01a1n h\xe0ng: "),r.Vb(),r.Vb(),r.Wb(117,"div",56),r.Wb(118,"input",60),r.ec("ngModelChange",(function(){return t.SumOrder()}))("ngModelChange",(function(e){return t.order.note=e})),r.Vb(),r.Vb(),r.Vb(),r.Wb(119,"div"),r.Rb(120,"hr",61),r.Vb(),r.Wb(121,"div",62),r.Wb(122,"div",55),r.Wb(123,"b"),r.Ec(124,"T\u1ed5ng c\u1ed9ng: "),r.Vb(),r.Vb(),r.Wb(125,"div",56),r.Wb(126,"div",57),r.Ec(127),r.jc(128,"vnd"),r.Vb(),r.Vb(),r.Vb(),r.Wb(129,"div",62),r.Wb(130,"div",55),r.Wb(131,"b"),r.Ec(132,"Ti\u1ec1n th\u1eeba: "),r.Vb(),r.Vb(),r.Wb(133,"div",56),r.Wb(134,"div",57),r.Ec(135),r.jc(136,"vnd"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(137,"div",63),r.Wb(138,"div",64),r.Wb(139,"div",65),r.ec("click",(function(){return t.CreateOrder()})),r.Ec(140,"Thanh to\xe1n h\xf3a \u0111\u01a1n "),r.Rb(141,"i",66),r.Vb(),r.Vb(),r.Wb(142,"div",64),r.Wb(143,"div",67),r.ec("click",(function(){return t.CreateOrderByMomo()})),r.Ec(144,"Thanh to\xe1n h\xf3a \u0111\u01a1n b\u1eb1ng MOMO "),r.Rb(145,"img",68),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb()),2&e){const e=r.tc(47);r.Db(14),r.oc("ngForOf",t.order_lines),r.Db(14),r.oc("ngModel",t.search_keyword),r.Db(3),r.oc("ngForOf",t.books),r.Db(14),r.oc("formControl",t.customer_control)("matAutocomplete",e),r.Db(3),r.oc("ngForOf",r.kc(49,22,t.customer_filtered_options)),r.Db(6),r.oc("ngIf",t.customer_item),r.Db(1),r.oc("ngIf",!t.customer_item),r.Db(7),r.oc("ngIf",t.customer_item),r.Db(1),r.oc("ngIf",!t.customer_item),r.Db(5),r.oc("ngIf",t.customer_item),r.Db(1),r.oc("ngIf",!t.customer_item),r.Db(2),r.oc("ngIf",t.customer_item),r.Db(1),r.oc("ngIf",!t.customer_item),r.Db(14),r.Fc(r.kc(87,24,t.order.price)),r.Db(8),r.Fc(t.order.total_amount),r.Db(6),r.oc("ngModel",t.order.discount),r.Db(6),r.oc("ngModel",t.order.fee),r.Db(6),r.oc("ngModel",t.order.customer_paid_fee),r.Db(6),r.oc("ngModel",t.order.note),r.Db(9),r.Fc(r.kc(128,26,t.order.total)),r.Db(8),r.Fc(r.kc(136,28,t.order.customer_paid_fee-t.order.total))}},directives:[c.l,D.c,D.m,D.p,D.x,D.n,D.o,_n.b,Vn.b,Wn.c,D.f,Wn.a,c.m,D.r,yn.n],pipes:[c.b,g.a],styles:[".content[_ngcontent-%COMP%]{flex:1;overflow-x:hidden;overflow-y:auto}.left-part[_ngcontent-%COMP%]{width:62%}.right-part[_ngcontent-%COMP%]{width:37%}.list-order-line[_ngcontent-%COMP%]{flex:1;height:51%!important;overflow-y:auto;margin-bottom:10px!important}.list-product-group[_ngcontent-%COMP%]{overflow-y:auto;height:49%!important}.order-lines[_ngcontent-%COMP%]{padding:1rem}.order-line-wrapper[_ngcontent-%COMP%]{padding:7px 0;border:1px solid transparent;border-radius:7px;border:1px solid var(--app-color)}.line-index[_ngcontent-%COMP%]{min-width:50px}.upload-photo-wrapper[_ngcontent-%COMP%]{width:4rem!important;height:6rem!important}.line-logo[_ngcontent-%COMP%], .upload-photo-wrapper[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover}.line-logo[_ngcontent-%COMP%]{-o-object-position:center;object-position:center;width:100%;height:100%}.product-name[_ngcontent-%COMP%]{width:16.25rem;padding:0 .8rem;display:flex;flex-wrap:wrap;align-items:center;position:relative}.line-price[_ngcontent-%COMP%]{min-width:8.75rem}.line-quantity[_ngcontent-%COMP%]{padding:0 1.25rem}.group-quantity[_ngcontent-%COMP%]{border-radius:3px!important;background-color:var(--app-color);align-items:center}.editable[_ngcontent-%COMP%]{width:3.3rem;line-height:1.6rem;border:1px solid var(--app-color)}.line-payment[_ngcontent-%COMP%]{min-width:120px}.line-delete[_ngcontent-%COMP%], .line-payment[_ngcontent-%COMP%]{padding:0 15px}.search-pos[_ngcontent-%COMP%]{outline:none;padding:.4rem .8rem;min-width:40rem}.search-icon[_ngcontent-%COMP%]{position:absolute;top:50%;right:.85rem;width:1.5rem;transform:translateY(-50%);cursor:pointer}.list-product-header[_ngcontent-%COMP%]{padding:0;border-bottom:1px solid #d3d3d3;border-top:1px solid #d3d3d3;height:3rem}.barcode[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;justify-content:center;text-align:center}.list-product[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;padding:.8rem 1.5rem}.product-card[_ngcontent-%COMP%]{flex-basis:12.5%;padding:5px}.product-card[_ngcontent-%COMP%], .product-card-item[_ngcontent-%COMP%]{cursor:pointer}.product-img[_ngcontent-%COMP%]{width:100%;background-position:50%;background-repeat:no-repeat;background-size:cover;border-radius:7px;border:1px solid grey;margin-bottom:.25rem}.product-quantity[_ngcontent-%COMP%]{color:#000;font-size:.8rem}.product-price[_ngcontent-%COMP%], .product-quantity[_ngcontent-%COMP%]{font-weight:700;text-align:center}.product-price[_ngcontent-%COMP%]{color:var(--app-color);font-size:.9rem}.product-name-card[_ngcontent-%COMP%]{height:1.2rem;line-height:1.2rem;overflow:hidden;font-size:.8rem;text-align:center!important;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}"]}),e})();function Zn(e,t){if(1&e&&(r.Ub(0),r.Wb(1,"a",5),r.Ec(2),r.Vb(),r.Tb()),2&e){const e=t.$implicit;r.Db(1),r.oc("routerLink",e.url),r.Db(1),r.Fc(e.itemName)}}let Yn=(()=>{class e{constructor(e){this.router=e,this.headerItems=[{itemName:"Danh s\xe1ch h\xf3a \u0111\u01a1n",url:"order-list"}]}ngOnInit(){}GoToPOS(){this.router.navigateByUrl("/admin/pos-management")}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(o.g))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-order-management"]],decls:8,vars:1,consts:[[1,"p-0","pl-2","header-admin","d-flex","align-items-center"],[1,"page-title","font-weight-bold","pl-4","mr-5"],[4,"ngFor","ngForOf"],[1,"header-item",3,"click"],[1,"page-content-admin","p-4"],["routerLinkActive","active",1,"header-item",3,"routerLink"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Ec(2," Qu\u1ea3n l\xfd h\xf3a \u0111\u01a1n "),r.Vb(),r.Cc(3,Zn,3,2,"ng-container",2),r.Wb(4,"div",3),r.ec("click",(function(){return t.GoToPOS()})),r.Ec(5,"T\u1ea1o m\u1edbi"),r.Vb(),r.Vb(),r.Wb(6,"div",4),r.Rb(7,"router-outlet"),r.Vb()),2&e&&(r.Db(3),r.oc("ngForOf",t.headerItems))},directives:[c.l,o.l,o.j,o.i],styles:[""]}),e})();var eo=n("mSYO"),to=n("QgZW");let no=(()=>{class e{constructor(e,t,n){this.OrderService=e,this.OrderQuery=t,this.modalController=n,this.borrow_status="Ho\xe0n th\xe0nh"}ngOnInit(){}ngOnChanges(){const e=(new Date).getTime(),t=new Date(this.order_item.return_date).getTime(),n=new Date(this.order_item.appointment_date).getTime();!t&&e<=n&&(this.borrow_status="\u0110ang m\u01b0\u1ee3n"),t&&t<=n&&(this.borrow_status="Ho\xe0n th\xe0nh"),!t&&e>n&&(this.borrow_status="\u0110ang tr\u1ec5"),t&&t>n&&(this.borrow_status="Tr\u1ea3 tr\u1ec5")}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(eo.a),r.Qb(l.a),r.Qb(P.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-order-row"]],inputs:{order_item:"order_item",index:"index"},features:[r.Bb],decls:21,vars:13,consts:[[1,"item-row","py-2"],[1,"row","d-flex","flex-row"],[1,"col","font-weight-bold","text-app","app-flex","flex-column","text-center",2,"max-width","200px"],[1,"fas","fa-external-link-alt","external-link-icon"],[1,"col","app-flex","flex-column","text-center","text-app","font-weight-bolder",2,"max-width","200px"],[1,"col","app-flex","flex-column","text-center",2,"max-width","200px"],[1,"col","app-flex","flex-column","text-center"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"div",2),r.Ec(3),r.jc(4,"standardizedId"),r.Vb(),r.Wb(5,"div",2),r.Wb(6,"div"),r.Ec(7),r.jc(8,"standardizedId"),r.Rb(9,"i",3),r.Vb(),r.Wb(10,"div"),r.Ec(11),r.Vb(),r.Vb(),r.Wb(12,"div",4),r.Ec(13),r.jc(14,"vnd"),r.Vb(),r.Wb(15,"div",5),r.Ec(16),r.Vb(),r.Wb(17,"div",4),r.Ec(18),r.Vb(),r.Wb(19,"div",6),r.Ec(20),r.Vb(),r.Vb(),r.Vb()),2&e&&(r.Db(3),r.Gc(" ",r.kc(4,7,null==t.order_item?null:t.order_item.order_id)||"-"," "),r.Db(4),r.Gc(" ",r.kc(8,9,null==t.order_item||null==t.order_item.customer?null:t.order_item.customer.customer_id)||"-"," "),r.Db(4),r.Gc("",((null==t.order_item||null==t.order_item.customer?null:t.order_item.customer.last_name)||"")+" "+((null==t.order_item||null==t.order_item.customer?null:t.order_item.customer.first_name)||"")||"-"," "),r.Db(2),r.Gc("",r.kc(14,11,null==t.order_item?null:t.order_item.total)," "),r.Db(3),r.Fc("online"==(null==t.order_item?null:t.order_item.type)?"Tr\u1ef1c tuy\u1ebfn":"T\u1ea1i ch\u1ed7"),r.Db(2),r.Gc("",null==t.order_item?null:t.order_item.total_quantity," "),r.Db(2),r.Fc((null==t.order_item?null:t.order_item.note)||"-"))},pipes:[g.b,g.a],styles:[".item-row[_ngcontent-%COMP%]{display:flex;transition:.5s;padding-left:36px;height:100px;cursor:pointer;align-self:center!important;flex-direction:column;justify-content:center;box-shadow:3px 3px 8px 3px rgba(122,159,216,.2);margin-bottom:20px}.item-row[_ngcontent-%COMP%]:hover{background-color:#e4e4e4;border-left:7px solid var(--app-color)}.item-row[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{position:relative;display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;overflow:hidden;line-height:22px}.item-row[_ngcontent-%COMP%]   .trash-icon[_ngcontent-%COMP%]{border-radius:50%;padding:5px;background-color:#f5f5f5}.item-row[_ngcontent-%COMP%]   .trash-can[_ngcontent-%COMP%]{padding:3px 20px 3px 2px;border-radius:30px;margin-bottom:5px;display:flex;width:auto;align-items:center;flex-direction:row;justify-content:center}.item-row[_ngcontent-%COMP%]   .trash-can[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;color:#f5f5f5;margin-left:10px;font-size:.8rem}"]}),e})();function oo(e,t){}function io(e,t){1&e&&(r.Wb(0,"p"),r.Ec(1,"Day la the item n\xe0"),r.Vb())}function co(e,t){if(1&e&&(r.Wb(0,"option",17),r.Ec(1),r.Wb(2,"div",18),r.Rb(3,"i",19),r.Vb(),r.Vb()),2&e){const e=t.$implicit;r.oc("ngValue",e.type_name),r.Db(1),r.Gc(" ",null==e?null:e.display_name," ")}}function ro(e,t){if(1&e){const e=r.Xb();r.Ub(0),r.Wb(1,"app-order-row",20),r.ec("click",(function(){r.vc(e);const n=t.$implicit;return r.ic(2).onViewOrderDetail(n.order_id)})),r.Vb(),r.Tb()}if(2&e){const e=t.$implicit;r.Db(1),r.oc("order_item",e)}}function ao(e,t){if(1&e){const e=r.Xb();r.Wb(0,"div",3),r.Rb(1,"input",4),r.Rb(2,"input",5),r.Wb(3,"select",6),r.Wb(4,"option",7),r.Ec(5,"Ch\u1ecdn h\xecnh th\u1ee9c thanh to\xe1n "),r.Vb(),r.Cc(6,co,4,2,"option",8),r.Vb(),r.Wb(7,"div",9),r.ec("click",(function(){return r.vc(e),r.ic().search()})),r.Ec(8,"T\xecm ki\u1ebfm"),r.Vb(),r.Vb(),r.Wb(9,"div",10),r.Wb(10,"div",11),r.Wb(11,"div",12),r.Wb(12,"div",13),r.Ec(13,"M\xe3 h\xf3a \u0111\u01a1n "),r.Vb(),r.Wb(14,"div",13),r.Ec(15,"M\xe3 \u0111\u1ecdc gi\u1ea3"),r.Vb(),r.Wb(16,"div",13),r.Ec(17,"T\u1ed5ng ti\u1ec1n"),r.Vb(),r.Wb(18,"div",13),r.Ec(19,"H\xecnh th\u1ee9c"),r.Vb(),r.Wb(20,"div",13),r.Ec(21,"T\u1ed5ng SL"),r.Vb(),r.Wb(22,"div",14),r.Ec(23,"Ghi ch\xfa"),r.Vb(),r.Vb(),r.Vb(),r.Cc(24,ro,2,1,"ng-container",15),r.jc(25,"async"),r.Wb(26,"app-page-pagination",16),r.ec("navigate",(function(t){return r.vc(e),r.ic().navigate(t)})),r.jc(27,"async"),r.Vb(),r.Vb()}if(2&e){const e=r.ic();var n=null;const t=null==(n=r.kc(25,5,e.order_list$))?null:n.items.slice().reverse();r.oc("formGroup",e.searchForm),r.Db(6),r.oc("ngForOf",e.orderTypes),r.Db(18),r.oc("ngForOf",t),r.Db(2),r.oc("paginationOpt",e.current_pagination_opt$)("currentPage",r.kc(27,7,e.current_page$))}}let lo=(()=>{class e{constructor(e,t,n,o,i,c){this.fb=e,this.router=t,this.OrderService=n,this.OrderQuery=o,this.OrderStore=i,this.ref=c,this.order_list$=this.OrderQuery.order_list_view$,this.current_pagination_opt$=this.OrderQuery.current_pagination_opt$,this.current_page$=this.OrderQuery.current_page$,this.currentPaginationOpt=new y.c,this.orderTypes=[{display_name:"T\u1ea1i ch\u1ed7",type_name:"offline"},{display_name:"Tr\u1ef1c tuy\u1ebfn",type_name:"online"}],this.searchForm=this.fb.group({order_id:"",customer_phone:"",type:""})}ngOnInit(){return Object(u.a)(this,void 0,void 0,(function*(){yield this.onRequestNewPage()}))}onRequestNewPage(){return Object(u.a)(this,void 0,void 0,(function*(){yield this.OrderService.getOrders(this.OrderQuery.getValue().filter_page).then(()=>{this.OrderService.setupPagination()})}))}navigate(e){return Object(u.a)(this,void 0,void 0,(function*(){this.OrderService.navigate(e),yield this.onRequestNewPage()}))}onViewOrderDetail(e){this.router.navigateByUrl("/admin/order-management/order-detail/"+e)}search(){return Object(u.a)(this,void 0,void 0,(function*(){let{order_id:e,customer_phone:t,type:n}=this.searchForm.value;if(!e&&!t&&!n)return yield this.onRequestNewPage();const o={order_id:e||null,customer_phone:t||null,type:n||null};let i=yield this.OrderService.searchOrders(o);this.OrderStore.update({order_list_view:{items:i,has_next:!1,has_prev:!1,current_page:1}})}))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(D.d),r.Qb(o.g),r.Qb(eo.a),r.Qb(l.a),r.Qb(to.a),r.Qb(r.h))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-order-list"]],decls:7,vars:0,consts:[["header",""],["emptyItem",""],["item",""],[1,"search-form","row","app-flex","mb-3",3,"formGroup"],["type","text","placeholder","Nh\u1eadp m\xe3 h\xf3a \u0111\u01a1n","formControlName","order_id",1,"form-control","rounded-pill","col-2","p-4","mr-3"],["type","text","placeholder","Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i KH","formControlName","customer_phone",1,"form-control","rounded-pill","col-2","p-4","mr-3"],["name","role","formControlName","type",1,"form-control","col-2","p-2","rounded-pill","mr-3"],["value","","selected",""],["class","font-weight-bold",3,"ngValue",4,"ngFor","ngForOf"],[1,"btn-app","rounded-pill","col-1",3,"click"],[1,"d-flex","flex-column","h-100"],[1,"table","mt-3"],[1,"table-header","row","font-weight-bold","text-uppercase","ng-star-inserted","align-items-center","my-3"],[1,"col","text-app","text-center",2,"max-width","200px"],[1,"col","text-app","text-center"],[4,"ngFor","ngForOf"],[1,"mt-auto",3,"paginationOpt","currentPage","navigate"],[1,"font-weight-bold",3,"ngValue"],[1,"px-3","py-2"],[1,"fa","fa-plus"],[3,"order_item","click"]],template:function(e,t){1&e&&(r.Wb(0,"app-item-table"),r.Cc(1,oo,0,0,"ng-template",null,0,r.Dc),r.Cc(3,io,2,0,"ng-template",null,1,r.Dc),r.Cc(5,ao,28,9,"ng-template",null,2,r.Dc),r.Vb())},directives:[B,D.n,D.h,D.c,D.m,D.g,D.u,D.q,D.w,c.l,y.b,no],pipes:[c.b],styles:[".table-header[_ngcontent-%COMP%]{padding-left:36px}"]}),e})();function bo(e,t){1&e&&r.Rb(0,"i",9)}let so=(()=>{class e{constructor(e){this.modalAction=e,this.loading=!1}ngOnInit(){}onConfirmDelete(){this.modalAction.dismiss(this.order)}dismissModal(){this.modalAction.dismiss(null)}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(p.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-confirm-delete-modal"]],inputs:{order:"order"},decls:18,vars:2,consts:[[1,"modal-header"],[1,"modal-title","big-font"],[1,"close",3,"click"],[1,"text-large"],[1,"modal-body"],[1,"modal-footer"],[1,"btn","btn-app","btn-outline-app",3,"click"],[1,"btn","btn-app","text-white",3,"click"],["class","fa fa-spin fa-circle-o-notch",4,"ngIf"],[1,"fa","fa-spin","fa-circle-o-notch"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Ec(2," X\xe1c nh\u1eadn h\u1ee7y phi\u1ebfu m\u01b0\u1ee3n s\xe1ch "),r.Vb(),r.Wb(3,"div",2),r.ec("click",(function(){return t.dismissModal()})),r.Wb(4,"span",3),r.Ec(5,"\xd7"),r.Vb(),r.Vb(),r.Vb(),r.Wb(6,"div",4),r.Wb(7,"div"),r.Ec(8,"B\u1ea1n c\xf3 th\u1ef1c s\u1ef1 mu\u1ed1n h\u1ee7y phi\u1ebfu m\u01b0\u1ee3n s\xe1ch "),r.Wb(9,"b"),r.Ec(10),r.Vb(),r.Ec(11," ra kh\u1ecfi h\u1ec7 th\u1ed1ng th\u01b0 qu\xe1n kh\xf4ng ? "),r.Vb(),r.Vb(),r.Wb(12,"div",5),r.Wb(13,"button",6),r.ec("click",(function(){return t.dismissModal()})),r.Ec(14,"\u0110\xf3ng"),r.Vb(),r.Wb(15,"button",7),r.ec("click",(function(){return t.onConfirmDelete()})),r.Cc(16,bo,1,0,"i",8),r.Ec(17," X\xe1c nh\u1eadn "),r.Vb(),r.Vb()),2&e&&(r.Db(10),r.Fc(null==t.order?null:t.order.order_id),r.Db(6),r.oc("ngIf",t.loading))},styles:[""]}),e})();function uo(e,t){if(1&e){const e=r.Xb();r.Wb(0,"div",28),r.ec("click",(function(){return r.vc(e),r.ic().onOpenDeleteModal()})),r.Rb(1,"i",29),r.Wb(2,"span",30),r.Ec(3,"H\u1ee7y b\u1ecf"),r.Vb(),r.Vb()}}function po(e,t){if(1&e&&(r.Wb(0,"div",31),r.Wb(1,"div",32),r.Wb(2,"div",33),r.Ec(3),r.Vb(),r.Wb(4,"div",34),r.Ec(5),r.jc(6,"standardizedId"),r.Vb(),r.Wb(7,"div",35),r.Ec(8),r.Vb(),r.Wb(9,"div",36),r.Ec(10),r.Vb(),r.Wb(11,"div",35),r.Ec(12),r.jc(13,"vnd"),r.Vb(),r.Wb(14,"div",35),r.Ec(15),r.jc(16,"vnd"),r.Vb(),r.Wb(17,"div",37),r.Ec(18),r.jc(19,"vnd"),r.Vb(),r.Vb(),r.Vb()),2&e){const e=t.$implicit,n=t.index;r.Eb("data-index",n),r.Db(3),r.Fc(n+1),r.Db(2),r.Fc(r.kc(6,8,null==e.book?null:e.book.book_id)||"-"),r.Db(3),r.Fc((null==e.book?null:e.book.book_name)||"-"),r.Db(2),r.Fc(e.quantity||"-"),r.Db(2),r.Fc(r.kc(13,10,null==e?null:e.retail_price)||"-"),r.Db(3),r.Fc(r.kc(16,12,null==e?null:e.discount)||"-"),r.Db(3),r.Fc(r.kc(19,14,null==e?null:e.total)||"-")}}const ho=function(e,t){return{"text-danger":e,"text-success":t}};let mo=(()=>{class e{constructor(e,t,n,o,i,c,r,a){this.OrderQuery=e,this.OrderService=t,this.router=n,this.fb=o,this.ref=i,this.route=c,this.modalController=r,this.OrderStore=a,this.total_quantity=0,this.filter={page:1,per_page:1e3},this.borrow_status="Ho\xe0n th\xe0nh",this.isEditing=!1,this.detail_order$=this.OrderQuery.detail_order$,this.updateOrderForm=this.fb.group({order_id:[""],order_name:[""],author:[""],supplier:[""],category:[""],page_number:[""],cost_price:[""],retail_price:[""],discount:[""],old_amount:[""],new_amount:[""],description:[""],note:[""]})}ngOnInit(){return Object(u.a)(this,void 0,void 0,(function*(){yield this.SetupData()}))}ngOnChanges(){return Object(u.a)(this,void 0,void 0,(function*(){}))}SetupData(){return Object(u.a)(this,void 0,void 0,(function*(){const e={order_id:parseInt(this.route.snapshot.params.id)},t=(yield this.OrderService.searchOrders(e))[0];this.OrderService.setDetailOrder(t),t.order_details.forEach(e=>{this.total_quantity+=e.quantity});const n=(new Date).getTime(),o=new Date(this.OrderQuery.getValue().detail_order.return_date).getTime(),i=new Date(this.OrderQuery.getValue().detail_order.appointment_date).getTime();!o&&n<=i&&(this.borrow_status="\u0110ang m\u01b0\u1ee3n"),o&&o<=i&&(this.borrow_status="Ho\xe0n th\xe0nh"),!o&&n>i&&(this.borrow_status="\u0110ang tr\u1ec5"),o&&o>i&&(this.borrow_status="Tr\u1ea3 tr\u1ec5")}))}onClickUpdateBtn(){return Object(u.a)(this,void 0,void 0,(function*(){if(this.isEditing){let e=this.updateOrderForm.value;yield this.OrderService.UpdateOrder(e)}else this.toggleEdit(),this.setupDataForm()}))}goBack(){this.isEditing?this.toggleEdit():this.router.navigateByUrl("admin/order-management/order-list")}toggleEdit(){this.isEditing=!this.isEditing}onOpenDeleteModal(){const e=this.modalController.create({component:so,componentProps:{order:this.OrderQuery.getValue().detail_order}});e.show().then(),e.onDismiss().then(e=>{if(e)try{this.OrderService.DeleteOrderById(e.order_id),this.router.navigateByUrl("admin/order-management/order-list"),toastr.success("B\u1ea1n \u0111\xe3 h\u1ee7y phi\u1ebfu m\u01b0\u1ee3n s\xe1ch th\xe0nh c\xf4ng")}catch(t){toastr.error("B\u1ea1n \u0111\xe3 h\u1ee7y phi\u1ebfu m\u01b0\u1ee3n s\xe1ch kh\xf4ng th\xe0nh th\xf4ng",t.msg||t.message)}})}setupDataForm(){let e=this.OrderQuery.getValue().detail_order;this.updateOrderForm.patchValue({order_id:null==e?void 0:e.order_id,order_name:null==e?void 0:e.order_name,author:null==e?void 0:e.author,supplier:null==e?void 0:e.supplier,category:null==e?void 0:e.category,page_number:null==e?void 0:e.page_number,cost_price:null==e?void 0:e.cost_price,retail_price:null==e?void 0:e.retail_price,discount:null==e?void 0:e.discount,description:null==e?void 0:e.description,old_amount:null==e?void 0:e.old_amount,new_amount:null==e?void 0:e.new_amount,note:null==e?void 0:e.note})}UpdateOrder(){return Object(u.a)(this,void 0,void 0,(function*(){let e=this.updateOrderForm.value,t=Object.assign(Object.assign({},e),{category_id:e.category.category_id,supplier_id:e.supplier.supplier_id,author_id:e.author.author_id});try{let e=yield this.OrderService.UpdateOrder(t);this.OrderStore.update({detail_order:e}),toastr.success("C\u1eadp nh\u1eadt s\xe1ch th\xe0nh c\xf4ng."),this.router.navigateByUrl("admin/order-management/order-list")}catch(n){toastr.error("C\u1eadp nh\u1eadt s\xe1ch th\u1ea5t b\u1ea1i.",n.msg||n.message)}}))}get author(){return this.OrderQuery.getValue().detail_order.author}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(l.a),r.Qb(eo.a),r.Qb(o.g),r.Qb(D.d),r.Qb(r.h),r.Qb(o.a),r.Qb(P.a),r.Qb(to.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-order-detail"]],features:[r.Bb],decls:120,vars:69,consts:[[1,"d-flex","justify-content-center","align-items-center","text-app","font-weight-bold"],[1,"font-weight-bold"],[1,"d-flex","flex-row","p-5","mb-4"],[1,"avatar","col-3","mb-4"],[1,"d-flex","flex-column"],[1,"image-wrapper"],["alt","Avatar",2,"height","100%","width","66%","object-fit","cover",3,"src"],[1,"text-app","text-left","font-weight-bold","text-center","my-4"],[1,"text-app","text-left","font-weight-bold","text-center"],[1,"col-9","d-flex","flex-column"],[1,"row","py-3"],[1,"col-2","text-center","font-weight-bold"],[1,"col-9","text-app","font-weight-bold"],[1,"col-9"],[1,"col-9","font-weight-bold",3,"ngClass"],[1,"col-2","app-flex"],[1,"btn","btn-outline-app",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-left","pr-1"],[1,"col-9","d-flex","flex-row","justify-content-end"],["class","btn-danger  align-self-center mr-2",3,"click",4,"ngIf"],[1,"container-fluid"],[1,"font-weight-bold","text-center","text-app","mb-2","mt-4"],[1,"table-header","row","font-weight-bold","text-uppercase","ng-star-inserted","align-items-center","my-5"],[1,"col","text-center","text-app",2,"max-width","200px"],[1,"col","text-center","text-app"],[1,"col","text-center","text-app",2,"max-width","150px"],["class","item-row pl-0",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end","mr-5"],[1,"btn-danger","align-self-center","mr-2",3,"click"],[1,"fas","fa-trash-alt","trash-icon"],[1,"ml-1",2,"width","70px"],[1,"item-row","pl-0"],[1,"row"],[1,"col","text-center",2,"max-width","200px"],[1,"col","text-center","text-app","font-weight-bold",2,"max-width","200px"],[1,"col","text-center"],[1,"col","text-center",2,"max-width","150px"],[1,"col","text-center","text-app","font-weight-bold"]],template:function(e,t){if(1&e&&(r.Ub(0),r.Wb(1,"div",0),r.Wb(2,"h1",1),r.Ec(3,"Th\xf4ng tin chi ti\u1ebft h\xf3a \u0111\u01a1n "),r.Wb(4,"span"),r.Ec(5),r.jc(6,"async"),r.Vb(),r.Vb(),r.Vb(),r.Ub(7),r.Wb(8,"div",2),r.Wb(9,"div",3),r.Wb(10,"div",4),r.Wb(11,"div",5),r.Rb(12,"img",6),r.jc(13,"async"),r.Vb(),r.Wb(14,"h1",7),r.Ec(15),r.jc(16,"standardizedId"),r.jc(17,"async"),r.Vb(),r.Wb(18,"h2",8),r.Ec(19),r.jc(20,"vnd"),r.jc(21,"async"),r.Vb(),r.Vb(),r.Vb(),r.Wb(22,"div",9),r.Wb(23,"div",4),r.Wb(24,"div",10),r.Wb(25,"div",11),r.Wb(26,"b"),r.Ec(27,"M\xe3 h\xf3a \u0111\u01a1n: "),r.Vb(),r.Vb(),r.Wb(28,"div",12),r.Ec(29),r.jc(30,"standardizedId"),r.jc(31,"async"),r.Vb(),r.Vb(),r.Wb(32,"div",10),r.Wb(33,"div",11),r.Wb(34,"b"),r.Ec(35,"Kh\xe1ch h\xe0ng: "),r.Vb(),r.Vb(),r.Wb(36,"div",12),r.Ec(37),r.jc(38,"standardizedId"),r.jc(39,"async"),r.jc(40,"async"),r.jc(41,"async"),r.Vb(),r.Vb(),r.Wb(42,"div",10),r.Wb(43,"div",11),r.Wb(44,"b"),r.Ec(45,"Nh\xe2n vi\xean: "),r.Vb(),r.Vb(),r.Wb(46,"div",12),r.Ec(47),r.jc(48,"standardizedId"),r.jc(49,"async"),r.jc(50,"async"),r.jc(51,"async"),r.Vb(),r.Vb(),r.Wb(52,"div",10),r.Wb(53,"div",11),r.Wb(54,"b"),r.Ec(55,"Ng\xe0y mua: "),r.Vb(),r.Vb(),r.Wb(56,"div",13),r.Ec(57),r.jc(58,"date"),r.jc(59,"async"),r.Vb(),r.Vb(),r.Wb(60,"div",10),r.Wb(61,"div",11),r.Wb(62,"b"),r.Ec(63,"Lo\u1ea1i: "),r.Vb(),r.Vb(),r.Wb(64,"div",13),r.Ec(65),r.jc(66,"async"),r.Vb(),r.Vb(),r.Wb(67,"div",10),r.Wb(68,"div",11),r.Wb(69,"b"),r.Ec(70,"T\u1ed5ng s\u1ed1 l\u01b0\u1ee3ng: "),r.Vb(),r.Vb(),r.Wb(71,"div",13),r.Ec(72),r.Vb(),r.Vb(),r.Wb(73,"div",10),r.Wb(74,"div",11),r.Wb(75,"b"),r.Ec(76,"Tr\u1ea1ng th\xe1i: "),r.Vb(),r.Vb(),r.Wb(77,"div",14),r.jc(78,"async"),r.jc(79,"async"),r.Ec(80),r.jc(81,"async"),r.Vb(),r.Vb(),r.Wb(82,"div",10),r.Wb(83,"div",11),r.Wb(84,"b"),r.Ec(85,"Ghi ch\xfa: "),r.Vb(),r.Vb(),r.Wb(86,"div",13),r.Ec(87),r.jc(88,"async"),r.Vb(),r.Vb(),r.Vb(),r.Wb(89,"div",4),r.Wb(90,"div",10),r.Wb(91,"div",15),r.Wb(92,"div",16),r.ec("click",(function(){return t.goBack()})),r.Rb(93,"i",17),r.Ec(94," Quay l\u1ea1i"),r.Vb(),r.Vb(),r.Ub(95),r.Wb(96,"div",18),r.Cc(97,uo,4,0,"div",19),r.jc(98,"async"),r.Vb(),r.Tb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Tb(),r.Ub(99,20),r.Wb(100,"h1",21),r.Ec(101,"Danh s\xe1ch s\xe1ch m\u01b0\u1ee3n"),r.Vb(),r.Wb(102,"div",22),r.Wb(103,"div",23),r.Ec(104,"STT"),r.Vb(),r.Wb(105,"div",23),r.Ec(106,"M\xe3 s\xe1ch"),r.Vb(),r.Wb(107,"div",24),r.Ec(108,"T\xean s\xe1ch"),r.Vb(),r.Wb(109,"div",25),r.Ec(110,"S\u1ed1 l\u01b0\u1ee3ng"),r.Vb(),r.Wb(111,"div",24),r.Ec(112,"\u0110\u01a1n gi\xe1"),r.Vb(),r.Wb(113,"div",24),r.Ec(114,"Gi\u1ea3m gi\xe1"),r.Vb(),r.Wb(115,"div",24),r.Ec(116,"Th\xe0nh ti\u1ec1n"),r.Vb(),r.Vb(),r.Cc(117,po,20,16,"div",26),r.jc(118,"async"),r.Rb(119,"div",27),r.Tb(),r.Tb()),2&e){var n,o;const e=(null==(o=r.kc(13,17,t.detail_order$))||null==o.customer?null:o.customer.image)||"assets/images/default-avatar.png";var i,c,a,l,b,s=null,d=null,u=null;const f=r.rc(66,ho,null==(u=r.kc(78,54,t.detail_order$))?null:u.delete_at,!(null!=(u=r.kc(79,56,t.detail_order$))&&u.delete_at));var p,h,m;const v=!(null!=(m=r.kc(98,62,t.detail_order$))&&m.delete_at);var g;const _=null==(g=r.kc(118,64,t.detail_order$))?null:g.order_details;r.Db(5),r.Fc(null==(n=r.kc(6,15,t.detail_order$))?null:n.order_id),r.Db(7),r.oc("src",e,r.xc),r.Db(3),r.Gc("M\xe3 h\xf3a \u0111\u01a1n: ",r.kc(16,19,null==(i=r.kc(17,21,t.detail_order$))?null:i.order_id),""),r.Db(4),r.Gc("T\u1ed5ng ti\u1ec1n: ",r.kc(20,23,null==(c=r.kc(21,25,t.detail_order$))?null:c.total),""),r.Db(10),r.Fc(r.kc(30,27,null==(a=r.kc(31,29,t.detail_order$))?null:a.order_id)||"-"),r.Db(8),r.Fc(r.kc(38,31,null==(s=r.kc(39,33,t.detail_order$))||null==s.customer?null:s.customer.customer_id)+" - "+((null==(s=r.kc(40,35,t.detail_order$))||null==s.customer?null:s.customer.last_name)||" ")+" "+(null==(s=r.kc(41,37,t.detail_order$))||null==s.customer?null:s.customer.first_name)||"-"),r.Db(10),r.Fc(r.kc(48,39,null==(d=r.kc(49,41,t.detail_order$))||null==d.employee?null:d.employee.employee_id)+" - "+(null==(d=r.kc(50,43,t.detail_order$))||null==d.employee?null:d.employee.last_name)+" "+(null==(d=r.kc(51,45,t.detail_order$))||null==d.employee?null:d.employee.first_name)||"-"),r.Db(10),r.Fc(r.lc(58,47,null==(l=r.kc(59,50,t.detail_order$))?null:l.create_at,"dd/MM/yyyy")||"-"),r.Db(8),r.Fc("in"==(null==(b=r.kc(66,52,t.detail_order$))?null:b.type)?"Nh\u1eadp":"Xu\u1ea5t"),r.Db(7),r.Fc(t.total_quantity||"-"),r.Db(5),r.oc("ngClass",f),r.Db(3),r.Gc("",(null!=(p=r.kc(81,58,t.detail_order$))&&p.delete_at?"\u0110\xe3 h\u1ee7y":"Ho\xe0n th\xe0nh")||"-"," "),r.Db(7),r.Fc((null==(h=r.kc(88,60,t.detail_order$))?null:h.note)||"-"),r.Db(10),r.oc("ngIf",v),r.Db(20),r.oc("ngForOf",_)}},directives:[c.k,c.m,c.l],pipes:[c.b,g.b,g.a,c.e],styles:[".item-row[_ngcontent-%COMP%]{display:flex;transition:.5s;padding-left:36px;height:100px;align-self:center!important;flex-direction:column;justify-content:center;box-shadow:3px 3px 8px 3px rgba(122,159,216,.2);margin-bottom:20px}.item-row[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{position:relative;display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;overflow:hidden;line-height:22px}.image-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),e})();var go=n("8CWC"),fo=n("ZHJm"),vo=n("iNhY");const _o=["mes"];function Vo(e,t){1&e&&(r.Wb(0,"span",43),r.Rb(1,"i",44),r.Vb())}function Wo(e,t){if(1&e){const e=r.Xb();r.Ub(0),r.Wb(1,"div",38),r.ec("click",(function(){r.vc(e);const n=t.$implicit;return r.ic().SetActiveConversation(n)})),r.jc(2,"async"),r.Wb(3,"div",20),r.Rb(4,"img",21),r.Vb(),r.Wb(5,"div",39),r.Wb(6,"h3",22),r.Ec(7),r.Vb(),r.Wb(8,"p",40),r.Ec(9),r.jc(10,"date"),r.Vb(),r.Wb(11,"span",41),r.Ec(12),r.Vb(),r.Vb(),r.Cc(13,Vo,2,0,"span",42),r.Vb(),r.Tb()}if(2&e){const e=t.$implicit,n=r.ic();r.Db(1),r.Gb("active",r.kc(2,13,n.active_conversation$)==e),r.Db(3),r.oc("src","assets/images/default-avatar.png",r.xc),r.Db(2),r.Gb("font-weight-bold",!e.is_read),r.Db(1),r.Fc(null==e||null==e.account?null:e.account.account_name),r.Db(1),r.Gb("font-weight-bold",!e.is_read),r.Db(1),r.Fc(r.lc(10,15,null==e?null:e.updated_at,"hh:mm dd/MM/yyyy")),r.Db(2),r.Gb("is_not_read",!e.is_read),r.Db(1),r.Gc(" ",null==e?null:e.last_message," "),r.Db(1),r.oc("ngIf",!e.is_read)}}function yo(e,t){1&e&&r.Rb(0,"i",49)}function ko(e,t){if(1&e){const e=r.Xb();r.Wb(0,"div",47),r.ec("click",(function(){r.vc(e);const t=r.ic(2);return t.LoadMoreMessages(t.active_conversation)})),r.Cc(1,yo,1,0,"i",48),r.Ec(2," Nh\u1ea5p v\xe0o \u0111\u1ec3 \u0111\u1ecdc th\xeam tin nh\u1eafn "),r.Vb()}if(2&e){const e=r.ic(2);r.Db(1),r.oc("ngIf",e.is_loading)}}function xo(e,t){if(1&e&&(r.Wb(0,"div",50),r.Wb(1,"div",51),r.jc(2,"date"),r.Ec(3),r.Vb(),r.Vb()),2&e){const e=t.$implicit;r.Gb("flex-row-reverse","reply"==e.type)("flex-row","send"==e.type),r.Db(1),r.Gb("reply-content-message","reply"==e.type)("send-content-message","send"==e.type),r.oc("title",r.lc(2,10,e.created_at,"hh/mm dd/MM/yyyy")),r.Db(2),r.Gc(" ",e.content," ")}}function wo(e,t){if(1&e&&(r.Ub(0),r.Cc(1,ko,3,1,"div",45),r.jc(2,"async"),r.Cc(3,xo,4,13,"div",46),r.jc(4,"async"),r.Tb()),2&e){const e=r.ic();var n;const t=(null==(n=r.kc(2,2,e.active_conversation$))?null:n.current_page)>1;var o;const i=null==(o=r.kc(4,4,e.active_conversation$))?null:o.messages;r.Db(1),r.oc("ngIf",t),r.Db(2),r.oc("ngForOf",i)}}function Co(e,t){1&e&&(r.Wb(0,"p",52),r.Ec(1," B\u1ea1n ch\u01b0a c\xf3 tin nh\u1eafn n\xe0o! "),r.Vb())}let Eo=(()=>{class e{constructor(e,t,n,o){this.messageService=e,this.messageQuery=t,this.accountQuery=n,this.webSocketService=o,this.chatText="",this.is_loading=!1,this.all_conversations$=this.messageQuery.all_conversations$,this.active_conversation$=this.messageQuery.active_conversation$}ngOnInit(){return Object(u.a)(this,void 0,void 0,(function*(){yield this.FetchConversations().then(e=>{this.webSocketService.emit("join",{auth_info:JSON.parse(localStorage.getItem("auth_info")),room:this.messageQuery.getValue().active_conversation.conversation_id})}),this.listen_message$=this.webSocketService.listen("message").subscribe(e=>Object(u.a)(this,void 0,void 0,(function*(){yield this.ListenMessage(e)})))}))}ngOnDestroy(){this.listen_message$.unsubscribe()}FetchConversations(){return Object(u.a)(this,void 0,void 0,(function*(){yield this.messageService.GetAllConversations().then(e=>Object(u.a)(this,void 0,void 0,(function*(){this.messageService.SetActiveConversation(this.messageQuery.getValue().all_conversations[0]),yield this.messageService.GetMoreMessageAndPushIntoStoreAdmin({page:0,per_page:10,conversation_id:this.messageQuery.getValue().active_conversation.conversation_id})})))}))}SendMessage(){var e,t;return Object(u.a)(this,void 0,void 0,(function*(){if(!this.chatText)return;const n={conversation_id:null===(e=this.messageQuery.getValue().active_conversation)||void 0===e?void 0:e.conversation_id,account_id:this.accountQuery.getValue().auth_info.account.account_id,content:this.chatText,room:null===(t=this.messageQuery.getValue().active_conversation)||void 0===t?void 0:t.conversation_id};this.webSocketService.emit("incoming-msg",n),this.chatText=""}))}ListenMessage(e){return Object(u.a)(this,void 0,void 0,(function*(){if(e){let t=e.account_id,n=this.messageQuery.getValue().active_conversation.account.account_id;e.type=t==n?"reply":"send";let o=this.messageQuery.getValue().all_conversations,i=o.find(t=>e.conversation_id==t.conversation_id);if(i){i.updated_at=e.created_at,i.messages.push(e),i.last_message=e.content,i.conversation_id!=this.messageQuery.getValue().active_conversation.conversation_id?i.is_read=e.is_read:yield this.messageService.ReadConversation(i.conversation_id);const t=Object.assign({},i);let n=o.findIndex(e=>i.conversation_id==e.conversation_id);o.splice(n,1),o.unshift(t)}this.messageService.UpdateAllConversations(o),this.MessageScrollToBottom()}}))}MessageScrollToBottom(){this.message&&(this.message.nativeElement.scrollTop=this.message.nativeElement.scrollHeight)}SetActiveConversation(e){return Object(u.a)(this,void 0,void 0,(function*(){this.webSocketService.emit("join",{auth_info:JSON.parse(localStorage.getItem("auth_info")),room:e.conversation_id}),this.messageService.SetActiveConversation(e),e.is_read||(yield this.messageService.ReadConversation(e.conversation_id)),this.messageQuery.getValue().active_conversation.messages&&this.messageQuery.getValue().active_conversation.messages.length||(yield this.messageService.GetMoreMessageAndPushIntoStoreAdmin({page:0,per_page:10,conversation_id:this.messageQuery.getValue().active_conversation.conversation_id}))}))}get active_conversation(){return this.messageQuery.getValue().active_conversation}LoadMoreMessages(e){return Object(u.a)(this,void 0,void 0,(function*(){this.is_loading=!0;try{const t={page:e.current_page-1,per_page:10,conversation_id:e.conversation_id};yield this.messageService.GetMoreMessageAndPushIntoStoreAdmin(t)}catch(t){toastr.error("T\u1ea3i tin nh\u1eafn th\u1ea5t b\u1ea1i!",t.msg||t.message),this.is_loading=!1}this.is_loading=!1}))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(go.a),r.Qb(fo.a),r.Qb(K.a),r.Qb(vo.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-customer-messages"]],viewQuery:function(e,t){var n;1&e&&r.Kc(_o,!0),2&e&&r.sc(n=r.fc())&&(t.message=n.first)},decls:51,vars:14,consts:[[1,"d-flex","flex-row","h-100"],[1,"p-4","d-flex","h-100"],[1,"h-100","overflow-hidden"],[1,"setting-title","d-flex","flex-row","align-items-center",2,"max-height","65px"],[1,"app-flex","text-app"],[1,"fas","fa-4x","fa-comments",2,"height","70px","width","70px","background","transparent"],[2,"color","gray","margin-left","20px"],[1,"menu-list","py-3"],[1,"box","setting-box","mt-0","h-100"],[1,"setting-header","text-app","font-weight-bold","mb-2"],[1,"setting-body","p-2",2,"height","89%"],[1,"search-convertation-input","w-100"],[1,"fas","fa-search"],["placeholder","T\xecm ki\u1ebfm cu\u1ed9c tr\xf2 chuy\u1ec7n",1,"w-100","form-control"],[4,"ngFor","ngForOf"],[1,"p-4","d-flex","h-100","flex-grow-1"],[1,"h-100","overflow-hidden","w-100"],[1,"setting-title","d-flex","flex-row","align-items-center",2,"min-height","65px"],[1,"box","setting-box","mt-0","h-100","d-flex","flex-column",3,"click"],[1,"setting-header","text-app","font-weight-bold","mb-2","app-flex"],[1,"avatar-message-box"],["alt","",1,"w-100",3,"src"],[1,"mb-0","line-clamp"],[1,"icons","ml-auto","d-flex"],[1,"fas","fa-phone","text-app","mr-3","cursor-pointer"],[1,"fas","fa-video","text-app","mr-3","cursor-pointer"],[1,"fas","fa-info-circle","text-app","mr-3","cursor-pointer"],[1,"setting-body","py-0","h-100",2,"overflow-y","auto"],["mes",""],[4,"ngIf","ngIfElse"],["noMess",""],[1,"setting-footer","mt-auto"],[1,"icons","mr-auto","d-flex"],[1,"fas","fa-plus-circle","text-app","mr-3","cursor-pointer","fa-2x"],[1,"fas","fa-images","text-app","mr-3","cursor-pointer","fa-2x"],[1,"fas","fa-link","text-app","mr-3","cursor-pointer","fa-2x"],["placeholder","Nh\u1eadp tin nh\u1eafn","type","text",1,"form-control",2,"max-height","65px","overflow","auto","border-radius","15px",3,"ngModel","keyup.enter","ngModelChange"],[1,"ml-3","btn-app","d-inline-block","px-4","py-2","send-btn",3,"click"],[1,"message-box","w-100",3,"click"],[1,"overview-message-box"],[1,"mb-0","updated_at"],[1,"last-message"],["class","ml-auto mr-3",4,"ngIf"],[1,"ml-auto","mr-3"],[1,"fas","fa-circle","text-app"],["class","cursor-pointer text-center text-app",3,"click",4,"ngIf"],["class","message",3,"flex-row-reverse","flex-row",4,"ngFor","ngForOf"],[1,"cursor-pointer","text-center","text-app",3,"click"],["class","fa fa-circle-o-notch fa-spin","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"fa","fa-circle-o-notch","fa-spin"],[1,"message"],[3,"title"],[1,"d-flex","app-flex",2,"color","rgba(153, 153, 153, 1)"]],template:function(e,t){if(1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"div",2),r.Wb(3,"div",3),r.Wb(4,"div",4),r.Rb(5,"i",5),r.Vb(),r.Wb(6,"h2",6),r.Wb(7,"b"),r.Ec(8," Ch\u0103m s\xf3c kh\xe1ch h\xe0ng "),r.Vb(),r.Rb(9,"br"),r.Wb(10,"b"),r.Ec(11," \u0110\u1ea1i h\u1ecdc M\u1edf TPHCM "),r.Vb(),r.Vb(),r.Vb(),r.Wb(12,"div",7),r.Wb(13,"div",8),r.Wb(14,"h1",9),r.Ec(15,"Danh s\xe1ch tin nh\u1eafn"),r.Vb(),r.Wb(16,"div",10),r.Wb(17,"div",11),r.Rb(18,"i",12),r.Rb(19,"input",13),r.Vb(),r.Cc(20,Wo,14,18,"ng-container",14),r.jc(21,"async"),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(22,"div",15),r.Wb(23,"div",16),r.Rb(24,"div",17),r.Wb(25,"div",7),r.Wb(26,"div",18),r.ec("click",(function(){return t.SetActiveConversation(t.active_conversation)})),r.Wb(27,"h1",19),r.Wb(28,"div",20),r.Rb(29,"img",21),r.Vb(),r.Wb(30,"h3",22),r.Ec(31),r.jc(32,"async"),r.Vb(),r.Wb(33,"div",23),r.Rb(34,"i",24),r.Rb(35,"i",25),r.Rb(36,"i",26),r.Vb(),r.Vb(),r.Wb(37,"div",27,28),r.Cc(39,wo,5,6,"ng-container",29),r.jc(40,"async"),r.Cc(41,Co,2,0,"ng-template",null,30,r.Dc),r.Vb(),r.Wb(43,"div",31),r.Wb(44,"div",32),r.Rb(45,"i",33),r.Rb(46,"i",34),r.Rb(47,"i",35),r.Vb(),r.Wb(48,"input",36),r.ec("keyup.enter",(function(){return t.SendMessage()}))("ngModelChange",(function(e){return t.chatText=e})),r.Vb(),r.Wb(49,"div",37),r.ec("click",(function(){return t.SendMessage()})),r.Ec(50,"G\u1eedi "),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb()),2&e){const e=r.tc(42);var n,o;const i=(null==(o=r.kc(40,12,t.active_conversation$))||null==o.messages?null:o.messages.length)>0;r.Db(20),r.oc("ngForOf",r.kc(21,8,t.all_conversations$)),r.Db(9),r.oc("src","assets/images/default-avatar.png",r.xc),r.Db(1),r.Gb("font-weight-bold",!0),r.Db(1),r.Fc(null==(n=r.kc(32,10,t.active_conversation$))||null==n.account?null:n.account.account_name),r.Db(8),r.oc("ngIf",i)("ngIfElse",e),r.Db(9),r.oc("ngModel",t.chatText)}},directives:[c.l,c.m,D.c,D.m,D.p],pipes:[c.b,c.e],styles:[".setting-body[_ngcontent-%COMP%]{overflow-y:auto}.message-box[_ngcontent-%COMP%]{cursor:pointer;padding:.5rem;margin-bottom:1rem;display:flex;flex-direction:row;align-items:center;border-radius:15px}.message-box.active[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.05)}.message-box[_ngcontent-%COMP%]   .last-message[_ngcontent-%COMP%], .message-box[_ngcontent-%COMP%]   .updated_at[_ngcontent-%COMP%]{color:#999}.message-box[_ngcontent-%COMP%]   .last-message[_ngcontent-%COMP%]{width:100%;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden}.message-box[_ngcontent-%COMP%]   .last-message.is_not_read[_ngcontent-%COMP%]{font-weight:700;color:#000}.avatar-message-box[_ngcontent-%COMP%]{border-radius:50px;height:50px;width:50px;margin-right:1rem}.avatar-message-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}.menu-list[_ngcontent-%COMP%]{height:calc(100% - 60px)}.search-convertation-input[_ngcontent-%COMP%]{margin-bottom:1rem;position:relative}.search-convertation-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:15px;padding-left:25px}.search-convertation-input[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .search-convertation-input[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:8px;min-width:40px;position:absolute}.send-btn[_ngcontent-%COMP%]{width:10%}.send-content-message[_ngcontent-%COMP%]{background-color:var(--app-color);color:#fff}.reply-content-message[_ngcontent-%COMP%], .send-content-message[_ngcontent-%COMP%]{width:auto;text-align:left;max-width:80%;padding:6px 10px;border-bottom-left-radius:24px;border-top-left-radius:24px;border-top-right-radius:24px;border-bottom-right-radius:24px}.reply-content-message[_ngcontent-%COMP%]{background-color:#d3d3d3;color:#000}.message[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;flex-direction:row-reverse;margin-top:3px}"]}),e})(),Oo=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["app-employee-messages"]],decls:2,vars:0,template:function(e,t){1&e&&(r.Wb(0,"p"),r.Ec(1," employee-messages works!\n"),r.Vb())},styles:[""]}),e})();function Mo(e,t){if(1&e&&(r.Ub(0),r.Wb(1,"a",4),r.Ec(2),r.Vb(),r.Tb()),2&e){const e=t.$implicit;r.Db(1),r.oc("routerLink",e.url),r.Db(1),r.Fc(e.itemName)}}let Do=(()=>{class e{constructor(e){this.orderService=e,this.headerItems=[{itemName:"Th\u01b0 qu\xe1n",url:"sell-dashboard"}]}ngOnInit(){return Object(u.a)(this,void 0,void 0,(function*(){yield this.orderService.statistic()}))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(eo.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-dashboard"]],decls:6,vars:1,consts:[[1,"p-0","pl-2","header-admin","d-flex","align-items-center"],[1,"page-title","font-weight-bold","pl-4","mr-5"],[4,"ngFor","ngForOf"],[1,"page-content-admin","p-4"],["routerLinkActive","active",1,"header-item",3,"routerLink"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Ec(2," T\u1ed5ng quan "),r.Vb(),r.Cc(3,Mo,3,2,"ng-container",2),r.Vb(),r.Wb(4,"div",3),r.Rb(5,"router-outlet"),r.Vb()),2&e&&(r.Db(3),r.oc("ngForOf",t.headerItems))},directives:[c.l,o.l,o.j,o.i],styles:[""]}),e})();const jo=["content"];function Po(e,t){1&e&&r.Sb(0)}let To=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["app-dashboard-box"]],contentQueries:function(e,t,n){var o;1&e&&r.zc(n,jo,!0),2&e&&r.sc(o=r.fc())&&(t.content=o.first)},inputs:{title:"title"},decls:5,vars:2,consts:[[1,"box"],[1,"header-box","text-app"],[1,"content-box"],[4,"ngTemplateOutlet"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Ec(2),r.Vb(),r.Wb(3,"div",2),r.Cc(4,Po,1,0,"ng-container",3),r.Vb(),r.Vb()),2&e&&(r.Db(2),r.Gc(" ",t.title," "),r.Db(2),r.oc("ngTemplateOutlet",t.content))},directives:[c.r],styles:[".box[_ngcontent-%COMP%]{box-shadow:0 0 8px 0 rgba(0,0,0,.15);border-radius:5px;text-align:center}.box[_ngcontent-%COMP%]   .header-box[_ngcontent-%COMP%]{padding:1rem;text-align:center;font-weight:500;border-bottom:1px solid #ced1d5!important}.box[_ngcontent-%COMP%]   .content-box[_ngcontent-%COMP%]{padding:1rem;min-height:6rem}"]}),e})();function So(e,t){if(1&e&&(r.Wb(0,"div",13),r.Wb(1,"div",14),r.Wb(2,"div",15),r.Ec(3,"Trong ng\xe0y"),r.Vb(),r.Wb(4,"strong",16),r.Ec(5),r.Vb(),r.Vb(),r.Wb(6,"div",17),r.Wb(7,"div",15),r.Ec(8,"Trong th\xe1ng"),r.Vb(),r.Wb(9,"strong",16),r.Ec(10),r.Vb(),r.Vb(),r.Vb()),2&e){const e=r.ic();r.Db(5),r.Fc(null==e.dashboard||null==e.dashboard.today_order_count?null:e.dashboard.today_order_count.value),r.Db(5),r.Fc(null==e.dashboard||null==e.dashboard.month_order_count?null:e.dashboard.month_order_count.value)}}function Fo(e,t){if(1&e&&(r.Wb(0,"div",13),r.Wb(1,"div",14),r.Wb(2,"div",15),r.Ec(3,"Trong ng\xe0y"),r.Vb(),r.Wb(4,"strong",16),r.Ec(5),r.jc(6,"vnd"),r.Vb(),r.Vb(),r.Wb(7,"div",17),r.Wb(8,"div",15),r.Ec(9,"Trong th\xe1ng"),r.Vb(),r.Wb(10,"strong",16),r.Ec(11),r.jc(12,"vnd"),r.Vb(),r.Vb(),r.Vb()),2&e){const e=r.ic();r.Db(5),r.Fc(r.kc(6,2,null==e.dashboard||null==e.dashboard.revenue_today?null:e.dashboard.revenue_today.value)),r.Db(6),r.Fc(r.kc(12,4,null==e.dashboard||null==e.dashboard.month_total_revenue?null:e.dashboard.month_total_revenue.value))}}function Qo(e,t){if(1&e&&(r.Wb(0,"strong",21),r.Rb(1,"i",22),r.Ec(2),r.Vb()),2&e){const e=r.ic(2);r.Db(2),r.Gc(" ",(100*(null==e.dashboard||null==e.dashboard.grow_percentage_to_prev_day?null:e.dashboard.grow_percentage_to_prev_day.value)).toFixed(2),"% ")}}function No(e,t){if(1&e&&(r.Wb(0,"strong",23),r.Rb(1,"i",24),r.Ec(2),r.Vb()),2&e){const e=r.ic(2);r.Db(2),r.Gc(" ",(100*(null==e.dashboard||null==e.dashboard.grow_percentage_to_prev_day?null:e.dashboard.grow_percentage_to_prev_day.value)).toFixed(2),"% ")}}const Ro=function(e,t){return{"text-success":e,"text-danger":t}};function $o(e,t){if(1&e&&(r.Wb(0,"div",13),r.Wb(1,"div",14),r.Wb(2,"div",15),r.Ec(3,"T\u1ec9 l\u1ec7 doanh thu"),r.Vb(),r.Wb(4,"strong",18),r.Ec(5),r.Vb(),r.Vb(),r.Wb(6,"div",17),r.Wb(7,"div",15),r.Ec(8,"T\u1ed1c \u0111\u1ed9 t\u0103ng tr\u01b0\u1eddng"),r.Vb(),r.Cc(9,Qo,3,1,"strong",19),r.Cc(10,No,3,1,"strong",20),r.Vb(),r.Vb()),2&e){const e=r.ic();r.Db(4),r.oc("ngClass",r.rc(4,Ro,(null==e.dashboard||null==e.dashboard.percentage_today_revenue_to_prev_day?null:e.dashboard.percentage_today_revenue_to_prev_day.value)>=1,(null==e.dashboard||null==e.dashboard.percentage_today_revenue_to_prev_day?null:e.dashboard.percentage_today_revenue_to_prev_day.value)<1)),r.Db(1),r.Gc(" ",(100*(null==e.dashboard||null==e.dashboard.percentage_today_revenue_to_prev_day?null:e.dashboard.percentage_today_revenue_to_prev_day.value)).toFixed(2),"% "),r.Db(4),r.oc("ngIf",(null==e.dashboard||null==e.dashboard.grow_percentage_to_prev_day?null:e.dashboard.grow_percentage_to_prev_day.value)>=0),r.Db(1),r.oc("ngIf",(null==e.dashboard||null==e.dashboard.grow_percentage_to_prev_day?null:e.dashboard.grow_percentage_to_prev_day.value)<0)}}function Io(e,t){if(1&e&&(r.Wb(0,"strong",21),r.Rb(1,"i",27),r.Ec(2),r.Vb()),2&e){const e=r.ic(2);r.Db(2),r.Gc(" ",(100*(null==e.dashboard||null==e.dashboard.grow_percentage_to_prev_month?null:e.dashboard.grow_percentage_to_prev_month.value)).toFixed(2),"% ")}}function Bo(e,t){if(1&e&&(r.Wb(0,"strong",28),r.Rb(1,"i",29),r.Ec(2),r.Vb()),2&e){const e=r.ic(2);r.Db(2),r.Gc(" ",(100*(null==e.dashboard||null==e.dashboard.grow_percentage_to_prev_month?null:e.dashboard.grow_percentage_to_prev_month.value)).toFixed(2),"% ")}}function Ao(e,t){if(1&e&&(r.Wb(0,"div",13),r.Wb(1,"div",14),r.Wb(2,"div",25),r.Ec(3,"T\u1ec9 l\u1ec7 doanh thu"),r.Vb(),r.Wb(4,"strong",18),r.Ec(5),r.Vb(),r.Vb(),r.Wb(6,"div",17),r.Wb(7,"div",15),r.Ec(8,"T\u1ed1c \u0111\u1ed9 t\u0103ng tr\u01b0\u1eddng"),r.Vb(),r.Cc(9,Io,3,1,"strong",19),r.Cc(10,Bo,3,1,"strong",26),r.Vb(),r.Vb()),2&e){const e=r.ic();r.Db(4),r.oc("ngClass",r.rc(4,Ro,(null==e.dashboard||null==e.dashboard.percentage_month_revenue_to_prev_month?null:e.dashboard.percentage_month_revenue_to_prev_month.value)>=1,(null==e.dashboard||null==e.dashboard.percentage_month_revenue_to_prev_month?null:e.dashboard.percentage_month_revenue_to_prev_month.value)<1)),r.Db(1),r.Gc("",(100*(null==e.dashboard||null==e.dashboard.percentage_month_revenue_to_prev_month?null:e.dashboard.percentage_month_revenue_to_prev_month.value)).toFixed(2),"%"),r.Db(4),r.oc("ngIf",(null==e.dashboard||null==e.dashboard.grow_percentage_to_prev_month?null:e.dashboard.grow_percentage_to_prev_month.value)>=0),r.Db(1),r.oc("ngIf",(null==e.dashboard||null==e.dashboard.grow_percentage_to_prev_month?null:e.dashboard.grow_percentage_to_prev_month.value)<0)}}function Go(e,t){if(1&e&&(r.Wb(0,"div",33),r.Wb(1,"div",34),r.Ec(2),r.Vb(),r.Wb(3,"div",35),r.Ec(4),r.Vb(),r.Wb(5,"div",35),r.Ec(6),r.jc(7,"vnd"),r.Vb(),r.Vb()),2&e){const e=t.$implicit,n=t.index;r.Db(2),r.Ic("",n+1,".",null==e||null==e.employee?null:e.employee.last_name," ",null==e||null==e.employee?null:e.employee.first_name," "),r.Db(2),r.Fc(null==e?null:e.order_amount),r.Db(2),r.Fc(r.kc(7,5,null==e?null:e.total_revenue))}}function Uo(e,t){if(1&e&&(r.Wb(0,"div",13),r.Wb(1,"div",30),r.Ec(2,"NH\xc2N VI\xcaN"),r.Vb(),r.Wb(3,"div",31),r.Ec(4,"S\u1ed0 \u0110\u01a0N H\xc0NG"),r.Vb(),r.Wb(5,"div",31),r.Ec(6,"DOANH THU"),r.Vb(),r.Vb(),r.Cc(7,Go,8,7,"div",32)),2&e){const e=r.ic();r.Db(7),r.oc("ngForOf",null==e.dashboard||null==e.dashboard.best_sellers_in_month?null:e.dashboard.best_sellers_in_month.value)}}function Lo(e,t){if(1&e&&(r.Wb(0,"div",33),r.Wb(1,"div",37),r.Ec(2),r.Rb(3,"img",38),r.Ec(4),r.Vb(),r.Wb(5,"div",35),r.Ec(6),r.Vb(),r.Vb()),2&e){const e=t.$implicit,n=t.index;r.Db(2),r.Gc("",n+1,". "),r.Db(1),r.oc("src",(null==e||null==e.book?null:e.book.image)||"assets/images/default-book.png",r.xc),r.Db(1),r.Gc(" ",null==e||null==e.book?null:e.book.book_name," "),r.Db(2),r.Fc(null==e?null:e.total_quantity)}}function zo(e,t){if(1&e&&(r.Wb(0,"div",13),r.Wb(1,"div",36),r.Ec(2,"S\u1ea2N PH\u1ea8M"),r.Vb(),r.Wb(3,"div",31),r.Ec(4,"S\u1ed0 L\u01af\u1ee2NG"),r.Vb(),r.Vb(),r.Cc(5,Lo,7,4,"div",32)),2&e){const e=r.ic();r.Db(5),r.oc("ngForOf",null==e.dashboard||null==e.dashboard.most_favorite_books?null:e.dashboard.most_favorite_books.value)}}let Xo=(()=>{class e{constructor(e,t){this.orderQuery=e,this.orderService=t}ngOnInit(){return Object(u.a)(this,void 0,void 0,(function*(){this.dashboard=yield this.orderService.statistic(),google.load("visualization","1",{packages:["corechart"]}),yield google.setOnLoadCallback(this.drawChart()),google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(this.drawChart2())}))}convertData(e){let t=[["Ng\xe0y","Doanh thu",{role:"style"}]];return e.forEach(e=>{let n=[],o=new Date(e.date);n.push(o.getDate()+"-"+(o.getMonth()+1)),n.push(e.revenue),n.push("stroke-width: 100"),t.push(n)}),t}convertData2(e){let t=[["Th\xe1ng","Doanh thu"]];return e.forEach(e=>{let n=[];n.push("Th\xe1ng "+e.month),n.push(e.revenue),t.push(n)}),t}drawChart2(){return Object(u.a)(this,void 0,void 0,(function*(){this.dashboard=yield this.orderService.statistic();let e=this.convertData2(this.dashboard.revenue_of_each_month_in_year.value);var t=google.visualization.arrayToDataTable(e);new google.visualization.LineChart(document.getElementById("curve_chart")).draw(t,{title:"Doanh thu theo th\xe1ng trong n\u0103m",curveType:"function",legend:{position:"bottom"}})}))}drawChart(){return Object(u.a)(this,void 0,void 0,(function*(){this.dashboard=yield this.orderService.statistic();let e=this.convertData(this.dashboard.revenues_each_day_in_month.value);var t=google.visualization.arrayToDataTable(e),n=new google.visualization.DataView(t);n.setColumns([0,1,{calc:"stringify",sourceColumn:1,type:"string",role:"annotation"},2]),new google.visualization.ColumnChart(document.getElementById("columnchart_values")).draw(n,{title:"Doanh thu trong th\xe1ng",bar:{groupWidth:"75%"},legend:{position:"none"}})}))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(l.a),r.Qb(eo.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-sell-dashboard"]],decls:38,vars:6,consts:[[1,"point-title"],[1,"fas","fa-circle","mr-3","text-app"],[1,"row"],[1,"col"],[3,"title"],["content",""],[1,"point-title","mt-4"],[1,"col-8"],["id","columnchart_values",1,"w-100","mb-5"],["id","curve_chart",1,"w-100","mt-5"],[1,"col-4"],[1,"col-12"],[1,"row","mt-3"],[1,"d-flex","flex-row","align-content-between"],[1,"col","text-left"],[1,"mb-2"],[1,"font-weight-bolder","text-break",2,"font-size","1.6rem"],[1,"col","text-right"],[1,"font-weight-bolder","text-break",2,"font-size","1.6rem",3,"ngClass"],["class","font-weight-bolder text-success text-break","style","font-size: 1.6rem",4,"ngIf"],["class","font-weight-bolder text-danger text-break","style","font-size: 1.6rem",4,"ngIf"],[1,"font-weight-bolder","text-success","text-break",2,"font-size","1.6rem"],["aria-hidden","true",1,"fa","fa-arrow-up","icon-compare"],[1,"font-weight-bolder","text-danger","text-break",2,"font-size","1.6rem"],["aria-hidden","true",1,"fa","fa-arrow-down","icon-compare"],[1,"mb-2","text-dark"],["class","font-weight-bolder text-danger","style","font-size: 1.6rem",4,"ngIf"],["aria-hidden","true",1,"fa","fa-arrow-up","icon-compare","text-break"],[1,"font-weight-bolder","text-danger",2,"font-size","1.6rem"],["aria-hidden","true",1,"fa","fa-arrow-down","icon-compare","text-break"],[1,"col-6","text-left","font-weight-bolder","opacity-50"],[1,"col-3","text-right","font-weight-bolder","opacity-50"],["class","d-flex flex-row align-content-between my-2",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","align-content-between","my-2"],[1,"col-6","text-left"],[1,"col-3","text-right","font-weight-bolder","text-break"],[1,"col-9","text-left","font-weight-bolder","opacity-50"],[1,"col-9","text-left"],["alt","",2,"width","30px","background-size","cover","height","40px",3,"src"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Rb(1,"i",1),r.Ec(2,"H\xf4m nay"),r.Vb(),r.Wb(3,"div",2),r.Wb(4,"div",3),r.Wb(5,"app-dashboard-box",4),r.Cc(6,So,11,2,"ng-template",null,5,r.Dc),r.Vb(),r.Vb(),r.Wb(8,"div",3),r.Wb(9,"app-dashboard-box",4),r.Cc(10,Fo,13,6,"ng-template",null,5,r.Dc),r.Vb(),r.Vb(),r.Wb(12,"div",3),r.Wb(13,"app-dashboard-box",4),r.Cc(14,$o,11,7,"ng-template",null,5,r.Dc),r.Vb(),r.Vb(),r.Wb(16,"div",3),r.Wb(17,"app-dashboard-box",4),r.Cc(18,Ao,11,7,"ng-template",null,5,r.Dc),r.Vb(),r.Vb(),r.Vb(),r.Wb(20,"div",6),r.Rb(21,"i",1),r.Ec(22,"Trong th\xe1ng n\xe0y"),r.Vb(),r.Wb(23,"div",2),r.Wb(24,"div",7),r.Rb(25,"div",8),r.Rb(26,"div",9),r.Vb(),r.Wb(27,"div",10),r.Wb(28,"div",2),r.Wb(29,"div",11),r.Wb(30,"app-dashboard-box",4),r.Cc(31,Uo,8,1,"ng-template",null,5,r.Dc),r.Vb(),r.Vb(),r.Vb(),r.Wb(33,"div",12),r.Wb(34,"div",11),r.Wb(35,"app-dashboard-box",4),r.Cc(36,zo,6,1,"ng-template",null,5,r.Dc),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Vb()),2&e&&(r.Db(5),r.oc("title","\u0110\u01a1n h\xe0ng"),r.Db(4),r.oc("title","Doanh thu"),r.Db(4),r.oc("title","So v\u1edbi h\xf4m qua"),r.Db(4),r.oc("title","So v\u1edbi th\xe1ng tr\u01b0\u1edbc"),r.Db(13),r.oc("title","Doanh s\u1ed1 b\xe1n h\xe0ng theo nh\xe2n vi\xean"),r.Db(5),r.oc("title","S\u1ea3n ph\u1ea9m b\xe1n ch\u1ea1y"))},directives:[To,c.k,c.m,c.l],pipes:[g.a],styles:[".point-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500;left:-1.5rem;padding:1rem 0 1rem 2rem;position:relative;width:120%;display:flex;flex-direction:row;align-items:center;margin-bottom:2.75rem;box-shadow:0 0 8px 0 rgba(0,0,0,.25)}.opacity-50[_ngcontent-%COMP%]{opacity:.5}.icon-compare[_ngcontent-%COMP%]{border-radius:50%;border:1px solid;padding:2px}app-dashboard-box[_ngcontent-%COMP%]  .box{height:100%}"]}),e})();var qo=n("bFe4");function Ko(e,t){if(1&e&&(r.Ub(0),r.Wb(1,"a",4),r.Ec(2),r.Vb(),r.Tb()),2&e){const e=t.$implicit;r.Db(1),r.oc("routerLink",e.url),r.Db(1),r.Fc(e.itemName)}}let Ho=(()=>{class e{constructor(e){this.router=e,this.headerItems=[{itemName:"Danh s\xe1ch ca l\xe0m",url:"schedule-list"},{itemName:"L\u1eadp l\u1ecbch",url:"create-schedule"}]}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(o.g))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-schedule-management"]],decls:6,vars:1,consts:[[1,"p-0","pl-2","header-admin","d-flex","align-items-center"],[1,"page-title","font-weight-bold","pl-4","mr-5"],[4,"ngFor","ngForOf"],[1,"page-content-admin","p-4"],["routerLinkActive","active",1,"header-item",3,"routerLink"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Ec(2," Qu\u1ea3n l\xfd ca l\xe0m "),r.Vb(),r.Cc(3,Ko,3,2,"ng-container",2),r.Vb(),r.Wb(4,"div",3),r.Rb(5,"router-outlet"),r.Vb()),2&e&&(r.Db(3),r.oc("ngForOf",t.headerItems))},directives:[c.l,o.l,o.j,o.i],styles:[""]}),e})();var Jo=n("wVAm");let Zo=(()=>{class e{constructor(e,t){this.modalAction=e,this.apiRoleService=t,this.role={role_name:"",note:""}}ngOnInit(){}dismissModal(){this.modalAction.dismiss(null)}CreateRole(){this.modalAction.dismiss(this.role)}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(p.a),r.Qb(Jo.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-create-role-modal"]],decls:24,vars:2,consts:[[1,"modal-header"],[1,"modal-title","big-font"],[1,"close",3,"click"],[1,"text-large"],[1,"modal-body"],[1,"row","py-3"],[1,"col-3","app-flex"],[1,"col-9"],["type","text","placeholder","Nh\u1eadp t\xean vai tr\xf2","name","role_name",1,"form-control",3,"ngModel","ngModelChange"],["placeholder","Nh\u1eadp ghi ch\xfa",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],[1,"btn","btn-app","btn-outline-app",3,"click"],[1,"btn","btn-app","text-white",3,"click"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Ec(2," Th\xeam vai tr\xf2 "),r.Vb(),r.Wb(3,"div",2),r.ec("click",(function(){return t.dismissModal()})),r.Wb(4,"span",3),r.Ec(5,"\xd7"),r.Vb(),r.Vb(),r.Vb(),r.Wb(6,"div",4),r.Wb(7,"div",5),r.Wb(8,"div",6),r.Wb(9,"b"),r.Ec(10,"T\xean vai tr\xf2: "),r.Vb(),r.Vb(),r.Wb(11,"div",7),r.Wb(12,"input",8),r.ec("ngModelChange",(function(e){return t.role.role_name=e})),r.Vb(),r.Vb(),r.Vb(),r.Wb(13,"div",5),r.Wb(14,"div",6),r.Wb(15,"b"),r.Ec(16,"Ghi ch\xfa: "),r.Vb(),r.Vb(),r.Wb(17,"div",7),r.Wb(18,"textarea",9),r.ec("ngModelChange",(function(e){return t.role.note=e})),r.Vb(),r.Vb(),r.Vb(),r.Vb(),r.Wb(19,"div",10),r.Wb(20,"button",11),r.ec("click",(function(){return t.dismissModal()})),r.Ec(21,"\u0110\xf3ng"),r.Vb(),r.Wb(22,"button",12),r.ec("click",(function(){return t.CreateRole()})),r.Ec(23," X\xe1c nh\u1eadn "),r.Vb(),r.Vb()),2&e&&(r.Db(12),r.oc("ngModel",t.role.role_name),r.Db(6),r.oc("ngModel",t.role.note))},directives:[D.c,D.m,D.p],styles:[""]}),e})(),Yo=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Kb({type:e,selectors:[["app-role-row"]],inputs:{role_item:"role_item",index:"index"},decls:9,vars:5,consts:[[1,"item-row","py-2"],[1,"row"],[1,"col","align-self-center","text-center","text-app","font-weight-bold",2,"max-width","350px"],[1,"col","align-self-center","text-center",2,"max-width","350px"],[1,"col","align-self-center","text-center"]],template:function(e,t){1&e&&(r.Wb(0,"div",0),r.Wb(1,"div",1),r.Wb(2,"div",2),r.Ec(3),r.jc(4,"standardizedId"),r.Vb(),r.Wb(5,"div",3),r.Ec(6),r.Vb(),r.Wb(7,"div",4),r.Ec(8),r.Vb(),r.Vb(),r.Vb()),2&e&&(r.Db(3),r.Fc(r.kc(4,3,null==t.role_item?null:t.role_item.role_id)),r.Db(3),r.Gc(" ",(null==t.role_item?null:t.role_item.display_name)||"-"," "),r.Db(2),r.Fc((null==t.role_item?null:t.role_item.note)||"-"))},pipes:[g.b],styles:[".item-row[_ngcontent-%COMP%]{display:flex;transition:.5s;padding-left:36px;height:100px;cursor:pointer;align-self:center!important;flex-direction:column;justify-content:center;box-shadow:3px 3px 8px 3px rgba(122,159,216,.2);margin-bottom:20px}.item-row[_ngcontent-%COMP%]:hover{background-color:#e4e4e4;border-left:7px solid var(--app-color)}.item-row[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{position:relative;display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;overflow:hidden;line-height:22px}.item-row[_ngcontent-%COMP%]   .trash-icon[_ngcontent-%COMP%]{border-radius:50%;padding:5px;background-color:#f5f5f5}.item-row[_ngcontent-%COMP%]   .trash-can[_ngcontent-%COMP%]{padding:3px 20px 3px 2px;border-radius:30px;margin-bottom:5px;display:flex;width:auto;align-items:center;flex-direction:row;justify-content:center}.item-row[_ngcontent-%COMP%]   .trash-can[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;color:#f5f5f5;margin-left:10px;font-size:.8rem}"]}),e})();function ei(e,t){}function ti(e,t){1&e&&(r.Wb(0,"p"),r.Ec(1,"Day la the item n\xe0"),r.Vb())}function ni(e,t){if(1&e){const e=r.Xb();r.Ub(0),r.Wb(1,"app-role-row",11),r.ec("click",(function(){r.vc(e);const n=t.$implicit;return r.ic(2).onViewRoleDetail(n.role_id)})),r.Vb(),r.Tb()}if(2&e){const e=t.$implicit,n=t.index;r.Db(1),r.oc("role_item",e)("index",n)}}function oi(e,t){if(1&e){const e=r.Xb();r.Wb(0,"div",3),r.Wb(1,"div",4),r.ec("click",(function(){return r.vc(e),r.ic().openCreateRoleModal()})),r.Ec(2,"Th\xeam m\u1edbi"),r.Vb(),r.Vb(),r.Wb(3,"div",5),r.Wb(4,"div",6),r.Wb(5,"div",7),r.Wb(6,"div",8),r.Ec(7,"M\xe3 vai tr\xf2"),r.Vb(),r.Wb(8,"div",8),r.Ec(9,"T\xean vai tr\xf2"),r.Vb(),r.Wb(10,"div",9),r.Ec(11,"Ghi ch\xfa"),r.Vb(),r.Vb(),r.Vb(),r.Cc(12,ni,2,2,"ng-container",10),r.Vb()}if(2&e){const e=r.ic();r.Db(12),r.oc("ngForOf",e.roles.slice().reverse())}}const ii=[{path:"",component:Ht,children:[{path:"book-management",component:Xt,children:[{path:"create-book",component:Lt},{path:"book-list",component:Bt},{path:"book-detail/:id",component:jt},{path:"",redirectTo:"book-list",pathMatch:"full"},{path:"**",redirectTo:"book-list"}]},{path:"customer-management",component:mt,children:[{path:"customer-list",component:on},{path:"customer-detail/:id",component:pt},{path:"",redirectTo:"customer-list",pathMatch:"full"},{path:"**",redirectTo:"customer-list"}]},{path:"employee-management",component:rn,children:[{path:"employee-list",component:rt},{path:"employee-detail/:id",component:et},{path:"",redirectTo:"employee-list",pathMatch:"full"},{path:"**",redirectTo:"employee-list"}]},{path:"account-management",component:$e,children:[{path:"account-list",component:Ne},{path:"account-detail/:id",component:De},{path:"create-account",component:xe},{path:"customer-list",component:on},{path:"customer-detail/:id",component:pt},{path:"employee-list",component:rt},{path:"role-list",component:(()=>{class e{constructor(e,t,n){this.apiRoleService=e,this.router=t,this.modalController=n,this.roles=[]}ngOnInit(){return Object(u.a)(this,void 0,void 0,(function*(){this.roles=yield this.apiRoleService.GetRoles().then()}))}onViewRoleDetail(e){this.router.navigateByUrl("/admin/account-management/role-detail/"+e)}openCreateRoleModal(){const e=this.modalController.create({component:Zo,cssClass:"modal-xl",componentProps:{}});e.show().then(),e.onDismiss().then(e=>Object(u.a)(this,void 0,void 0,(function*(){if(console.log(e),e)try{yield this.apiRoleService.CreateRole(e),toastr.success("Th\xeam m\u1edbi vai tr\xf2 th\xe0nh c\xf4ng."),this.roles=yield this.apiRoleService.GetRoles().then()}catch(t){toastr.error("Th\xeam m\u1edbi vai tr\xf2 th\u1ea5t b\u1ea1i.",t.msg||t.message)}})))}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(Jo.a),r.Qb(o.g),r.Qb(P.a))},e.\u0275cmp=r.Kb({type:e,selectors:[["app-role-list"]],decls:7,vars:0,consts:[["header",""],["emptyItem",""],["item",""],[1,"search-form","row","app-flex","mb-3"],[1,"btn-app","rounded-pill","col-1",3,"click"],[1,"d-flex","flex-column","h-100"],[1,"table","mt-3"],[1,"table-header","row","font-weight-bold","text-uppercase","ng-star-inserted","align-items-center","my-3"],[1,"col","text-center","text-app",2,"max-width","350px"],[1,"col","text-center","text-app"],[4,"ngFor","ngForOf"],[3,"role_item","index","click"]],template:function(e,t){1&e&&(r.Wb(0,"app-item-table"),r.Cc(1,ei,0,0,"ng-template",null,0,r.Dc),r.Cc(3,ti,2,0,"ng-template",null,1,r.Dc),r.Cc(5,oi,13,1,"ng-template",null,2,r.Dc),r.Vb())},directives:[B,c.l,Yo],styles:[""]}),e})()},{path:"employee-detail/:id",component:et},{path:"",redirectTo:"account-list",pathMatch:"full"},{path:"**",redirectTo:"account-list"}]},{path:"supplier-management",component:ln,children:[{path:"create-supplier",component:Be},{path:"supplier-list",component:Ke},{path:"supplier-detail/:id",component:hn},{path:"",redirectTo:"supplier-list",pathMatch:"full"},{path:"**",redirectTo:"supplier-list"}]},{path:"settings",component:me,children:[{path:"user-info",component:he},{path:"account-info",component:Y},{path:"",redirectTo:"user-info",pathMatch:"full"},{path:"**",redirectTo:"user-info"}]},{path:"borrow-ticket-management",component:gn,children:[{path:"create-borrow-ticket",component:Fn},{path:"borrow-ticket-list",component:q},{path:"borrow-ticket-detail/:id",component:Q},{path:"",redirectTo:"borrow-ticket-list",pathMatch:"full"},{path:"**",redirectTo:"borrow-ticket-list"}]},{path:"pos-management",component:Jn,children:[]},{path:"order-management",component:Yn,children:[{path:"order-list",component:lo},{path:"order-detail/:id",component:mo},{path:"",redirectTo:"order-list",pathMatch:"full"},{path:"**",redirectTo:"order-list"}]},{path:"message-management",component:d,children:[{path:"customer-messages",component:Eo},{path:"employee-messages",component:Oo},{path:"",redirectTo:"customer-messages",pathMatch:"full"},{path:"**",redirectTo:"customer-messages"}]},{path:"dashboard",component:Do,children:[{path:"sell-dashboard",component:Xo},{path:"management-dashboard",component:b},{path:"",redirectTo:"sell-dashboard",pathMatch:"full"},{path:"**",redirectTo:"sell-dashboard"}]},{path:"schedule-management",component:Ho,children:[{path:"",redirectTo:"schedule-list",pathMatch:"full"},{path:"**",redirectTo:"schedule-list"}]},{path:"",redirectTo:"book-management",pathMatch:"full"},{path:"**",redirectTo:"book-management"}]}];let ci=(()=>{class e{}return e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({factory:function(t){return new(t||e)},providers:[c.e],imports:[[qo.a,c.c,o.k.forChild(ii),D.i,i.a,Jt,Tt.a,Pt,gt.a],o.k]}),e})(),ri=(()=>{class e{}return e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({factory:function(t){return new(t||e)},imports:[[c.c,o.k,ci,i.a,a]]}),e})()}}]);